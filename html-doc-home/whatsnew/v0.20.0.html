

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>v0.20.1 (May 5, 2017) &#8212; pandas 1.0.0rc0+111.ge72cd7c52 documentation</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link rel="stylesheet" href="../_static/sphinx-bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css" />
    <link href="../_static/css/custom.css" rel="stylesheet">
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="v0.19.2 (December 24, 2016)" href="v0.19.2.html" />
    <link rel="prev" title="v0.20.2 (June 4, 2017)" href="v0.20.2.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">

<a class="navbar-brand" href="../index.html">
  <img src="../_static/pandas.svg" class="logo" alt="logo">
</a>

<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
</button>

<div id="navbar-menu" class="collapse navbar-collapse">
  <ul id="navbar-main-elements" class="navbar-nav mr-auto">
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        1.0.0
      </a>
      <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="version-menu"></div>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="../index.html">Home</a>
    </li>
    
    
    <li class="nav-item ">
        <a class="nav-link" href="v1.1.0.html">What's New in 1.1.0</a>
    </li>
    
    <li class="nav-item ">
        <a class="nav-link" href="../getting_started/index.html">Getting started</a>
    </li>
    
    <li class="nav-item ">
        <a class="nav-link" href="../user_guide/index.html">User Guide</a>
    </li>
    
    <li class="nav-item ">
        <a class="nav-link" href="../reference/index.html">API reference</a>
    </li>
    
    <li class="nav-item ">
        <a class="nav-link" href="../development/index.html">Development</a>
    </li>
    
    <li class="nav-item active">
        <a class="nav-link" href="index.html">Release Notes</a>
    </li>
    
    
  </ul>
  <ul class="navbar-nav ml-auto">
    
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/pandas-dev/pandas" target="_blank" rel="noopener">
          <span><i class="fab fa-github-square"></i></span>
        </a>
      </li>
    
    
      <li class="nav-item">
        <a class="nav-link" href="https://twitter.com/pandas_dev" target="_blank" rel="noopener">
          <span><i class="fab fa-twitter-square"></i></span>
        </a>
      </li>
    
  </ul>
</div>
    </nav>

    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
      
      
      
      
      
      
        
      
      
    </ul>

</nav>
          </div>

          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage"><i class="fas fa-list"></i> On this page</div>
<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#new-features" class="nav-link">New features</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#agg-api-for-dataframe-series" class="nav-link">agg API for DataFrame/Series</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#dtype-keyword-for-data-io" class="nav-link">dtype keyword for data IO</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#to-datetime-has-gained-an-origin-parameter" class="nav-link">.to_datetime() has gained an origin parameter</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#groupby-enhancements" class="nav-link">Groupby enhancements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#better-support-for-compressed-urls-in-read-csv" class="nav-link">Better support for compressed URLs in read_csv</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pickle-file-i-o-now-supports-compression" class="nav-link">Pickle file I/O now supports compression</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#uint64-support-improved" class="nav-link">UInt64 support improved</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#groupby-on-categoricals" class="nav-link">GroupBy on categoricals</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#table-schema-output" class="nav-link">Table schema output</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#scipy-sparse-matrix-from-to-sparsedataframe" class="nav-link">SciPy sparse matrix from/to SparseDataFrame</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#excel-output-for-styled-dataframes" class="nav-link">Excel output for styled DataFrames</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#intervalindex" class="nav-link">IntervalIndex</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#other-enhancements" class="nav-link">Other enhancements</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#backwards-incompatible-api-changes" class="nav-link">Backwards incompatible API changes</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#possible-incompatibility-for-hdf5-formats-created-with-pandas-0-13-0" class="nav-link">Possible incompatibility for HDF5 formats created with pandas < 0.13.0</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#map-on-index-types-now-return-other-index-types" class="nav-link">Map on Index types now return other Index types</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#accessing-datetime-fields-of-index-now-return-index" class="nav-link">Accessing datetime fields of Index now return Index</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pd-unique-will-now-be-consistent-with-extension-types" class="nav-link">pd.unique will now be consistent with extension types</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#s3-file-handling" class="nav-link">S3 file handling</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#partial-string-indexing-changes" class="nav-link">Partial string indexing changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#concat-of-different-float-dtypes-will-not-automatically-upcast" class="nav-link">Concat of different float dtypes will not automatically upcast</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pandas-google-bigquery-support-has-moved" class="nav-link">Pandas Google BigQuery support has moved</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#memory-usage-for-index-is-more-accurate" class="nav-link">Memory usage for Index is more accurate</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#dataframe-sort-index-changes" class="nav-link">DataFrame.sort_index changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#groupby-describe-formatting" class="nav-link">Groupby describe formatting</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#window-binary-corr-cov-operations-return-a-multiindex-dataframe" class="nav-link">Window binary corr/cov operations return a MultiIndex DataFrame</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#hdfstore-where-string-comparison" class="nav-link">HDFStore where string comparison</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#index-intersection-and-inner-join-now-preserve-the-order-of-the-left-index" class="nav-link">Index.intersection and inner join now preserve the order of the left Index</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pivot-table-always-returns-a-dataframe" class="nav-link">Pivot table always returns a DataFrame</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#other-api-changes" class="nav-link">Other API changes</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#reorganization-of-the-library-privacy-changes" class="nav-link">Reorganization of the library: privacy changes</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#modules-privacy-has-changed" class="nav-link">Modules privacy has changed</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pandas-errors" class="nav-link">pandas.errors</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pandas-testing" class="nav-link">pandas.testing</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pandas-plotting" class="nav-link">pandas.plotting</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#other-development-changes" class="nav-link">Other Development Changes</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#deprecations" class="nav-link">Deprecations</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#deprecate-ix" class="nav-link">Deprecate .ix</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#deprecate-panel" class="nav-link">Deprecate Panel</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#deprecate-groupby-agg-with-a-dictionary-when-renaming" class="nav-link">Deprecate groupby.agg() with a dictionary when renaming</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#deprecate-plotting" class="nav-link">Deprecate .plotting</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#other-deprecations" class="nav-link">Other deprecations</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#removal-of-prior-version-deprecations-changes" class="nav-link">Removal of prior version deprecations/changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#performance-improvements" class="nav-link">Performance improvements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#bug-fixes" class="nav-link">Bug fixes</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#conversion" class="nav-link">Conversion</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#indexing" class="nav-link">Indexing</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#i-o" class="nav-link">I/O</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#plotting" class="nav-link">Plotting</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#groupby-resample-rolling" class="nav-link">Groupby/resample/rolling</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#sparse" class="nav-link">Sparse</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#reshaping" class="nav-link">Reshaping</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#numeric" class="nav-link">Numeric</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#other" class="nav-link">Other</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#contributors" class="nav-link">Contributors</a>
        </li>
    
    </ul>
</nav>
              
            </div>

          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
              <div>
                
  <div class="section" id="v0-20-1-may-5-2017">
<span id="whatsnew-0200"></span><h1>v0.20.1 (May 5, 2017)<a class="headerlink" href="#v0-20-1-may-5-2017" title="Permalink to this headline">¶</a></h1>
<p>This is a major release from 0.19.2 and includes a number of API changes, deprecations, new features,
enhancements, and performance improvements along with a large number of bug fixes. We recommend that all
users upgrade to this version.</p>
<p>Highlights include:</p>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">.agg()</span></code> API for Series/DataFrame similar to the groupby-rolling-resample API’s, see <a class="reference internal" href="#whatsnew-0200-enhancements-agg"><span class="std std-ref">here</span></a></p></li>
<li><p>Integration with the <code class="docutils literal notranslate"><span class="pre">feather-format</span></code>, including a new top-level <code class="docutils literal notranslate"><span class="pre">pd.read_feather()</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.to_feather()</span></code> method, see <a class="reference internal" href="../user_guide/io.html#io-feather"><span class="std std-ref">here</span></a>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.ix</span></code> indexer has been deprecated, see <a class="reference internal" href="#whatsnew-0200-api-breaking-deprecate-ix"><span class="std std-ref">here</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Panel</span></code> has been deprecated, see <a class="reference internal" href="#whatsnew-0200-api-breaking-deprecate-panel"><span class="std std-ref">here</span></a></p></li>
<li><p>Addition of an <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">Interval</span></code> scalar type, see <a class="reference internal" href="#whatsnew-0200-enhancements-intervalindex"><span class="std std-ref">here</span></a></p></li>
<li><p>Improved user API when grouping by index levels in <code class="docutils literal notranslate"><span class="pre">.groupby()</span></code>, see <a class="reference internal" href="#whatsnew-0200-enhancements-groupby-access"><span class="std std-ref">here</span></a></p></li>
<li><p>Improved support for <code class="docutils literal notranslate"><span class="pre">UInt64</span></code> dtypes, see <a class="reference internal" href="#whatsnew-0200-enhancements-uint64-support"><span class="std std-ref">here</span></a></p></li>
<li><p>A new orient for JSON serialization, <code class="docutils literal notranslate"><span class="pre">orient='table'</span></code>, that uses the Table Schema spec and that gives the possibility for a more interactive repr in the Jupyter Notebook, see <a class="reference internal" href="#whatsnew-0200-enhancements-table-schema"><span class="std std-ref">here</span></a></p></li>
<li><p>Experimental support for exporting styled DataFrames (<code class="docutils literal notranslate"><span class="pre">DataFrame.style</span></code>) to Excel, see <a class="reference internal" href="#whatsnew-0200-enhancements-style-excel"><span class="std std-ref">here</span></a></p></li>
<li><p>Window binary corr/cov operations now return a MultiIndexed <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> rather than a <code class="docutils literal notranslate"><span class="pre">Panel</span></code>, as <code class="docutils literal notranslate"><span class="pre">Panel</span></code> is now deprecated, see <a class="reference internal" href="#whatsnew-0200-api-breaking-rolling-pairwise"><span class="std std-ref">here</span></a></p></li>
<li><p>Support for S3 handling now uses <code class="docutils literal notranslate"><span class="pre">s3fs</span></code>, see <a class="reference internal" href="#whatsnew-0200-api-breaking-s3"><span class="std std-ref">here</span></a></p></li>
<li><p>Google BigQuery support now uses the <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code> library, see <a class="reference internal" href="#whatsnew-0200-api-breaking-gbq"><span class="std std-ref">here</span></a></p></li>
</ul>
<div class="alert alert-warning">
<p class="admonition-title">Warning</p>
<p>Pandas has changed the internal structure and layout of the code base.
This can affect imports that are not from the top-level <code class="docutils literal notranslate"><span class="pre">pandas.*</span></code> namespace, please see the changes <a class="reference internal" href="#whatsnew-0200-privacy"><span class="std std-ref">here</span></a>.</p>
</div>
<p>Check the <a class="reference internal" href="#whatsnew-0200-api-breaking"><span class="std std-ref">API Changes</span></a> and <a class="reference internal" href="#whatsnew-0200-deprecations"><span class="std std-ref">deprecations</span></a> before updating.</p>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p>This is a combined release for 0.20.0 and 0.20.1.
Version 0.20.1 contains one additional change for backwards-compatibility with downstream projects using pandas’ <code class="docutils literal notranslate"><span class="pre">utils</span></code> routines. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16250">GH16250</a>)</p>
</div>
<div class="contents local topic" id="what-s-new-in-v0-20-0">
<p class="topic-title first">What’s new in v0.20.0</p>
<ul class="simple">
<li><p><a class="reference internal" href="#new-features" id="id1">New features</a></p>
<ul>
<li><p><a class="reference internal" href="#agg-api-for-dataframe-series" id="id2"><code class="docutils literal notranslate"><span class="pre">agg</span></code> API for DataFrame/Series</a></p></li>
<li><p><a class="reference internal" href="#dtype-keyword-for-data-io" id="id3"><code class="docutils literal notranslate"><span class="pre">dtype</span></code> keyword for data IO</a></p></li>
<li><p><a class="reference internal" href="#to-datetime-has-gained-an-origin-parameter" id="id4"><code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code> has gained an <code class="docutils literal notranslate"><span class="pre">origin</span></code> parameter</a></p></li>
<li><p><a class="reference internal" href="#groupby-enhancements" id="id5">Groupby enhancements</a></p></li>
<li><p><a class="reference internal" href="#better-support-for-compressed-urls-in-read-csv" id="id6">Better support for compressed URLs in <code class="docutils literal notranslate"><span class="pre">read_csv</span></code></a></p></li>
<li><p><a class="reference internal" href="#pickle-file-i-o-now-supports-compression" id="id7">Pickle file I/O now supports compression</a></p></li>
<li><p><a class="reference internal" href="#uint64-support-improved" id="id8">UInt64 support improved</a></p></li>
<li><p><a class="reference internal" href="#groupby-on-categoricals" id="id9">GroupBy on categoricals</a></p></li>
<li><p><a class="reference internal" href="#table-schema-output" id="id10">Table schema output</a></p></li>
<li><p><a class="reference internal" href="#scipy-sparse-matrix-from-to-sparsedataframe" id="id11">SciPy sparse matrix from/to SparseDataFrame</a></p></li>
<li><p><a class="reference internal" href="#excel-output-for-styled-dataframes" id="id12">Excel output for styled DataFrames</a></p></li>
<li><p><a class="reference internal" href="#intervalindex" id="id13">IntervalIndex</a></p></li>
<li><p><a class="reference internal" href="#other-enhancements" id="id14">Other enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#backwards-incompatible-api-changes" id="id15">Backwards incompatible API changes</a></p>
<ul>
<li><p><a class="reference internal" href="#possible-incompatibility-for-hdf5-formats-created-with-pandas-0-13-0" id="id16">Possible incompatibility for HDF5 formats created with pandas &lt; 0.13.0</a></p></li>
<li><p><a class="reference internal" href="#map-on-index-types-now-return-other-index-types" id="id17">Map on Index types now return other Index types</a></p></li>
<li><p><a class="reference internal" href="#accessing-datetime-fields-of-index-now-return-index" id="id18">Accessing datetime fields of Index now return Index</a></p></li>
<li><p><a class="reference internal" href="#pd-unique-will-now-be-consistent-with-extension-types" id="id19">pd.unique will now be consistent with extension types</a></p></li>
<li><p><a class="reference internal" href="#s3-file-handling" id="id20">S3 file handling</a></p></li>
<li><p><a class="reference internal" href="#partial-string-indexing-changes" id="id21">Partial string indexing changes</a></p></li>
<li><p><a class="reference internal" href="#concat-of-different-float-dtypes-will-not-automatically-upcast" id="id22">Concat of different float dtypes will not automatically upcast</a></p></li>
<li><p><a class="reference internal" href="#pandas-google-bigquery-support-has-moved" id="id23">Pandas Google BigQuery support has moved</a></p></li>
<li><p><a class="reference internal" href="#memory-usage-for-index-is-more-accurate" id="id24">Memory usage for Index is more accurate</a></p></li>
<li><p><a class="reference internal" href="#dataframe-sort-index-changes" id="id25">DataFrame.sort_index changes</a></p></li>
<li><p><a class="reference internal" href="#groupby-describe-formatting" id="id26">Groupby describe formatting</a></p></li>
<li><p><a class="reference internal" href="#window-binary-corr-cov-operations-return-a-multiindex-dataframe" id="id27">Window binary corr/cov operations return a MultiIndex DataFrame</a></p></li>
<li><p><a class="reference internal" href="#hdfstore-where-string-comparison" id="id28">HDFStore where string comparison</a></p></li>
<li><p><a class="reference internal" href="#index-intersection-and-inner-join-now-preserve-the-order-of-the-left-index" id="id29">Index.intersection and inner join now preserve the order of the left Index</a></p></li>
<li><p><a class="reference internal" href="#pivot-table-always-returns-a-dataframe" id="id30">Pivot table always returns a DataFrame</a></p></li>
<li><p><a class="reference internal" href="#other-api-changes" id="id31">Other API changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#reorganization-of-the-library-privacy-changes" id="id32">Reorganization of the library: privacy changes</a></p>
<ul>
<li><p><a class="reference internal" href="#modules-privacy-has-changed" id="id33">Modules privacy has changed</a></p></li>
<li><p><a class="reference internal" href="#pandas-errors" id="id34"><code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code></a></p></li>
<li><p><a class="reference internal" href="#pandas-testing" id="id35"><code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code></a></p></li>
<li><p><a class="reference internal" href="#pandas-plotting" id="id36"><code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code></a></p></li>
<li><p><a class="reference internal" href="#other-development-changes" id="id37">Other Development Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deprecations" id="id38">Deprecations</a></p>
<ul>
<li><p><a class="reference internal" href="#deprecate-ix" id="id39">Deprecate <code class="docutils literal notranslate"><span class="pre">.ix</span></code></a></p></li>
<li><p><a class="reference internal" href="#deprecate-panel" id="id40">Deprecate Panel</a></p></li>
<li><p><a class="reference internal" href="#deprecate-groupby-agg-with-a-dictionary-when-renaming" id="id41">Deprecate groupby.agg() with a dictionary when renaming</a></p></li>
<li><p><a class="reference internal" href="#deprecate-plotting" id="id42">Deprecate .plotting</a></p></li>
<li><p><a class="reference internal" href="#other-deprecations" id="id43">Other deprecations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#removal-of-prior-version-deprecations-changes" id="id44">Removal of prior version deprecations/changes</a></p></li>
<li><p><a class="reference internal" href="#performance-improvements" id="id45">Performance improvements</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes" id="id46">Bug fixes</a></p>
<ul>
<li><p><a class="reference internal" href="#conversion" id="id47">Conversion</a></p></li>
<li><p><a class="reference internal" href="#indexing" id="id48">Indexing</a></p></li>
<li><p><a class="reference internal" href="#i-o" id="id49">I/O</a></p></li>
<li><p><a class="reference internal" href="#plotting" id="id50">Plotting</a></p></li>
<li><p><a class="reference internal" href="#groupby-resample-rolling" id="id51">Groupby/resample/rolling</a></p></li>
<li><p><a class="reference internal" href="#sparse" id="id52">Sparse</a></p></li>
<li><p><a class="reference internal" href="#reshaping" id="id53">Reshaping</a></p></li>
<li><p><a class="reference internal" href="#numeric" id="id54">Numeric</a></p></li>
<li><p><a class="reference internal" href="#other" id="id55">Other</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#contributors" id="id56">Contributors</a></p></li>
</ul>
</div>
<div class="section" id="new-features">
<span id="whatsnew-0200-enhancements"></span><h2>New features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="agg-api-for-dataframe-series">
<span id="whatsnew-0200-enhancements-agg"></span><h3><code class="docutils literal notranslate"><span class="pre">agg</span></code> API for DataFrame/Series<a class="headerlink" href="#agg-api-for-dataframe-series" title="Permalink to this headline">¶</a></h3>
<p>Series &amp; DataFrame have been enhanced to support the aggregation API. This is a familiar API
from groupby, window operations, and resampling. This allows aggregation operations in a concise way
by using <code class="xref py py-meth docutils literal notranslate"><span class="pre">agg()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">transform()</span></code>. The full documentation
is <a class="reference internal" href="../getting_started/basics.html#basics-aggregate"><span class="std std-ref">here</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1623">GH1623</a>).</p>
<p>Here is a sample</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span>
<span class="gp">   ...: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;1/1/2000&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
<span class="gp">   ...: </span>

<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [3]: </span><span class="n">df</span>
<span class="gh">Out[3]: </span><span class="go"></span>
<span class="go">                   A         B         C</span>
<span class="go">2000-01-01  0.469112 -0.282863 -1.509059</span>
<span class="go">2000-01-02 -1.135632  1.212112 -0.173215</span>
<span class="go">2000-01-03  0.119209 -1.044236 -0.861849</span>
<span class="go">2000-01-04       NaN       NaN       NaN</span>
<span class="go">2000-01-05       NaN       NaN       NaN</span>
<span class="go">2000-01-06       NaN       NaN       NaN</span>
<span class="go">2000-01-07       NaN       NaN       NaN</span>
<span class="go">2000-01-08  0.113648 -1.478427  0.524988</span>
<span class="go">2000-01-09  0.404705  0.577046 -1.715002</span>
<span class="go">2000-01-10 -1.039268 -0.370647 -1.157892</span>

<span class="go">[10 rows x 3 columns]</span>
</pre></div>
</div>
<p>One can operate using string function names, callables, lists, or dictionaries of these.</p>
<p>Using a single function is equivalent to <code class="docutils literal notranslate"><span class="pre">.apply</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">(</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go"></span>
<span class="go">A   -1.068226</span>
<span class="go">B   -1.387015</span>
<span class="go">C   -4.892029</span>
<span class="go">Length: 3, dtype: float64</span>
</pre></div>
</div>
<p>Multiple aggregations with a list of functions.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">])</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="go">            A         B         C</span>
<span class="go">sum -1.068226 -1.387015 -4.892029</span>
<span class="go">min -1.135632 -1.478427 -1.715002</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
<p>Using a dict provides the ability to apply specific aggregations per column.
You will get a matrix-like output of all of the aggregators. The output has one column
per unique function. Those functions applied to a particular column will be <code class="docutils literal notranslate"><span class="pre">NaN</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">],</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">]})</span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">            A         B</span>
<span class="go">max       NaN  1.212112</span>
<span class="go">min -1.135632 -1.478427</span>
<span class="go">sum -1.068226       NaN</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>The API also supports a <code class="docutils literal notranslate"><span class="pre">.transform()</span></code> function for broadcasting results.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">df</span><span class="o">.</span><span class="n">transform</span><span class="p">([</span><span class="s1">&#39;abs&#39;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()])</span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="go">                   A                   B                   C          </span>
<span class="go">                 abs  &lt;lambda&gt;       abs  &lt;lambda&gt;       abs  &lt;lambda&gt;</span>
<span class="go">2000-01-01  0.469112  1.604745  0.282863  1.195563  1.509059  0.205944</span>
<span class="go">2000-01-02  1.135632  0.000000  1.212112  2.690539  0.173215  1.541787</span>
<span class="go">2000-01-03  0.119209  1.254841  1.044236  0.434191  0.861849  0.853153</span>
<span class="go">2000-01-04       NaN       NaN       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-05       NaN       NaN       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-06       NaN       NaN       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-07       NaN       NaN       NaN       NaN       NaN       NaN</span>
<span class="go">2000-01-08  0.113648  1.249281  1.478427  0.000000  0.524988  2.239990</span>
<span class="go">2000-01-09  0.404705  1.540338  0.577046  2.055473  1.715002  0.000000</span>
<span class="go">2000-01-10  1.039268  0.096364  0.370647  1.107780  1.157892  0.557110</span>

<span class="go">[10 rows x 6 columns]</span>
</pre></div>
</div>
<p>When presented with mixed dtypes that cannot be aggregated, <code class="docutils literal notranslate"><span class="pre">.agg()</span></code> will only take the valid
aggregations. This is similar to how groupby <code class="docutils literal notranslate"><span class="pre">.agg()</span></code> works. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15015">GH15015</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">],</span>
<span class="gp">   ...: </span>                   <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)})</span>
<span class="gp">   ...: </span>

<span class="gp">In [9]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[9]: </span><span class="go"></span>
<span class="go">A             int64</span>
<span class="go">B           float64</span>
<span class="go">C            object</span>
<span class="go">D    datetime64[ns]</span>
<span class="go">Length: 4, dtype: object</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">df</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;sum&#39;</span><span class="p">])</span>
<span class="gh">Out[10]: </span><span class="go"></span>
<span class="go">     A    B          C          D</span>
<span class="go">min  1  1.0        bar 2013-01-01</span>
<span class="go">sum  6  6.0  foobarbaz        NaT</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="dtype-keyword-for-data-io">
<span id="whatsnew-0200-enhancements-dataio-dtype"></span><h3><code class="docutils literal notranslate"><span class="pre">dtype</span></code> keyword for data IO<a class="headerlink" href="#dtype-keyword-for-data-io" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">'python'</span></code> engine for <code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code>, as well as the <code class="xref py py-func docutils literal notranslate"><span class="pre">read_fwf()</span></code> function for parsing
fixed-width text files and <code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code> for parsing Excel files, now accept the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> keyword argument for specifying the types of specific columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14295">GH14295</a>). See the <a class="reference internal" href="../user_guide/io.html#io-dtypes"><span class="std std-ref">io docs</span></a> for more information.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">data</span> <span class="o">=</span> <span class="s2">&quot;a  b</span><span class="se">\n</span><span class="s2">1  2</span><span class="se">\n</span><span class="s2">3  4&quot;</span>

<span class="gp">In [12]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[12]: </span><span class="go"></span>
<span class="go">a    int64</span>
<span class="go">b    int64</span>
<span class="go">Length: 2, dtype: object</span>

<span class="gp">In [13]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_fwf</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="s1">&#39;float64&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="s1">&#39;object&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[13]: </span><span class="go"></span>
<span class="go">a    float64</span>
<span class="go">b     object</span>
<span class="go">Length: 2, dtype: object</span>
</pre></div>
</div>
</div>
<div class="section" id="to-datetime-has-gained-an-origin-parameter">
<span id="whatsnew-0120-enhancements-datetime-origin"></span><h3><code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code> has gained an <code class="docutils literal notranslate"><span class="pre">origin</span></code> parameter<a class="headerlink" href="#to-datetime-has-gained-an-origin-parameter" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code> has gained a new parameter, <code class="docutils literal notranslate"><span class="pre">origin</span></code>, to define a reference date
from where to compute the resulting timestamps when parsing numerical values with a specific <code class="docutils literal notranslate"><span class="pre">unit</span></code> specified. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11276">GH11276</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11745">GH11745</a>)</p>
<p>For example, with 1960-01-01 as the starting date:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;1960-01-01&#39;</span><span class="p">))</span>
<span class="gh">Out[14]: </span><span class="go">DatetimeIndex([&#39;1960-01-02&#39;, &#39;1960-01-03&#39;, &#39;1960-01-04&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>The default is set at <code class="docutils literal notranslate"><span class="pre">origin='unix'</span></code>, which defaults to <code class="docutils literal notranslate"><span class="pre">1970-01-01</span> <span class="pre">00:00:00</span></code>, which is
commonly called ‘unix epoch’ or POSIX time. This was the previous default, so this is a backward compatible change.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="gh">Out[15]: </span><span class="go">DatetimeIndex([&#39;1970-01-02&#39;, &#39;1970-01-03&#39;, &#39;1970-01-04&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
<div class="section" id="groupby-enhancements">
<span id="whatsnew-0200-enhancements-groupby-access"></span><h3>Groupby enhancements<a class="headerlink" href="#groupby-enhancements" title="Permalink to this headline">¶</a></h3>
<p>Strings passed to <code class="docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code> as the <code class="docutils literal notranslate"><span class="pre">by</span></code> parameter may now reference either column names or index level names. Previously, only column names could be referenced. This allows to easily group by a column and index level at the same time. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/5677">GH5677</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">arrays</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">,</span> <span class="s1">&#39;qux&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>          <span class="p">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">]]</span>
<span class="gp">   ....: </span>

<span class="gp">In [17]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">(</span><span class="n">arrays</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;first&#39;</span><span class="p">,</span> <span class="s1">&#39;second&#39;</span><span class="p">])</span>

<span class="gp">In [18]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ....: </span>                   <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)},</span>
<span class="gp">   ....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [19]: </span><span class="n">df</span>
<span class="gh">Out[19]: </span><span class="go"></span>
<span class="go">              A  B</span>
<span class="go">first second      </span>
<span class="go">bar   one     1  0</span>
<span class="go">      two     1  1</span>
<span class="go">baz   one     1  2</span>
<span class="go">      two     1  3</span>
<span class="go">foo   one     2  4</span>
<span class="go">      two     2  5</span>
<span class="go">qux   one     3  6</span>
<span class="go">      two     3  7</span>

<span class="go">[8 rows x 2 columns]</span>

<span class="gp">In [20]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;second&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[20]: </span><span class="go"></span>
<span class="go">          B</span>
<span class="go">second A   </span>
<span class="go">one    1  2</span>
<span class="go">       2  4</span>
<span class="go">       3  6</span>
<span class="go">two    1  4</span>
<span class="go">       2  5</span>
<span class="go">       3  7</span>

<span class="go">[6 rows x 1 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="better-support-for-compressed-urls-in-read-csv">
<span id="whatsnew-0200-enhancements-compressed-urls"></span><h3>Better support for compressed URLs in <code class="docutils literal notranslate"><span class="pre">read_csv</span></code><a class="headerlink" href="#better-support-for-compressed-urls-in-read-csv" title="Permalink to this headline">¶</a></h3>
<p>The compression code was refactored (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12688">GH12688</a>). As a result, reading
dataframes from URLs in <code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code> or <code class="xref py py-func docutils literal notranslate"><span class="pre">read_table()</span></code> now supports
additional compression methods: <code class="docutils literal notranslate"><span class="pre">xz</span></code>, <code class="docutils literal notranslate"><span class="pre">bz2</span></code>, and <code class="docutils literal notranslate"><span class="pre">zip</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14570">GH14570</a>).
Previously, only <code class="docutils literal notranslate"><span class="pre">gzip</span></code> compression was supported. By default, compression of
URLs and paths are now inferred using their file extensions. Additionally,
support for bz2 compression in the python 2 C-engine improved (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14874">GH14874</a>).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">url</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;https://github.com/{repo}/raw/{branch}/{path}&#39;</span>
<span class="gp">   ....: </span>       <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">repo</span><span class="o">=</span><span class="s1">&#39;pandas-dev/pandas&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>               <span class="n">branch</span><span class="o">=</span><span class="s1">&#39;master&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>               <span class="n">path</span><span class="o">=</span><span class="s1">&#39;pandas/tests/io/parser/data/salaries.csv.bz2&#39;</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="go"># default, infer compression</span>
<span class="gp">In [22]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;infer&#39;</span><span class="p">)</span>

<span class="go"># explicitly specify compression</span>
<span class="gp">In [23]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;bz2&#39;</span><span class="p">)</span>

<span class="gp">In [24]: </span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[24]: </span><span class="go"></span>
<span class="go">       S  X  E  M</span>
<span class="go">0  13876  1  1  1</span>
<span class="go">1  11608  1  3  0</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="pickle-file-i-o-now-supports-compression">
<span id="whatsnew-0200-enhancements-pickle-compression"></span><h3>Pickle file I/O now supports compression<a class="headerlink" href="#pickle-file-i-o-now-supports-compression" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">read_pickle()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_pickle()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.to_pickle()</span></code>
can now read from and write to compressed pickle files. Compression methods
can be an explicit parameter or be inferred from the file extension.
See <a class="reference internal" href="../user_guide/io.html#io-pickle-compression"><span class="std std-ref">the docs here.</span></a></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                   <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">)})</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p>Using an explicit compression type</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.compress&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;gzip&quot;</span><span class="p">)</span>

<span class="gp">In [27]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.compress&quot;</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s2">&quot;gzip&quot;</span><span class="p">)</span>

<span class="gp">In [28]: </span><span class="n">rt</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[28]: </span><span class="go"></span>
<span class="go">          A    B                   C</span>
<span class="go">0 -1.344312  foo 2013-01-01 00:00:00</span>
<span class="go">1  0.844885  foo 2013-01-01 00:00:01</span>
<span class="go">2  1.075770  foo 2013-01-01 00:00:02</span>
<span class="go">3 -0.109050  foo 2013-01-01 00:00:03</span>
<span class="go">4  1.643563  foo 2013-01-01 00:00:04</span>

<span class="go">[5 rows x 3 columns]</span>
</pre></div>
</div>
<p>The default is to infer the compression type from the extension (<code class="docutils literal notranslate"><span class="pre">compression='infer'</span></code>):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [29]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.gz&quot;</span><span class="p">)</span>

<span class="gp">In [30]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;data.pkl.gz&quot;</span><span class="p">)</span>

<span class="gp">In [31]: </span><span class="n">rt</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[31]: </span><span class="go"></span>
<span class="go">          A    B                   C</span>
<span class="go">0 -1.344312  foo 2013-01-01 00:00:00</span>
<span class="go">1  0.844885  foo 2013-01-01 00:00:01</span>
<span class="go">2  1.075770  foo 2013-01-01 00:00:02</span>
<span class="go">3 -0.109050  foo 2013-01-01 00:00:03</span>
<span class="go">4  1.643563  foo 2013-01-01 00:00:04</span>

<span class="go">[5 rows x 3 columns]</span>

<span class="gp">In [32]: </span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_pickle</span><span class="p">(</span><span class="s2">&quot;s1.pkl.bz2&quot;</span><span class="p">)</span>

<span class="gp">In [33]: </span><span class="n">rt</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_pickle</span><span class="p">(</span><span class="s2">&quot;s1.pkl.bz2&quot;</span><span class="p">)</span>

<span class="gp">In [34]: </span><span class="n">rt</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[34]: </span><span class="go"></span>
<span class="go">0   -1.344312</span>
<span class="go">1    0.844885</span>
<span class="go">2    1.075770</span>
<span class="go">3   -0.109050</span>
<span class="go">4    1.643563</span>
<span class="go">Name: A, Length: 5, dtype: float64</span>
</pre></div>
</div>
</div>
<div class="section" id="uint64-support-improved">
<span id="whatsnew-0200-enhancements-uint64-support"></span><h3>UInt64 support improved<a class="headerlink" href="#uint64-support-improved" title="Permalink to this headline">¶</a></h3>
<p>Pandas has significantly improved support for operations involving unsigned,
or purely non-negative, integers. Previously, handling these integers would
result in improper rounding or data-type casting, leading to incorrect results.
Notably, a new numerical index, <code class="docutils literal notranslate"><span class="pre">UInt64Index</span></code>, has been created (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14937">GH14937</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [35]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">UInt64Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [36]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="n">idx</span><span class="p">)</span>

<span class="gp">In [37]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span>
<span class="gh">Out[37]: </span><span class="go">UInt64Index([1, 2, 3], dtype=&#39;uint64&#39;)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Bug in converting object elements of array-like objects to unsigned 64-bit integers (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4471">GH4471</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14982">GH14982</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.unique()</span></code> in which unsigned 64-bit integers were causing overflow (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14721">GH14721</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> construction in which unsigned 64-bit integer elements were being converted to objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14881">GH14881</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in which unsigned 64-bit integer elements were being improperly converted to the wrong data types (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14983">GH14983</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.unique()</span></code> in which unsigned 64-bit integers were causing overflow (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14915">GH14915</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.value_counts()</span></code> in which unsigned 64-bit integers were being erroneously truncated in the output (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14934">GH14934</a>)</p></li>
</ul>
</div>
<div class="section" id="groupby-on-categoricals">
<span id="whatsnew-0200-enhancements-groupy-categorical"></span><h3>GroupBy on categoricals<a class="headerlink" href="#groupby-on-categoricals" title="Permalink to this headline">¶</a></h3>
<p>In previous versions, <code class="docutils literal notranslate"><span class="pre">.groupby(...,</span> <span class="pre">sort=False)</span></code> would fail with a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when grouping on a categorical series with some categories not appearing in the data. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13179">GH13179</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [38]: </span><span class="n">chromosomes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">r_</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">23</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">]]</span>

<span class="gp">In [39]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>    <span class="s1">&#39;chromosomes&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">chromosomes</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span>
<span class="gp">   ....: </span>                                  <span class="n">categories</span><span class="o">=</span><span class="n">chromosomes</span><span class="p">,</span>
<span class="gp">   ....: </span>                                  <span class="n">ordered</span><span class="o">=</span><span class="bp">True</span><span class="p">)})</span>
<span class="gp">   ....: </span>

<span class="gp">In [40]: </span><span class="n">df</span>
<span class="gh">Out[40]: </span><span class="go"></span>
<span class="go">     A   B   C chromosomes</span>
<span class="go">0   87  22  81           4</span>
<span class="go">1   87  22  81          13</span>
<span class="go">2   87  22  81          22</span>
<span class="go">3   87  22  81           2</span>
<span class="go">4   87  22  81           6</span>
<span class="go">..  ..  ..  ..         ...</span>
<span class="go">95  87  22  81           8</span>
<span class="go">96  87  22  81          11</span>
<span class="go">97  87  22  81           X</span>
<span class="go">98  87  22  81           1</span>
<span class="go">99  87  22  81          19</span>

<span class="go">[100 rows x 4 columns]</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">chromosomes</span> <span class="o">!=</span> <span class="s1">&#39;1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;chromosomes&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span>: items in new_categories are not the same as in old categories
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [41]: </span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">chromosomes</span> <span class="o">!=</span> <span class="s1">&#39;1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;chromosomes&#39;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[41]: </span><span class="go"></span>
<span class="go">               A    B    C</span>
<span class="go">chromosomes               </span>
<span class="go">2            348   88  324</span>
<span class="go">3            348   88  324</span>
<span class="go">4            348   88  324</span>
<span class="go">5            261   66  243</span>
<span class="go">6            174   44  162</span>
<span class="go">...          ...  ...  ...</span>
<span class="go">22           348   88  324</span>
<span class="go">X            348   88  324</span>
<span class="go">Y            435  110  405</span>
<span class="go">1              0    0    0</span>
<span class="go">21             0    0    0</span>

<span class="go">[24 rows x 3 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="table-schema-output">
<span id="whatsnew-0200-enhancements-table-schema"></span><h3>Table schema output<a class="headerlink" href="#table-schema-output" title="Permalink to this headline">¶</a></h3>
<p>The new orient <code class="docutils literal notranslate"><span class="pre">'table'</span></code> for <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_json()</span></code>
will generate a <a class="reference external" href="http://specs.frictionlessdata.io/json-table-schema/">Table Schema</a> compatible string representation of
the data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [42]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   ....: </span>     <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>     <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2016-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">)},</span>
<span class="gp">   ....: </span>    <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;idx&#39;</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [43]: </span><span class="n">df</span>
<span class="gh">Out[43]: </span><span class="go"></span>
<span class="go">     A  B          C</span>
<span class="go">idx                 </span>
<span class="go">0    1  a 2016-01-01</span>
<span class="go">1    2  b 2016-01-02</span>
<span class="go">2    3  c 2016-01-03</span>

<span class="go">[3 rows x 3 columns]</span>

<span class="gp">In [44]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
<span class="gh">Out[44]: </span><span class="go">&#39;{&quot;schema&quot;:{&quot;fields&quot;:[{&quot;name&quot;:&quot;idx&quot;,&quot;type&quot;:&quot;integer&quot;},{&quot;name&quot;:&quot;A&quot;,&quot;type&quot;:&quot;integer&quot;},{&quot;name&quot;:&quot;B&quot;,&quot;type&quot;:&quot;string&quot;},{&quot;name&quot;:&quot;C&quot;,&quot;type&quot;:&quot;datetime&quot;}],&quot;primaryKey&quot;:[&quot;idx&quot;],&quot;pandas_version&quot;:&quot;0.20.0&quot;},&quot;data&quot;:[{&quot;idx&quot;:0,&quot;A&quot;:1,&quot;B&quot;:&quot;a&quot;,&quot;C&quot;:&quot;2016-01-01T00:00:00.000Z&quot;},{&quot;idx&quot;:1,&quot;A&quot;:2,&quot;B&quot;:&quot;b&quot;,&quot;C&quot;:&quot;2016-01-02T00:00:00.000Z&quot;},{&quot;idx&quot;:2,&quot;A&quot;:3,&quot;B&quot;:&quot;c&quot;,&quot;C&quot;:&quot;2016-01-03T00:00:00.000Z&quot;}]}&#39;</span>
</pre></div>
</div>
<p>See <a class="reference internal" href="../user_guide/io.html#io-table-schema"><span class="std std-ref">IO: Table Schema for more information</span></a>.</p>
<p>Additionally, the repr for <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and <code class="docutils literal notranslate"><span class="pre">Series</span></code> can now publish
this JSON Table schema representation of the Series or DataFrame if you are
using IPython (or another frontend like <a class="reference external" href="http://nteract.io/">nteract</a> using the Jupyter messaging
protocol).
This gives frontends like the Jupyter notebook and <a class="reference external" href="http://nteract.io/">nteract</a>
more flexibility in how they display pandas objects, since they have
more information about the data.
You must enable this by setting the <code class="docutils literal notranslate"><span class="pre">display.html.table_schema</span></code> option to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</div>
<div class="section" id="scipy-sparse-matrix-from-to-sparsedataframe">
<span id="whatsnew-0200-enhancements-scipy-sparse"></span><h3>SciPy sparse matrix from/to SparseDataFrame<a class="headerlink" href="#scipy-sparse-matrix-from-to-sparsedataframe" title="Permalink to this headline">¶</a></h3>
<p>Pandas now supports creating sparse dataframes directly from <code class="docutils literal notranslate"><span class="pre">scipy.sparse.spmatrix</span></code> instances.
See the <a class="reference internal" href="../user_guide/sparse.html#sparse-scipysparse"><span class="std std-ref">documentation</span></a> for more information. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4343">GH4343</a>)</p>
<p>All sparse formats are supported, but matrices that are not in <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/sparse.html#module-scipy.sparse" title="(in SciPy v1.4.1)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">COOrdinate</span></code></a> format will be converted, copying data as needed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.sparse</span> <span class="kn">import</span> <span class="n">csr_matrix</span>
<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">arr</span><span class="p">[</span><span class="n">arr</span> <span class="o">&lt;</span> <span class="o">.</span><span class="mi">9</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">sp_arr</span> <span class="o">=</span> <span class="n">csr_matrix</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
<span class="n">sp_arr</span>
<span class="n">sdf</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">SparseDataFrame</span><span class="p">(</span><span class="n">sp_arr</span><span class="p">)</span>
<span class="n">sdf</span>
</pre></div>
</div>
<p>To convert a <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> back to sparse SciPy matrix in COO format, you can use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sdf</span><span class="o">.</span><span class="n">to_coo</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="excel-output-for-styled-dataframes">
<span id="whatsnew-0200-enhancements-style-excel"></span><h3>Excel output for styled DataFrames<a class="headerlink" href="#excel-output-for-styled-dataframes" title="Permalink to this headline">¶</a></h3>
<p>Experimental support has been added to export <code class="docutils literal notranslate"><span class="pre">DataFrame.style</span></code> formats to Excel using the <code class="docutils literal notranslate"><span class="pre">openpyxl</span></code> engine. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15530">GH15530</a>)</p>
<p>For example, after running the following, <code class="docutils literal notranslate"><span class="pre">styled.xlsx</span></code> renders as below:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span>

<span class="gp">In [46]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)})</span>

<span class="gp">In [47]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">24</span><span class="p">)</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....: </span>                                 <span class="n">columns</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;BCDE&#39;</span><span class="p">))],</span>
<span class="gp">   ....: </span>               <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [48]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="gp">In [49]: </span><span class="n">df</span>
<span class="gh">Out[49]: </span><span class="go"></span>
<span class="go">      A         B         C         D         E</span>
<span class="go">0   1.0  1.329212       NaN -0.316280 -0.990810</span>
<span class="go">1   2.0 -1.070816 -1.438713  0.564417  0.295722</span>
<span class="go">2   3.0 -1.626404  0.219565  0.678805  1.889273</span>
<span class="go">3   4.0  0.961538  0.104011 -0.481165  0.850229</span>
<span class="go">4   5.0  1.453425  1.057737  0.165562  0.515018</span>
<span class="go">5   6.0 -1.336936  0.562861  1.392855 -0.063328</span>
<span class="go">6   7.0  0.121668  1.207603 -0.002040  1.627796</span>
<span class="go">7   8.0  0.354493  1.037528 -0.385684  0.519818</span>
<span class="go">8   9.0  1.686583 -1.325963  1.428984 -2.089354</span>
<span class="go">9  10.0 -0.129820  0.631523 -0.586538  0.290720</span>

<span class="go">[10 rows x 5 columns]</span>

<span class="gp">In [50]: </span><span class="n">styled</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">style</span>
<span class="gp">   ....: </span>          <span class="o">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">val</span><span class="p">:</span> <span class="s1">&#39;color: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39;red&#39;</span> <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>          <span class="o">.</span><span class="n">highlight_max</span><span class="p">())</span>
<span class="gp">   ....: </span>

<span class="gp">In [51]: </span><span class="n">styled</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;styled.xlsx&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;openpyxl&#39;</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">51</span><span class="o">-</span><span class="n">dde24f57e06d</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">styled</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s1">&#39;styled.xlsx&#39;</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;openpyxl&#39;</span><span class="p">)</span>

<span class="nn">~/scipy/pandas/pandas/io/formats/style.py</span> in <span class="ni">to_excel</span><span class="nt">(self, excel_writer, sheet_name, na_rep, float_format, columns, header, index, index_label, startrow, startcol, engine, merge_cells, encoding, inf_rep, verbose, freeze_panes)</span>
<span class="g g-Whitespace">    </span><span class="mi">233</span>             <span class="n">startcol</span><span class="o">=</span><span class="n">startcol</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">234</span>             <span class="n">freeze_panes</span><span class="o">=</span><span class="n">freeze_panes</span><span class="p">,</span>
<span class="ne">--&gt; </span><span class="mi">235</span>             <span class="n">engine</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">236</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">237</span> 

<span class="nn">~/scipy/pandas/pandas/io/formats/excel.py</span> in <span class="ni">write</span><span class="nt">(self, writer, sheet_name, startrow, startcol, freeze_panes, engine)</span>
<span class="g g-Whitespace">    </span><span class="mi">724</span>             <span class="n">need_save</span> <span class="o">=</span> <span class="bp">False</span>
<span class="g g-Whitespace">    </span><span class="mi">725</span>         <span class="k">else</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">726</span>             <span class="n">writer</span> <span class="o">=</span> <span class="n">ExcelWriter</span><span class="p">(</span><span class="n">stringify_path</span><span class="p">(</span><span class="n">writer</span><span class="p">),</span> <span class="n">engine</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">727</span>             <span class="n">need_save</span> <span class="o">=</span> <span class="bp">True</span>
<span class="g g-Whitespace">    </span><span class="mi">728</span> 

<span class="nn">~/scipy/pandas/pandas/io/excel/_openpyxl.py</span> in <span class="ni">__init__</span><span class="nt">(self, path, engine, mode, **engine_kwargs)</span>
<span class="g g-Whitespace">     </span><span class="mi">16</span>     <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">engine_kwargs</span><span class="p">):</span>
<span class="g g-Whitespace">     </span><span class="mi">17</span>         <span class="c1"># Use the openpyxl module as the Excel writer.</span>
<span class="ne">---&gt; </span><span class="mi">18</span>         <span class="kn">from</span> <span class="nn">openpyxl.workbook</span> <span class="kn">import</span> <span class="n">Workbook</span>
<span class="g g-Whitespace">     </span><span class="mi">19</span> 
<span class="g g-Whitespace">     </span><span class="mi">20</span>         <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="o">**</span><span class="n">engine_kwargs</span><span class="p">)</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;openpyxl&#39;
</pre></div>
</div>
<img alt="../_images/style-excel1.png" src="../_images/style-excel1.png" />
<p>See the <a class="reference internal" href="../user_guide/style.html#Export-to-Excel"><span class="std std-ref">Style documentation</span></a> for more detail.</p>
</div>
<div class="section" id="intervalindex">
<span id="whatsnew-0200-enhancements-intervalindex"></span><h3>IntervalIndex<a class="headerlink" href="#intervalindex" title="Permalink to this headline">¶</a></h3>
<p>pandas has gained an <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> with its own dtype, <code class="docutils literal notranslate"><span class="pre">interval</span></code> as well as the <code class="docutils literal notranslate"><span class="pre">Interval</span></code> scalar type. These allow first-class support for interval
notation, specifically as a return type for the categories in <code class="xref py py-func docutils literal notranslate"><span class="pre">cut()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">qcut()</span></code>. The <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> allows some unique indexing, see the
<a class="reference internal" href="../user_guide/advanced.html#advanced-intervalindex"><span class="std std-ref">docs</span></a>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7640">GH7640</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8625">GH8625</a>)</p>
<div class="alert alert-warning">
<p class="admonition-title">Warning</p>
<p>These indexing behaviors of the IntervalIndex are provisional and may change in a future version of pandas. Feedback on usage is welcome.</p>
</div>
<p>Previous behavior:</p>
<p>The returned categories were strings, representing Intervals</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">c</span>
<span class="gh">Out[2]:</span>
<span class="go">[(-0.003, 1.5], (-0.003, 1.5], (1.5, 3], (1.5, 3]]</span>
<span class="go">Categories (2, object): [(-0.003, 1.5] &lt; (1.5, 3]]</span>

<span class="gp">In [3]: </span><span class="n">c</span><span class="o">.</span><span class="n">categories</span>
<span class="gh">Out[3]: </span><span class="go">Index([&#39;(-0.003, 1.5]&#39;, &#39;(1.5, 3]&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [52]: </span><span class="n">c</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">bins</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="gp">In [53]: </span><span class="n">c</span>
<span class="gh">Out[53]: </span><span class="go"></span>
<span class="go">[(-0.003, 1.5], (-0.003, 1.5], (1.5, 3.0], (1.5, 3.0]]</span>
<span class="go">Categories (2, interval[float64]): [(-0.003, 1.5] &lt; (1.5, 3.0]]</span>

<span class="gp">In [54]: </span><span class="n">c</span><span class="o">.</span><span class="n">categories</span>
<span class="gh">Out[54]: </span><span class="go"></span>
<span class="go">IntervalIndex([(-0.003, 1.5], (1.5, 3.0]],</span>
<span class="go">              closed=&#39;right&#39;,</span>
<span class="go">              dtype=&#39;interval[float64]&#39;)</span>
</pre></div>
</div>
<p>Furthermore, this allows one to bin <em>other</em> data with these same bins, with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> representing a missing
value similar to other dtypes.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
<span class="gh">Out[55]: </span><span class="go"></span>
<span class="go">[(-0.003, 1.5], (1.5, 3.0], NaN, (-0.003, 1.5]]</span>
<span class="go">Categories (2, interval[float64]): [(-0.003, 1.5] &lt; (1.5, 3.0]]</span>
</pre></div>
</div>
<p>An <code class="docutils literal notranslate"><span class="pre">IntervalIndex</span></code> can also be used in <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> as the index.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [56]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">cut</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>
<span class="gp">   ....: </span>                   <span class="p">})</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>

<span class="gp">In [57]: </span><span class="n">df</span>
<span class="gh">Out[57]: </span><span class="go"></span>
<span class="go">               A</span>
<span class="go">B               </span>
<span class="go">(-0.003, 1.5]  0</span>
<span class="go">(1.5, 3.0]     1</span>
<span class="go">(-0.003, 1.5]  2</span>
<span class="go">(-0.003, 1.5]  3</span>

<span class="go">[4 rows x 1 columns]</span>
</pre></div>
</div>
<p>Selecting via a specific interval:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [58]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">pd</span><span class="o">.</span><span class="n">Interval</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)]</span>
<span class="gh">Out[58]: </span><span class="go"></span>
<span class="go">A    1</span>
<span class="go">Name: (1.5, 3.0], Length: 1, dtype: int64</span>
</pre></div>
</div>
<p>Selecting via a scalar value that is contained <em>in</em> the intervals.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[59]: </span><span class="go"></span>
<span class="go">               A</span>
<span class="go">B               </span>
<span class="go">(-0.003, 1.5]  0</span>
<span class="go">(-0.003, 1.5]  2</span>
<span class="go">(-0.003, 1.5]  3</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="other-enhancements">
<span id="whatsnew-0200-enhancements-other"></span><h3>Other enhancements<a class="headerlink" href="#other-enhancements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.rolling()</span></code> now accepts the parameter <code class="docutils literal notranslate"><span class="pre">closed='right'|'left'|'both'|'neither'</span></code> to choose the rolling window-endpoint closedness. See the <a class="reference internal" href="../user_guide/computation.html#stats-rolling-window-endpoints"><span class="std std-ref">documentation</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13965">GH13965</a>)</p></li>
<li><p>Integration with the <code class="docutils literal notranslate"><span class="pre">feather-format</span></code>, including a new top-level <code class="docutils literal notranslate"><span class="pre">pd.read_feather()</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.to_feather()</span></code> method, see <a class="reference internal" href="../user_guide/io.html#io-feather"><span class="std std-ref">here</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.str.replace()</span></code> now accepts a callable, as replacement, which is passed to <code class="docutils literal notranslate"><span class="pre">re.sub</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15055">GH15055</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.str.replace()</span></code> now accepts a compiled regular expression as a pattern (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15446">GH15446</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.sort_index</span></code> accepts parameters <code class="docutils literal notranslate"><span class="pre">kind</span></code> and <code class="docutils literal notranslate"><span class="pre">na_position</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13589">GH13589</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14444">GH14444</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.groupby()</span></code>  have gained a <code class="docutils literal notranslate"><span class="pre">nunique()</span></code> method to count the distinct values over an axis (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14336">GH14336</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15197">GH15197</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> has gained a <code class="docutils literal notranslate"><span class="pre">melt()</span></code> method, equivalent to <code class="docutils literal notranslate"><span class="pre">pd.melt()</span></code>, for unpivoting from a wide to long format (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12640">GH12640</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_excel()</span></code> now preserves sheet order when using <code class="docutils literal notranslate"><span class="pre">sheetname=None</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9930">GH9930</a>)</p></li>
<li><p>Multiple offset aliases with decimal points are now supported (e.g. <code class="docutils literal notranslate"><span class="pre">0.5min</span></code> is parsed as <code class="docutils literal notranslate"><span class="pre">30s</span></code>) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8419">GH8419</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.isnull()</span></code> and <code class="docutils literal notranslate"><span class="pre">.notnull()</span></code> have been added to <code class="docutils literal notranslate"><span class="pre">Index</span></code> object to make them more consistent with the <code class="docutils literal notranslate"><span class="pre">Series</span></code> API (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15300">GH15300</a>)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">UnsortedIndexError</span></code> (subclass of <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>) raised when indexing/slicing into an
unsorted MultiIndex (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11897">GH11897</a>). This allows differentiation between errors due to lack
of sorting or an incorrect key. See <a class="reference internal" href="../user_guide/advanced.html#advanced-unsorted"><span class="std std-ref">here</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> has gained a <code class="docutils literal notranslate"><span class="pre">.to_frame()</span></code> method to convert to a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12397">GH12397</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.cut</span></code> and <code class="docutils literal notranslate"><span class="pre">pd.qcut</span></code> now support datetime64 and timedelta64 dtypes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14714">GH14714</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14798">GH14798</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.qcut</span></code> has gained the <code class="docutils literal notranslate"><span class="pre">duplicates='raise'|'drop'</span></code> option to control whether to raise on duplicated edges (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7751">GH7751</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> provides a <code class="docutils literal notranslate"><span class="pre">to_excel</span></code> method to output Excel files (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8825">GH8825</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">usecols</span></code> argument in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> now accepts a callable function as a value  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14154">GH14154</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">skiprows</span></code> argument in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> now accepts a callable function as a value  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10882">GH10882</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">nrows</span></code> and <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> arguments in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> are supported if both are passed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6774">GH6774</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15755">GH15755</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.plot</span></code> now prints a title above each subplot if <code class="docutils literal notranslate"><span class="pre">suplots=True</span></code> and <code class="docutils literal notranslate"><span class="pre">title</span></code> is a list of strings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14753">GH14753</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.plot</span></code> can pass the matplotlib 2.0 default color cycle as a single string as color parameter, see <a class="reference external" href="http://matplotlib.org/2.0.0/users/colors.html#cn-color-selection">here</a>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15516">GH15516</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.interpolate()</span></code> now supports timedelta as an index type with <code class="docutils literal notranslate"><span class="pre">method='time'</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6424">GH6424</a>)</p></li>
<li><p>Addition of a <code class="docutils literal notranslate"><span class="pre">level</span></code> keyword to <code class="docutils literal notranslate"><span class="pre">DataFrame/Series.rename</span></code> to rename
labels in the specified level of a MultiIndex (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4160">GH4160</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.reset_index()</span></code> will now interpret a tuple <code class="docutils literal notranslate"><span class="pre">index.name</span></code> as a key spanning across levels of <code class="docutils literal notranslate"><span class="pre">columns</span></code>, if this is a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16164">GH16164</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timedelta.isoformat</span></code> method added for formatting Timedeltas as an <a class="reference external" href="https://en.wikipedia.org/wiki/ISO_8601#Durations">ISO 8601 duration</a>. See the <a class="reference internal" href="../user_guide/timedeltas.html#timedeltas-isoformat"><span class="std std-ref">Timedelta docs</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15136">GH15136</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.select_dtypes()</span></code> now allows the string <code class="docutils literal notranslate"><span class="pre">datetimetz</span></code> to generically select datetimes with tz (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14910">GH14910</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.to_latex()</span></code> method will now accept <code class="docutils literal notranslate"><span class="pre">multicolumn</span></code> and <code class="docutils literal notranslate"><span class="pre">multirow</span></code> arguments to use the accompanying LaTeX enhancements</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.merge_asof()</span></code> gained the option <code class="docutils literal notranslate"><span class="pre">direction='backward'|'forward'|'nearest'</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14887">GH14887</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series/DataFrame.asfreq()</span></code> have gained a <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> parameter, to fill missing values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3715">GH3715</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series/DataFrame.resample.asfreq</span></code> have gained a <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> parameter, to fill missing values during resampling (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3715">GH3715</a>).</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.util.hash_pandas_object()</span></code> has gained the ability to hash a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15224">GH15224</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series/DataFrame.squeeze()</span></code> have gained the <code class="docutils literal notranslate"><span class="pre">axis</span></code> parameter. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15339">GH15339</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_excel()</span></code> has a new <code class="docutils literal notranslate"><span class="pre">freeze_panes</span></code> parameter to turn on Freeze Panes when exporting to Excel (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15160">GH15160</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_html()</span></code> will parse multiple header rows, creating a MultiIndex header. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13434">GH13434</a>).</p></li>
<li><p>HTML table output skips <code class="docutils literal notranslate"><span class="pre">colspan</span></code> or <code class="docutils literal notranslate"><span class="pre">rowspan</span></code> attribute if equal to 1. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15403">GH15403</a>)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">pandas.io.formats.style.Styler</span></code> template now has blocks for easier extension, see the <a class="reference internal" href="../user_guide/style.html#Subclassing"><span class="std std-ref">example notebook</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15649">GH15649</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Styler.render()</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> to allow user-defined variables in the template (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15649">GH15649</a>)</p></li>
<li><p>Compatibility with Jupyter notebook 5.0; MultiIndex column labels are left-aligned and MultiIndex row-labels are top-aligned (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15379">GH15379</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> now has a custom date-tick formatter specifically designed for nanosecond level precision (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8711">GH8711</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.api.types.union_categoricals</span></code> gained the <code class="docutils literal notranslate"><span class="pre">ignore_ordered</span></code> argument to allow ignoring the ordered attribute of unioned categoricals (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13410">GH13410</a>). See the <a class="reference internal" href="../user_guide/categorical.html#categorical-union"><span class="std std-ref">categorical union docs</span></a> for more information.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.to_string()</span></code> now allow optional header aliases. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15536">GH15536</a>)</p></li>
<li><p>Re-enable the <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> keyword of <code class="docutils literal notranslate"><span class="pre">pd.read_excel()</span></code> to parse string columns as dates (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14326">GH14326</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">.empty</span></code> property to subclasses of <code class="docutils literal notranslate"><span class="pre">Index</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15270">GH15270</a>)</p></li>
<li><p>Enabled floor division for <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> and <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15828">GH15828</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.io.json.json_normalize()</span></code> gained the option <code class="docutils literal notranslate"><span class="pre">errors='ignore'|'raise'</span></code>; the default is <code class="docutils literal notranslate"><span class="pre">errors='raise'</span></code> which is backward compatible. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14583">GH14583</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.io.json.json_normalize()</span></code> with an empty <code class="docutils literal notranslate"><span class="pre">list</span></code> will return an empty <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15534">GH15534</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.io.json.json_normalize()</span></code> has gained a <code class="docutils literal notranslate"><span class="pre">sep</span></code> option that accepts <code class="docutils literal notranslate"><span class="pre">str</span></code> to separate joined fields; the default is “.”, which is backward compatible. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14883">GH14883</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">MultiIndex.remove_unused_levels()</span></code> has been added to facilitate <a class="reference internal" href="../user_guide/advanced.html#advanced-shown-levels"><span class="std std-ref">removing unused levels</span></a>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15694">GH15694</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> will now raise a <code class="docutils literal notranslate"><span class="pre">ParserError</span></code> error whenever any parsing error occurs (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15913">GH15913</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15925">GH15925</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> now supports the <code class="docutils literal notranslate"><span class="pre">error_bad_lines</span></code> and <code class="docutils literal notranslate"><span class="pre">warn_bad_lines</span></code> arguments for the Python parser (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15925">GH15925</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">display.show_dimensions</span></code> option can now also be used to specify
whether the length of a <code class="docutils literal notranslate"><span class="pre">Series</span></code> should be shown in its repr (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7117">GH7117</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parallel_coordinates()</span></code> has gained a <code class="docutils literal notranslate"><span class="pre">sort_labels</span></code> keyword argument that sorts class labels and the colors assigned to them (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15908">GH15908</a>)</p></li>
<li><p>Options added to allow one to turn on/off using <code class="docutils literal notranslate"><span class="pre">bottleneck</span></code> and <code class="docutils literal notranslate"><span class="pre">numexpr</span></code>, see <a class="reference internal" href="../getting_started/basics.html#basics-accelerate"><span class="std std-ref">here</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16157">GH16157</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.style.bar()</span></code> now accepts two more options to further customize the bar chart. Bar alignment is set with <code class="docutils literal notranslate"><span class="pre">align='left'|'mid'|'zero'</span></code>, the default is “left”, which is backward compatible; You can now pass a list of <code class="docutils literal notranslate"><span class="pre">color=[color_negative,</span> <span class="pre">color_positive]</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14757">GH14757</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="backwards-incompatible-api-changes">
<span id="whatsnew-0200-api-breaking"></span><h2>Backwards incompatible API changes<a class="headerlink" href="#backwards-incompatible-api-changes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="possible-incompatibility-for-hdf5-formats-created-with-pandas-0-13-0">
<span id="whatsnew-api-breaking-io-compat"></span><h3>Possible incompatibility for HDF5 formats created with pandas &lt; 0.13.0<a class="headerlink" href="#possible-incompatibility-for-hdf5-formats-created-with-pandas-0-13-0" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pd.TimeSeries</span></code> was deprecated officially in 0.17.0, though has already been an alias since 0.13.0. It has
been dropped in favor of <code class="docutils literal notranslate"><span class="pre">pd.Series</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15098">GH15098</a>).</p>
<p>This <em>may</em> cause HDF5 files that were created in prior versions to become unreadable if <code class="docutils literal notranslate"><span class="pre">pd.TimeSeries</span></code>
was used. This is most likely to be for pandas &lt; 0.13.0. If you find yourself in this situation.
You can use a recent prior version of pandas to read in your HDF5 files,
then write them out again after applying the procedure below.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">TimeSeries</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span>

<span class="gp">In [3]: </span><span class="n">s</span>
<span class="gh">Out[3]:</span>
<span class="go">2013-01-01    1</span>
<span class="go">2013-01-02    2</span>
<span class="go">2013-01-03    3</span>
<span class="go">Freq: D, dtype: int64</span>

<span class="gp">In [4]: </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">pandas.core.series.TimeSeries</span>

<span class="gp">In [5]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="gp">In [6]: </span><span class="n">s</span>
<span class="gh">Out[6]:</span>
<span class="go">2013-01-01    1</span>
<span class="go">2013-01-02    2</span>
<span class="go">2013-01-03    3</span>
<span class="go">Freq: D, dtype: int64</span>

<span class="gp">In [7]: </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="gh">Out[7]: </span><span class="go">pandas.core.series.Series</span>
</pre></div>
</div>
</div>
<div class="section" id="map-on-index-types-now-return-other-index-types">
<span id="whatsnew-0200-api-breaking-index-map"></span><h3>Map on Index types now return other Index types<a class="headerlink" href="#map-on-index-types-now-return-other-index-types" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">map</span></code> on an <code class="docutils literal notranslate"><span class="pre">Index</span></code> now returns an <code class="docutils literal notranslate"><span class="pre">Index</span></code>, not a numpy array (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12766">GH12766</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [60]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>

<span class="gp">In [61]: </span><span class="n">idx</span>
<span class="gh">Out[61]: </span><span class="go">Int64Index([1, 2], dtype=&#39;int64&#39;)</span>

<span class="gp">In [62]: </span><span class="n">mi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span>

<span class="gp">In [63]: </span><span class="n">mi</span>
<span class="gh">Out[63]: </span><span class="go"></span>
<span class="go">MultiIndex([(1, 2),</span>
<span class="go">            (2, 4)],</span>
<span class="go">           )</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[5]: </span><span class="go">array([2, 4])</span>

<span class="gp">In [6]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
<span class="gh">Out[6]: </span><span class="go">array([(1, 2), (2, 4)], dtype=object)</span>

<span class="gp">In [7]: </span><span class="n">mi</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
<span class="gh">Out[7]: </span><span class="go">array([(1, 2), (2, 4)], dtype=object)</span>

<span class="gp">In [8]: </span><span class="n">mi</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[8]: </span><span class="go">array([1, 2])</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [64]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gh">Out[64]: </span><span class="go">Int64Index([2, 4], dtype=&#39;int64&#39;)</span>

<span class="gp">In [65]: </span><span class="n">idx</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">))</span>
<span class="gh">Out[65]: </span><span class="go"></span>
<span class="go">MultiIndex([(1, 2),</span>
<span class="go">            (2, 4)],</span>
<span class="go">           )</span>

<span class="gp">In [66]: </span><span class="n">mi</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">)</span>
<span class="gh">Out[66]: </span><span class="go"></span>
<span class="go">MultiIndex([(1, 2),</span>
<span class="go">            (2, 4)],</span>
<span class="go">           )</span>

<span class="gp">In [67]: </span><span class="n">mi</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[67]: </span><span class="go">Int64Index([1, 2], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">map</span></code> on a <code class="docutils literal notranslate"><span class="pre">Series</span></code> with <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> values may return <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtypes rather than <code class="docutils literal notranslate"><span class="pre">int32</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [68]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2011-01-02T00:00&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-01-02T02:00&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;H&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>              <span class="o">.</span><span class="n">tz_localize</span><span class="p">(</span><span class="s1">&#39;Asia/Tokyo&#39;</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [69]: </span><span class="n">s</span>
<span class="gh">Out[69]: </span><span class="go"></span>
<span class="go">0   2011-01-02 00:00:00+09:00</span>
<span class="go">1   2011-01-02 01:00:00+09:00</span>
<span class="go">2   2011-01-02 02:00:00+09:00</span>
<span class="go">Length: 3, dtype: datetime64[ns, Asia/Tokyo]</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
<span class="gh">Out[9]:</span>
<span class="go">0    0</span>
<span class="go">1    1</span>
<span class="go">2    2</span>
<span class="go">dtype: int32</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [70]: </span><span class="n">s</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">hour</span><span class="p">)</span>
<span class="gh">Out[70]: </span><span class="go"></span>
<span class="go">0    0</span>
<span class="go">1    1</span>
<span class="go">2    2</span>
<span class="go">Length: 3, dtype: int64</span>
</pre></div>
</div>
</div>
<div class="section" id="accessing-datetime-fields-of-index-now-return-index">
<span id="whatsnew-0200-api-breaking-index-dt-field"></span><h3>Accessing datetime fields of Index now return Index<a class="headerlink" href="#accessing-datetime-fields-of-index-now-return-index" title="Permalink to this headline">¶</a></h3>
<p>The datetime-related attributes (see <a class="reference internal" href="../user_guide/timeseries.html#timeseries-components"><span class="std std-ref">here</span></a>
for an overview) of <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>, <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> previously
returned numpy arrays. They will now return a new <code class="docutils literal notranslate"><span class="pre">Index</span></code> object, except
in the case of a boolean field, where the result will still be a boolean ndarray. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15022">GH15022</a>)</p>
<p>Previous behaviour:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2015-01-01&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;10H&#39;</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">idx</span><span class="o">.</span><span class="n">hour</span>
<span class="gh">Out[2]: </span><span class="go">array([ 0, 10, 20,  6, 16], dtype=int32)</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [71]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s2">&quot;2015-01-01&quot;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;10H&#39;</span><span class="p">)</span>

<span class="gp">In [72]: </span><span class="n">idx</span><span class="o">.</span><span class="n">hour</span>
<span class="gh">Out[72]: </span><span class="go">Int64Index([0, 10, 20, 6, 16], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
<p>This has the advantage that specific <code class="docutils literal notranslate"><span class="pre">Index</span></code> methods are still available on the
result. On the other hand, this might have backward incompatibilities: e.g.
compared to numpy arrays, <code class="docutils literal notranslate"><span class="pre">Index</span></code> objects are not mutable. To get the original
ndarray, you can always convert explicitly using <code class="docutils literal notranslate"><span class="pre">np.asarray(idx.hour)</span></code>.</p>
</div>
<div class="section" id="pd-unique-will-now-be-consistent-with-extension-types">
<span id="whatsnew-0200-api-breaking-unique"></span><h3>pd.unique will now be consistent with extension types<a class="headerlink" href="#pd-unique-will-now-be-consistent-with-extension-types" title="Permalink to this headline">¶</a></h3>
<p>In prior versions, using <code class="xref py py-meth docutils literal notranslate"><span class="pre">Series.unique()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.unique()</span></code> on <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> and tz-aware
data-types would yield different return types. These are now made consistent. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15903">GH15903</a>)</p>
<ul>
<li><p>Datetime tz-aware</p>
<p>Previous behaviour:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Series</span>
<span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">),</span>
<span class="gp">   ...: </span>           <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[5]: </span><span class="go">array([Timestamp(&#39;2016-01-01 00:00:00-0500&#39;, tz=&#39;US/Eastern&#39;)], dtype=object)</span>

<span class="gp">In [6]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">),</span>
<span class="gp">   ...: </span>                     <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)]))</span>
<span class="gh">Out[6]: </span><span class="go">array([&#39;2016-01-01T05:00:00.000000000&#39;], dtype=&#39;datetime64[ns]&#39;)</span>

<span class="go"># Index</span>
<span class="gp">In [7]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">),</span>
<span class="gp">   ...: </span>          <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[7]: </span><span class="go">DatetimeIndex([&#39;2016-01-01 00:00:00-05:00&#39;], dtype=&#39;datetime64[ns, US/Eastern]&#39;, freq=None)</span>

<span class="gp">In [8]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">),</span>
<span class="gp">   ...: </span>           <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)])</span>
<span class="gh">Out[8]: </span><span class="go">array([&#39;2016-01-01T05:00:00.000000000&#39;], dtype=&#39;datetime64[ns]&#39;)</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># Series, returns an array of Timestamp tz-aware</span>
<span class="gp">In [73]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>           <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gp">   ....: </span>
<span class="gh">Out[73]: </span><span class="go"></span>
<span class="go">&lt;DatetimeArray&gt;</span>
<span class="go">[&#39;2016-01-01 00:00:00-05:00&#39;]</span>
<span class="go">Length: 1, dtype: datetime64[ns, US/Eastern]</span>

<span class="gp">In [74]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>          <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)]))</span>
<span class="gp">   ....: </span>
<span class="gh">Out[74]: </span><span class="go"></span>
<span class="go">&lt;DatetimeArray&gt;</span>
<span class="go">[&#39;2016-01-01 00:00:00-05:00&#39;]</span>
<span class="go">Length: 1, dtype: datetime64[ns, US/Eastern]</span>

<span class="go"># Index, returns a DatetimeIndex</span>
<span class="gp">In [75]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>          <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gp">   ....: </span>
<span class="gh">Out[75]: </span><span class="go">DatetimeIndex([&#39;2016-01-01 00:00:00-05:00&#39;], dtype=&#39;datetime64[ns, US/Eastern]&#39;, freq=None)</span>

<span class="gp">In [76]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                    <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;US/Eastern&#39;</span><span class="p">)]))</span>
<span class="gp">   ....: </span>
<span class="gh">Out[76]: </span><span class="go">DatetimeIndex([&#39;2016-01-01 00:00:00-05:00&#39;], dtype=&#39;datetime64[ns, US/Eastern]&#39;, freq=None)</span>
</pre></div>
</div>
</li>
<li><p>Categoricals</p>
<p>Previous behaviour:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;baabc&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[1]:</span>
<span class="go">[b, a, c]</span>
<span class="go">Categories (3, object): [b, a, c]</span>

<span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;baabc&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">))</span>
<span class="gh">Out[2]: </span><span class="go">array([&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], dtype=object)</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go"># returns a Categorical</span>
<span class="gp">In [77]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;baabc&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[77]: </span><span class="go"></span>
<span class="go">[b, a, c]</span>
<span class="go">Categories (3, object): [b, a, c]</span>

<span class="gp">In [78]: </span><span class="n">pd</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;baabc&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">))</span>
<span class="gh">Out[78]: </span><span class="go"></span>
<span class="go">[b, a, c]</span>
<span class="go">Categories (3, object): [b, a, c]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="s3-file-handling">
<span id="whatsnew-0200-api-breaking-s3"></span><h3>S3 file handling<a class="headerlink" href="#s3-file-handling" title="Permalink to this headline">¶</a></h3>
<p>pandas now uses <a class="reference external" href="http://s3fs.readthedocs.io/">s3fs</a> for handling S3 connections. This shouldn’t break
any code. However, since <code class="docutils literal notranslate"><span class="pre">s3fs</span></code> is not a required dependency, you will need to install it separately, like <code class="docutils literal notranslate"><span class="pre">boto</span></code>
in prior versions of pandas. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11915">GH11915</a>).</p>
</div>
<div class="section" id="partial-string-indexing-changes">
<span id="whatsnew-0200-api-breaking-partial-string-indexing"></span><h3>Partial string indexing changes<a class="headerlink" href="#partial-string-indexing-changes" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../user_guide/timeseries.html#timeseries-partialindexing"><span class="std std-ref">DatetimeIndex Partial String Indexing</span></a> now works as an exact match, provided that string resolution coincides with index resolution, including a case when both are seconds (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14826">GH14826</a>). See <a class="reference internal" href="../user_guide/timeseries.html#timeseries-slice-vs-exact-match"><span class="std std-ref">Slice vs. Exact Match</span></a> for details.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [79]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]},</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2011-12-31 23:59:59&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                      <span class="s1">&#39;2012-01-01 00:00:00&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                      <span class="s1">&#39;2012-01-01 00:00:01&#39;</span><span class="p">]))</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;2011-12-31 23:59:59&#39;</span><span class="p">]</span>
<span class="gh">Out[4]:</span>
<span class="go">                       a</span>
<span class="go">2011-12-31 23:59:59  1</span>

<span class="gp">In [5]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;2011-12-31 23:59:59&#39;</span><span class="p">]</span>
<span class="gh">Out[5]:</span>
<span class="go">2011-12-31 23:59:59    1</span>
<span class="go">Name: a, dtype: int64</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;2011-12-31 23:59:59&#39;</span><span class="p">]</span>
<span class="go">KeyError: &#39;2011-12-31 23:59:59&#39;</span>

<span class="gp">In [5]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">][</span><span class="s1">&#39;2011-12-31 23:59:59&#39;</span><span class="p">]</span>
<span class="gh">Out[5]: </span><span class="go">1</span>
</pre></div>
</div>
</div>
<div class="section" id="concat-of-different-float-dtypes-will-not-automatically-upcast">
<span id="whatsnew-0200-api-breaking-concat-dtypes"></span><h3>Concat of different float dtypes will not automatically upcast<a class="headerlink" href="#concat-of-different-float-dtypes-will-not-automatically-upcast" title="Permalink to this headline">¶</a></h3>
<p>Previously, <code class="docutils literal notranslate"><span class="pre">concat</span></code> of multiple objects with different <code class="docutils literal notranslate"><span class="pre">float</span></code> dtypes would automatically upcast results to a dtype of <code class="docutils literal notranslate"><span class="pre">float64</span></code>.
Now the smallest acceptable dtype will be used (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13247">GH13247</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [80]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">1.0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

<span class="gp">In [81]: </span><span class="n">df1</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[81]: </span><span class="go"></span>
<span class="go">0    float32</span>
<span class="go">Length: 1, dtype: object</span>

<span class="gp">In [82]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">,</span> <span class="n">ndmin</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>

<span class="gp">In [83]: </span><span class="n">df2</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[83]: </span><span class="go"></span>
<span class="go">0    float32</span>
<span class="go">Length: 1, dtype: object</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[7]:</span>
<span class="go">0    float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [84]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">])</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[84]: </span><span class="go"></span>
<span class="go">0    float32</span>
<span class="go">Length: 1, dtype: object</span>
</pre></div>
</div>
</div>
<div class="section" id="pandas-google-bigquery-support-has-moved">
<span id="whatsnew-0200-api-breaking-gbq"></span><h3>Pandas Google BigQuery support has moved<a class="headerlink" href="#pandas-google-bigquery-support-has-moved" title="Permalink to this headline">¶</a></h3>
<p>pandas has split off Google BigQuery support into a separate package <code class="docutils literal notranslate"><span class="pre">pandas-gbq</span></code>. You can <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">pandas-gbq</span> <span class="pre">-c</span> <span class="pre">conda-forge</span></code> or
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pandas-gbq</span></code> to get it. The functionality of <code class="xref py py-func docutils literal notranslate"><span class="pre">read_gbq()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.to_gbq()</span></code> remain the same with the
currently released version of <code class="docutils literal notranslate"><span class="pre">pandas-gbq=0.1.4</span></code>. Documentation is now hosted <a class="reference external" href="https://pandas-gbq.readthedocs.io/">here</a>  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15347">GH15347</a>)</p>
</div>
<div class="section" id="memory-usage-for-index-is-more-accurate">
<span id="whatsnew-0200-api-breaking-memory-usage"></span><h3>Memory usage for Index is more accurate<a class="headerlink" href="#memory-usage-for-index-is-more-accurate" title="Permalink to this headline">¶</a></h3>
<p>In previous versions, showing <code class="docutils literal notranslate"><span class="pre">.memory_usage()</span></code> on a pandas structure that has an index, would only include actual index values and not include structures that facilitated fast indexing. This will generally be different for <code class="docutils literal notranslate"><span class="pre">Index</span></code> and <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> and less-so for other index types. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15237">GH15237</a>)</p>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">])</span>

<span class="gp">In [9]: </span><span class="n">index</span><span class="o">.</span><span class="n">memory_usage</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gh">Out[9]: </span><span class="go">180</span>

<span class="gp">In [10]: </span><span class="n">index</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">0</span>

<span class="gp">In [11]: </span><span class="n">index</span><span class="o">.</span><span class="n">memory_usage</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gh">Out[11]: </span><span class="go">180</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">index</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">])</span>

<span class="gp">In [9]: </span><span class="n">index</span><span class="o">.</span><span class="n">memory_usage</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gh">Out[9]: </span><span class="go">180</span>

<span class="gp">In [10]: </span><span class="n">index</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">0</span>

<span class="gp">In [11]: </span><span class="n">index</span><span class="o">.</span><span class="n">memory_usage</span><span class="p">(</span><span class="n">deep</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gh">Out[11]: </span><span class="go">260</span>
</pre></div>
</div>
</div>
<div class="section" id="dataframe-sort-index-changes">
<span id="whatsnew-0200-api-breaking-sort-index"></span><h3>DataFrame.sort_index changes<a class="headerlink" href="#dataframe-sort-index-changes" title="Permalink to this headline">¶</a></h3>
<p>In certain cases, calling <code class="docutils literal notranslate"><span class="pre">.sort_index()</span></code> on a MultiIndexed DataFrame would return the <em>same</em> DataFrame without seeming to sort.
This would happen with a <code class="docutils literal notranslate"><span class="pre">lexsorted</span></code>, but non-monotonic levels. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15622">GH15622</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15687">GH15687</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14015">GH14015</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13431">GH13431</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15797">GH15797</a>)</p>
<p>This is <em>unchanged</em> from prior versions, but shown for illustration purposes:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [85]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">],</span>
<span class="gp">   ....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_product</span><span class="p">([</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;BA&#39;</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]))</span>
<span class="gp">   ....: </span>

<span class="gp">In [86]: </span><span class="n">df</span>
<span class="gh">Out[86]: </span><span class="go"></span>
<span class="go">     value</span>
<span class="go">B 0      0</span>
<span class="go">  1      1</span>
<span class="go">  2      2</span>
<span class="go">A 0      3</span>
<span class="go">  1      4</span>
<span class="go">  2      5</span>

<span class="go">[6 rows x 1 columns]</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [87]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_lexsorted</span><span class="p">()</span>
<span class="gh">Out[87]: </span><span class="go">False</span>

<span class="gp">In [88]: </span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_monotonic</span>
<span class="gh">Out[88]: </span><span class="go">False</span>
</pre></div>
</div>
<p>Sorting works as expected</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [89]: </span><span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="gh">Out[89]: </span><span class="go"></span>
<span class="go">     value</span>
<span class="go">A 0      3</span>
<span class="go">  1      4</span>
<span class="go">  2      5</span>
<span class="go">B 0      0</span>
<span class="go">  1      1</span>
<span class="go">  2      2</span>

<span class="go">[6 rows x 1 columns]</span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [90]: </span><span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_lexsorted</span><span class="p">()</span>
<span class="gh">Out[90]: </span><span class="go">True</span>

<span class="gp">In [91]: </span><span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_monotonic</span>
<span class="gh">Out[91]: </span><span class="go">True</span>
</pre></div>
</div>
<p>However, this example, which has a non-monotonic 2nd level,
doesn’t behave as desired.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [92]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]},</span>
<span class="gp">   ....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="p">([[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;bb&#39;</span><span class="p">,</span> <span class="s1">&#39;aa&#39;</span><span class="p">]],</span>
<span class="gp">   ....: </span>                                      <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]))</span>
<span class="gp">   ....: </span>

<span class="gp">In [93]: </span><span class="n">df</span>
<span class="gh">Out[93]: </span><span class="go"></span>
<span class="go">      value</span>
<span class="go">a bb      1</span>
<span class="go">  aa      2</span>
<span class="go">b bb      3</span>
<span class="go">  aa      4</span>

<span class="go">[4 rows x 1 columns]</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">11</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">11</span><span class="p">]:</span>
      <span class="n">value</span>
<span class="n">a</span> <span class="n">bb</span>      <span class="mi">1</span>
  <span class="n">aa</span>      <span class="mi">2</span>
<span class="n">b</span> <span class="n">bb</span>      <span class="mi">3</span>
  <span class="n">aa</span>      <span class="mi">4</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_lexsorted</span><span class="p">()</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">14</span><span class="p">]:</span> <span class="bp">True</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_monotonic</span>
<span class="n">Out</span><span class="p">[</span><span class="mi">15</span><span class="p">]:</span> <span class="bp">False</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [94]: </span><span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span>
<span class="gh">Out[94]: </span><span class="go"></span>
<span class="go">      value</span>
<span class="go">a aa      2</span>
<span class="go">  bb      1</span>
<span class="go">b aa      4</span>
<span class="go">  bb      3</span>

<span class="go">[4 rows x 1 columns]</span>

<span class="gp">In [95]: </span><span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_lexsorted</span><span class="p">()</span>
<span class="gh">Out[95]: </span><span class="go">True</span>

<span class="gp">In [96]: </span><span class="n">df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">is_monotonic</span>
<span class="gh">Out[96]: </span><span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="groupby-describe-formatting">
<span id="whatsnew-0200-api-breaking-groupby-describe"></span><h3>Groupby describe formatting<a class="headerlink" href="#groupby-describe-formatting" title="Permalink to this headline">¶</a></h3>
<p>The output formatting of <code class="docutils literal notranslate"><span class="pre">groupby.describe()</span></code> now labels the <code class="docutils literal notranslate"><span class="pre">describe()</span></code> metrics in the columns instead of the index.
This format is consistent with <code class="docutils literal notranslate"><span class="pre">groupby.agg()</span></code> when applying multiple functions at once. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4792">GH4792</a>)</p>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="gh">Out[2]:</span>
<span class="go">                B</span>
<span class="go">A</span>
<span class="go">1 count  2.000000</span>
<span class="go">  mean   1.500000</span>
<span class="go">  std    0.707107</span>
<span class="go">  min    1.000000</span>
<span class="go">  25%    1.250000</span>
<span class="go">  50%    1.500000</span>
<span class="go">  75%    1.750000</span>
<span class="go">  max    2.000000</span>
<span class="go">2 count  2.000000</span>
<span class="go">  mean   3.500000</span>
<span class="go">  std    0.707107</span>
<span class="go">  min    3.000000</span>
<span class="go">  25%    3.250000</span>
<span class="go">  50%    3.500000</span>
<span class="go">  75%    3.750000</span>
<span class="go">  max    4.000000</span>

<span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">])</span>
<span class="gh">Out[3]:</span>
<span class="go">     B</span>
<span class="go">  mean       std amin amax</span>
<span class="go">A</span>
<span class="go">1  1.5  0.707107    1    2</span>
<span class="go">2  3.5  0.707107    3    4</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [97]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]})</span>

<span class="gp">In [98]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
<span class="gh">Out[98]: </span><span class="go"></span>
<span class="go">      B                                          </span>
<span class="go">  count mean       std  min   25%  50%   75%  max</span>
<span class="go">A                                                </span>
<span class="go">1   2.0  1.5  0.707107  1.0  1.25  1.5  1.75  2.0</span>
<span class="go">2   2.0  3.5  0.707107  3.0  3.25  3.5  3.75  4.0</span>

<span class="go">[2 rows x 8 columns]</span>

<span class="gp">In [99]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">])</span>
<span class="gh">Out[99]: </span><span class="go"></span>
<span class="go">     B                    </span>
<span class="go">  mean       std amin amax</span>
<span class="go">A                         </span>
<span class="go">1  1.5  0.707107    1    2</span>
<span class="go">2  3.5  0.707107    3    4</span>

<span class="go">[2 rows x 4 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="window-binary-corr-cov-operations-return-a-multiindex-dataframe">
<span id="whatsnew-0200-api-breaking-rolling-pairwise"></span><h3>Window binary corr/cov operations return a MultiIndex DataFrame<a class="headerlink" href="#window-binary-corr-cov-operations-return-a-multiindex-dataframe" title="Permalink to this headline">¶</a></h3>
<p>A binary window operation, like <code class="docutils literal notranslate"><span class="pre">.corr()</span></code> or <code class="docutils literal notranslate"><span class="pre">.cov()</span></code>, when operating on a <code class="docutils literal notranslate"><span class="pre">.rolling(..)</span></code>, <code class="docutils literal notranslate"><span class="pre">.expanding(..)</span></code>, or <code class="docutils literal notranslate"><span class="pre">.ewm(..)</span></code> object,
will now return a 2-level <code class="docutils literal notranslate"><span class="pre">MultiIndexed</span> <span class="pre">DataFrame</span></code> rather than a <code class="docutils literal notranslate"><span class="pre">Panel</span></code>, as <code class="docutils literal notranslate"><span class="pre">Panel</span></code> is now deprecated,
see <a class="reference internal" href="#whatsnew-0200-api-breaking-deprecate-panel"><span class="std std-ref">here</span></a>. These are equivalent in function,
but a MultiIndexed <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> enjoys more support in pandas.
See the section on <a class="reference internal" href="../user_guide/computation.html#stats-moments-binary"><span class="std std-ref">Windowed Binary Operations</span></a> for more information. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15677">GH15677</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [100]: </span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">)</span>

<span class="gp">In [101]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="gp">   .....: </span>                  <span class="n">columns</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">),</span>
<span class="gp">   .....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20160101&#39;</span><span class="p">,</span>
<span class="gp">   .....: </span>                                      <span class="n">periods</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">))</span>
<span class="gp">   .....: </span>

<span class="gp">In [102]: </span><span class="n">df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
<span class="gh">Out[102]: </span><span class="go"></span>
<span class="go">bar                A         B</span>
<span class="go">foo                           </span>
<span class="go">2016-04-05  0.640880  0.126205</span>
<span class="go">2016-04-06  0.171465  0.737086</span>
<span class="go">2016-04-07  0.127029  0.369650</span>
<span class="go">2016-04-08  0.604334  0.103104</span>
<span class="go">2016-04-09  0.802374  0.945553</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="gh">Out[2]:</span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 100 (items) x 2 (major_axis) x 2 (minor_axis)</span>
<span class="go">Items axis: 2016-01-01 00:00:00 to 2016-04-09 00:00:00</span>
<span class="go">Major_axis axis: A to B</span>
<span class="go">Minor_axis axis: A to B</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [103]: </span><span class="n">res</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>

<span class="gp">In [104]: </span><span class="n">res</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
<span class="gh">Out[104]: </span><span class="go"></span>
<span class="go">bar                    A         B</span>
<span class="go">foo        bar                    </span>
<span class="go">2016-04-07 B   -0.132090  1.000000</span>
<span class="go">2016-04-08 A    1.000000 -0.145775</span>
<span class="go">           B   -0.145775  1.000000</span>
<span class="go">2016-04-09 A    1.000000  0.119645</span>
<span class="go">           B    0.119645  1.000000</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>Retrieving a correlation matrix for a cross-section</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [105]: </span><span class="n">df</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;2016-04-07&#39;</span><span class="p">]</span>
<span class="gh">Out[105]: </span><span class="go"></span>
<span class="go">bar                   A        B</span>
<span class="go">foo        bar                  </span>
<span class="go">2016-04-07 A    1.00000 -0.13209</span>
<span class="go">           B   -0.13209  1.00000</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="hdfstore-where-string-comparison">
<span id="whatsnew-0200-api-breaking-hdfstore-where"></span><h3>HDFStore where string comparison<a class="headerlink" href="#hdfstore-where-string-comparison" title="Permalink to this headline">¶</a></h3>
<p>In previous versions most types could be compared to string column in a <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code>
usually resulting in an invalid comparison, returning an empty result frame. These comparisons will now raise a
<code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15492">GH15492</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [106]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;unparsed_date&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;2014-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2014-01-01&#39;</span><span class="p">]})</span>

<span class="gp">In [107]: </span><span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;store.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ImportError</span><span class="g g-Whitespace">                               </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">107</span><span class="o">-</span><span class="n">d5e7492e83ea</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span><span class="o">.</span><span class="n">to_hdf</span><span class="p">(</span><span class="s1">&#39;store.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">,</span> <span class="n">data_columns</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="nn">~/scipy/pandas/pandas/core/generic.py</span> in <span class="ni">to_hdf</span><span class="nt">(self, path_or_buf, key, mode, complevel, complib, append, format, index, min_itemsize, nan_rep, dropna, data_columns, errors, encoding)</span>
<span class="g g-Whitespace">   </span><span class="mi">2468</span>             <span class="n">data_columns</span><span class="o">=</span><span class="n">data_columns</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2469</span>             <span class="n">errors</span><span class="o">=</span><span class="n">errors</span><span class="p">,</span>
<span class="ne">-&gt; </span><span class="mi">2470</span>             <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">2471</span>         <span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2472</span> 

<span class="nn">~/scipy/pandas/pandas/io/pytables.py</span> in <span class="ni">to_hdf</span><span class="nt">(path_or_buf, key, value, mode, complevel, complib, append, format, index, min_itemsize, nan_rep, dropna, data_columns, errors, encoding)</span>
<span class="g g-Whitespace">    </span><span class="mi">278</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path_or_buf</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">279</span>         <span class="k">with</span> <span class="n">HDFStore</span><span class="p">(</span>
<span class="ne">--&gt; </span><span class="mi">280</span>             <span class="n">path_or_buf</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">complevel</span><span class="o">=</span><span class="n">complevel</span><span class="p">,</span> <span class="n">complib</span><span class="o">=</span><span class="n">complib</span>
<span class="g g-Whitespace">    </span><span class="mi">281</span>         <span class="p">)</span> <span class="k">as</span> <span class="n">store</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">282</span>             <span class="n">f</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>

<span class="nn">~/scipy/pandas/pandas/io/pytables.py</span> in <span class="ni">__init__</span><span class="nt">(self, path, mode, complevel, complib, fletcher32, **kwargs)</span>
<span class="g g-Whitespace">    </span><span class="mi">516</span>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;format is not a defined argument for HDFStore&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">517</span> 
<span class="ne">--&gt; </span><span class="mi">518</span>         <span class="n">tables</span> <span class="o">=</span> <span class="n">import_optional_dependency</span><span class="p">(</span><span class="s2">&quot;tables&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">519</span> 
<span class="g g-Whitespace">    </span><span class="mi">520</span>         <span class="k">if</span> <span class="n">complib</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">complib</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">tables</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">all_complibs</span><span class="p">:</span>

<span class="nn">~/scipy/pandas/pandas/compat/_optional.py</span> in <span class="ni">import_optional_dependency</span><span class="nt">(name, extra, raise_on_missing, on_version)</span>
<span class="g g-Whitespace">     </span><span class="mi">89</span>     <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">90</span>         <span class="k">if</span> <span class="n">raise_on_missing</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">91</span>             <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="kn">from</span> <span class="bp">None</span>
<span class="g g-Whitespace">     </span><span class="mi">92</span>         <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">93</span>             <span class="k">return</span> <span class="bp">None</span>

<span class="ne">ImportError</span>: Missing optional dependency &#39;tables&#39;.  Use pip or conda to install tables.

<span class="gp">In [108]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[108]: </span><span class="go"></span>
<span class="go">unparsed_date    object</span>
<span class="go">Length: 1, dtype: object</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;store.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;unparsed_date &gt; ts&#39;</span><span class="p">)</span>
<span class="go">File &quot;&lt;string&gt;&quot;, line 1</span>
<span class="go">  (unparsed_date &gt; 1970-01-01 00:00:01.388552400)</span>
<span class="go">                        ^</span>
<span class="go">SyntaxError: invalid token</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2014-01-01&#39;</span><span class="p">)</span>

<span class="gp">In [19]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_hdf</span><span class="p">(</span><span class="s1">&#39;store.h5&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;unparsed_date &gt; ts&#39;</span><span class="p">)</span>
<span class="go">TypeError: Cannot compare 2014-01-01 00:00:00 of</span>
<span class="go">type &lt;class &#39;pandas.tslib.Timestamp&#39;&gt; to string column</span>
</pre></div>
</div>
</div>
<div class="section" id="index-intersection-and-inner-join-now-preserve-the-order-of-the-left-index">
<span id="whatsnew-0200-api-breaking-index-order"></span><h3>Index.intersection and inner join now preserve the order of the left Index<a class="headerlink" href="#index-intersection-and-inner-join-now-preserve-the-order-of-the-left-index" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Index.intersection()</span></code> now preserves the order of the calling <code class="docutils literal notranslate"><span class="pre">Index</span></code> (left)
instead of the other <code class="docutils literal notranslate"><span class="pre">Index</span></code> (right) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15582">GH15582</a>). This affects inner
joins, <code class="xref py py-meth docutils literal notranslate"><span class="pre">DataFrame.join()</span></code> and <code class="xref py py-func docutils literal notranslate"><span class="pre">merge()</span></code>, and the <code class="docutils literal notranslate"><span class="pre">.align</span></code> method.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.intersection</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [109]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="gp">In [110]: </span><span class="n">left</span>
<span class="gh">Out[110]: </span><span class="go">Int64Index([2, 1, 0], dtype=&#39;int64&#39;)</span>

<span class="gp">In [111]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [112]: </span><span class="n">right</span>
<span class="gh">Out[112]: </span><span class="go">Int64Index([1, 2, 3], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">left</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">Int64Index([1, 2], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [113]: </span><span class="n">left</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
<span class="gh">Out[113]: </span><span class="go">Int64Index([2, 1], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.join</span></code> and <code class="docutils literal notranslate"><span class="pre">pd.merge</span></code></p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [114]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="gp">In [115]: </span><span class="n">left</span>
<span class="gh">Out[115]: </span><span class="go"></span>
<span class="go">    a</span>
<span class="go">2  20</span>
<span class="go">1  10</span>
<span class="go">0   0</span>

<span class="go">[3 rows x 1 columns]</span>

<span class="gp">In [116]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">]},</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="gp">In [117]: </span><span class="n">right</span>
<span class="gh">Out[117]: </span><span class="go"></span>
<span class="go">     b</span>
<span class="go">1  100</span>
<span class="go">2  200</span>
<span class="go">3  300</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="gh">Out[4]:</span>
<span class="go">   a    b</span>
<span class="go">1  10  100</span>
<span class="go">2  20  200</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [118]: </span><span class="n">left</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">right</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;inner&#39;</span><span class="p">)</span>
<span class="gh">Out[118]: </span><span class="go"></span>
<span class="go">    a    b</span>
<span class="go">2  20  200</span>
<span class="go">1  10  100</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="pivot-table-always-returns-a-dataframe">
<span id="whatsnew-0200-api-breaking-pivot-table"></span><h3>Pivot table always returns a DataFrame<a class="headerlink" href="#pivot-table-always-returns-a-dataframe" title="Permalink to this headline">¶</a></h3>
<p>The documentation for <code class="xref py py-meth docutils literal notranslate"><span class="pre">pivot_table()</span></code> states that a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> is <em>always</em> returned. Here a bug
is fixed that allowed this to return a <code class="docutils literal notranslate"><span class="pre">Series</span></code> under certain circumstance. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4386">GH4386</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [119]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;col2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;col3&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">]})</span>
<span class="gp">   .....: </span>

<span class="gp">In [120]: </span><span class="n">df</span>
<span class="gh">Out[120]: </span><span class="go"></span>
<span class="go">   col1 col2  col3</span>
<span class="go">0     3    C     1</span>
<span class="go">1     4    D     3</span>
<span class="go">2     5    E     9</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
<span class="gh">Out[2]:</span>
<span class="go">col3  col2</span>
<span class="go">1     C       3</span>
<span class="go">3     D       4</span>
<span class="go">9     E       5</span>
<span class="go">Name: col1, dtype: int64</span>
</pre></div>
</div>
<p>New behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [121]: </span><span class="n">df</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span><span class="s1">&#39;col1&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">,</span> <span class="s1">&#39;col2&#39;</span><span class="p">],</span> <span class="n">aggfunc</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">)</span>
<span class="gh">Out[121]: </span><span class="go"></span>
<span class="go">           col1</span>
<span class="go">col3 col2      </span>
<span class="go">1    C        3</span>
<span class="go">3    D        4</span>
<span class="go">9    E        5</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="other-api-changes">
<span id="whatsnew-0200-api"></span><h3>Other API changes<a class="headerlink" href="#other-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numexpr</span></code> version is now required to be &gt;= 2.4.6 and it will not be used at all if this requisite is not fulfilled (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15213">GH15213</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CParserError</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">ParserError</span></code> in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> and will be removed in the future (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12665">GH12665</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseArray.cumsum()</span></code> and <code class="docutils literal notranslate"><span class="pre">SparseSeries.cumsum()</span></code> will now always return <code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> and <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> respectively (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12855">GH12855</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.applymap()</span></code> with an empty <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> will return a copy of the empty <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> instead of a <code class="docutils literal notranslate"><span class="pre">Series</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8222">GH8222</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.map()</span></code> now respects default values of dictionary subclasses with a <code class="docutils literal notranslate"><span class="pre">__missing__</span></code> method, such as <code class="docutils literal notranslate"><span class="pre">collections.Counter</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15999">GH15999</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> has compat with <code class="docutils literal notranslate"><span class="pre">.ix</span></code> for accepting iterators, and NamedTuples (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15120">GH15120</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interpolate()</span></code> and <code class="docutils literal notranslate"><span class="pre">fillna()</span></code> will raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if the <code class="docutils literal notranslate"><span class="pre">limit</span></code> keyword argument is not greater than 0. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9217">GH9217</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> will now issue a <code class="docutils literal notranslate"><span class="pre">ParserWarning</span></code> whenever there are conflicting values provided by the <code class="docutils literal notranslate"><span class="pre">dialect</span></code> parameter and the user (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14898">GH14898</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> will now raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> for the C engine if the quote character is larger than than one byte (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11592">GH11592</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inplace</span></code> arguments now require a boolean value, else a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> is thrown (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14189">GH14189</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.api.types.is_datetime64_ns_dtype</span></code> will now report <code class="docutils literal notranslate"><span class="pre">True</span></code> on a tz-aware dtype, similar to <code class="docutils literal notranslate"><span class="pre">pandas.api.types.is_datetime64_any_dtype</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.asof()</span></code> will return a null filled <code class="docutils literal notranslate"><span class="pre">Series</span></code> instead the scalar <code class="docutils literal notranslate"><span class="pre">NaN</span></code> if a match is not found (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15118">GH15118</a>)</p></li>
<li><p>Specific support for <code class="docutils literal notranslate"><span class="pre">copy.copy()</span></code> and <code class="docutils literal notranslate"><span class="pre">copy.deepcopy()</span></code> functions on NDFrame objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15444">GH15444</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.sort_values()</span></code> accepts a one element list of bool for consistency with the behavior of <code class="docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15604">GH15604</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.merge()</span></code> and <code class="docutils literal notranslate"><span class="pre">.join()</span></code> on <code class="docutils literal notranslate"><span class="pre">category</span></code> dtype columns will now preserve the category dtype when possible (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10409">GH10409</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseDataFrame.default_fill_value</span></code> will be 0, previously was <code class="docutils literal notranslate"><span class="pre">nan</span></code> in the return from <code class="docutils literal notranslate"><span class="pre">pd.get_dummies(...,</span> <span class="pre">sparse=True)</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15594">GH15594</a>)</p></li>
<li><p>The default behaviour of <code class="docutils literal notranslate"><span class="pre">Series.str.match</span></code> has changed from extracting
groups to matching the pattern. The extracting behaviour was deprecated
since pandas version 0.13.0 and can be done with the <code class="docutils literal notranslate"><span class="pre">Series.str.extract</span></code>
method (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/5224">GH5224</a>). As a consequence, the <code class="docutils literal notranslate"><span class="pre">as_indexer</span></code> keyword is
ignored (no longer needed to specify the new behaviour) and is deprecated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code> will now correctly report <code class="docutils literal notranslate"><span class="pre">False</span></code> for datetimelike boolean operations such as <code class="docutils literal notranslate"><span class="pre">is_month_start</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15781">GH15781</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code> will now correctly return <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> for <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> and <code class="docutils literal notranslate"><span class="pre">Period</span></code> accessors such as <code class="docutils literal notranslate"><span class="pre">days</span></code> and <code class="docutils literal notranslate"><span class="pre">quarter</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15782">GH15782</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NaT</span></code> will now returns <code class="docutils literal notranslate"><span class="pre">NaT</span></code> for <code class="docutils literal notranslate"><span class="pre">tz_localize</span></code> and <code class="docutils literal notranslate"><span class="pre">tz_convert</span></code>
methods (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15830">GH15830</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and <code class="docutils literal notranslate"><span class="pre">Panel</span></code> constructors with invalid input will now raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> rather than <code class="docutils literal notranslate"><span class="pre">PandasError</span></code>, if called with scalar inputs and not axes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15541">GH15541</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> and <code class="docutils literal notranslate"><span class="pre">Panel</span></code> constructors with invalid input will now raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> rather than <code class="docutils literal notranslate"><span class="pre">pandas.core.common.PandasError</span></code>, if called with scalar inputs and not axes; The exception <code class="docutils literal notranslate"><span class="pre">PandasError</span></code> is removed as well. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15541">GH15541</a>)</p></li>
<li><p>The exception <code class="docutils literal notranslate"><span class="pre">pandas.core.common.AmbiguousIndexError</span></code> is removed as it is not referenced (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15541">GH15541</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="reorganization-of-the-library-privacy-changes">
<span id="whatsnew-0200-privacy"></span><h2>Reorganization of the library: privacy changes<a class="headerlink" href="#reorganization-of-the-library-privacy-changes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="modules-privacy-has-changed">
<span id="whatsnew-0200-privacy-extensions"></span><h3>Modules privacy has changed<a class="headerlink" href="#modules-privacy-has-changed" title="Permalink to this headline">¶</a></h3>
<p>Some formerly public python/c/c++/cython extension modules have been moved and/or renamed. These are all removed from the public API.
Furthermore, the <code class="docutils literal notranslate"><span class="pre">pandas.core</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.compat</span></code>, and <code class="docutils literal notranslate"><span class="pre">pandas.util</span></code> top-level modules are now considered to be PRIVATE.
If indicated, a deprecation warning will be issued if you reference theses modules. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12588">GH12588</a>)</p>
<table class="colwidths-given table">
<colgroup>
<col style="width: 47%" />
<col style="width: 47%" />
<col style="width: 6%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Previous Location</p></th>
<th class="head"><p>New Location</p></th>
<th class="head"><p>Deprecated</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pandas.lib</p></td>
<td><p>pandas._libs.lib</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas.tslib</p></td>
<td><p>pandas._libs.tslib</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pandas.computation</p></td>
<td><p>pandas.core.computation</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas.msgpack</p></td>
<td><p>pandas.io.msgpack</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas.index</p></td>
<td><p>pandas._libs.index</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas.algos</p></td>
<td><p>pandas._libs.algos</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas.hashtable</p></td>
<td><p>pandas._libs.hashtable</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas.indexes</p></td>
<td><p>pandas.core.indexes</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas.json</p></td>
<td><p>pandas._libs.json / pandas.io.json</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas.parser</p></td>
<td><p>pandas._libs.parsers</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pandas.formats</p></td>
<td><p>pandas.io.formats</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas.sparse</p></td>
<td><p>pandas.core.sparse</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas.tools</p></td>
<td><p>pandas.core.reshape</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>pandas.types</p></td>
<td><p>pandas.core.dtypes</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>pandas.io.sas.saslib</p></td>
<td><p>pandas.io.sas._sas</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas._join</p></td>
<td><p>pandas._libs.join</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas._hash</p></td>
<td><p>pandas._libs.hashing</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas._period</p></td>
<td><p>pandas._libs.period</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas._sparse</p></td>
<td><p>pandas._libs.sparse</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>pandas._testing</p></td>
<td><p>pandas._libs.testing</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>pandas._window</p></td>
<td><p>pandas._libs.window</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Some new subpackages are created with public functionality that is not directly
exposed in the top-level namespace: <code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> and
<code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code> (more details below). Together with <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code> and
certain functions in the <code class="docutils literal notranslate"><span class="pre">pandas.io</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas.tseries</span></code> submodules,
these are now the public subpackages.</p>
<p>Further changes:</p>
<ul class="simple">
<li><p>The function <code class="xref py py-func docutils literal notranslate"><span class="pre">union_categoricals()</span></code> is now importable from <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code>, formerly from <code class="docutils literal notranslate"><span class="pre">pandas.types.concat</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15998">GH15998</a>)</p></li>
<li><p>The type import <code class="docutils literal notranslate"><span class="pre">pandas.tslib.NaTType</span></code> is deprecated and can be replaced by using <code class="docutils literal notranslate"><span class="pre">type(pandas.NaT)</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16146">GH16146</a>)</p></li>
<li><p>The public functions in <code class="docutils literal notranslate"><span class="pre">pandas.tools.hashing</span></code> deprecated from that locations, but are now importable from <code class="docutils literal notranslate"><span class="pre">pandas.util</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16223">GH16223</a>)</p></li>
<li><p>The modules in <code class="docutils literal notranslate"><span class="pre">pandas.util</span></code>: <code class="docutils literal notranslate"><span class="pre">decorators</span></code>, <code class="docutils literal notranslate"><span class="pre">print_versions</span></code>, <code class="docutils literal notranslate"><span class="pre">doctools</span></code>, <code class="docutils literal notranslate"><span class="pre">validators</span></code>, <code class="docutils literal notranslate"><span class="pre">depr_module</span></code> are now private. Only the functions exposed in <code class="docutils literal notranslate"><span class="pre">pandas.util</span></code> itself are public (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16223">GH16223</a>)</p></li>
</ul>
</div>
<div class="section" id="pandas-errors">
<span id="whatsnew-0200-privacy-errors"></span><h3><code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code><a class="headerlink" href="#pandas-errors" title="Permalink to this headline">¶</a></h3>
<p>We are adding a standard public module for all pandas exceptions &amp; warnings <code class="docutils literal notranslate"><span class="pre">pandas.errors</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14800">GH14800</a>). Previously
these exceptions &amp; warnings could be imported from <code class="docutils literal notranslate"><span class="pre">pandas.core.common</span></code> or <code class="docutils literal notranslate"><span class="pre">pandas.io.common</span></code>. These exceptions and warnings
will be removed from the <code class="docutils literal notranslate"><span class="pre">*.common</span></code> locations in a future release. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15541">GH15541</a>)</p>
<p>The following are now part of this API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;DtypeWarning&#39;</span><span class="p">,</span>
 <span class="s1">&#39;EmptyDataError&#39;</span><span class="p">,</span>
 <span class="s1">&#39;OutOfBoundsDatetime&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ParserError&#39;</span><span class="p">,</span>
 <span class="s1">&#39;ParserWarning&#39;</span><span class="p">,</span>
 <span class="s1">&#39;PerformanceWarning&#39;</span><span class="p">,</span>
 <span class="s1">&#39;UnsortedIndexError&#39;</span><span class="p">,</span>
 <span class="s1">&#39;UnsupportedFunctionCall&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="pandas-testing">
<span id="whatsnew-0200-privacy-testing"></span><h3><code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code><a class="headerlink" href="#pandas-testing" title="Permalink to this headline">¶</a></h3>
<p>We are adding a standard module that exposes the public testing functions in <code class="docutils literal notranslate"><span class="pre">pandas.testing</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9895">GH9895</a>). Those functions can be used when writing tests for functionality using pandas objects.</p>
<p>The following testing functions are now part of this API:</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_frame_equal()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_series_equal()</span></code></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">testing.assert_index_equal()</span></code></p></li>
</ul>
</div>
<div class="section" id="pandas-plotting">
<span id="whatsnew-0200-privacy-plotting"></span><h3><code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code><a class="headerlink" href="#pandas-plotting" title="Permalink to this headline">¶</a></h3>
<p>A new public <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> module has been added that holds plotting functionality that was previously in either <code class="docutils literal notranslate"><span class="pre">pandas.tools.plotting</span></code> or in the top-level namespace. See the <a class="reference internal" href="#whatsnew-0200-privacy-deprecate-plotting"><span class="std std-ref">deprecations sections</span></a> for more details.</p>
</div>
<div class="section" id="other-development-changes">
<span id="whatsnew-0200-privacy-development"></span><h3>Other Development Changes<a class="headerlink" href="#other-development-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Building pandas for development now requires <code class="docutils literal notranslate"><span class="pre">cython</span> <span class="pre">&gt;=</span> <span class="pre">0.23</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14831">GH14831</a>)</p></li>
<li><p>Require at least 0.23 version of cython to avoid problems with character encodings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14699">GH14699</a>)</p></li>
<li><p>Switched the test framework to use <a class="reference external" href="http://doc.pytest.org/en/latest">pytest</a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13097">GH13097</a>)</p></li>
<li><p>Reorganization of tests directory layout (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14854">GH14854</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15707">GH15707</a>).</p></li>
</ul>
</div>
</div>
<div class="section" id="deprecations">
<span id="whatsnew-0200-deprecations"></span><h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="deprecate-ix">
<span id="whatsnew-0200-api-breaking-deprecate-ix"></span><h3>Deprecate <code class="docutils literal notranslate"><span class="pre">.ix</span></code><a class="headerlink" href="#deprecate-ix" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">.ix</span></code> indexer is deprecated, in favor of the more strict <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> and <code class="docutils literal notranslate"><span class="pre">.loc</span></code> indexers. <code class="docutils literal notranslate"><span class="pre">.ix</span></code> offers a lot of magic on the inference of what the user wants to do. To wit, <code class="docutils literal notranslate"><span class="pre">.ix</span></code> can decide to index <em>positionally</em> OR via <em>labels</em>, depending on the data type of the index. This has caused quite a bit of user confusion over the years. The full indexing documentation is <a class="reference internal" href="../user_guide/indexing.html#indexing"><span class="std std-ref">here</span></a>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14218">GH14218</a>)</p>
<p>The recommended methods of indexing are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.loc</span></code> if you want to <em>label</em> index</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.iloc</span></code> if you want to <em>positionally</em> index.</p></li>
</ul>
<p>Using <code class="docutils literal notranslate"><span class="pre">.ix</span></code> will now show a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> with a link to some examples of how to convert code <a class="reference internal" href="../user_guide/indexing.html#indexing-deprecate-ix"><span class="std std-ref">here</span></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [122]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]},</span>
<span class="gp">   .....: </span>                  <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">))</span>
<span class="gp">   .....: </span>

<span class="gp">In [123]: </span><span class="n">df</span>
<span class="gh">Out[123]: </span><span class="go"></span>
<span class="go">   A  B</span>
<span class="go">a  1  4</span>
<span class="go">b  2  5</span>
<span class="go">c  3  6</span>

<span class="go">[3 rows x 2 columns]</span>
</pre></div>
</div>
<p>Previous behavior, where you wish to get the 0th and the 2nd elements from the index in the ‘A’ column.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df</span><span class="o">.</span><span class="n">ix</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="gh">Out[3]:</span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Name: A, dtype: int64</span>
</pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">.loc</span></code>. Here we will select the appropriate indexes from the index, then use <em>label</em> indexing.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [124]: </span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="gh">Out[124]: </span><span class="go"></span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Name: A, Length: 2, dtype: int64</span>
</pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">.iloc</span></code>. Here we will get the location of the ‘A’ column, then use <em>positional</em> indexing to select things.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [125]: </span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)]</span>
<span class="gh">Out[125]: </span><span class="go"></span>
<span class="go">a    1</span>
<span class="go">c    3</span>
<span class="go">Name: A, Length: 2, dtype: int64</span>
</pre></div>
</div>
</div>
<div class="section" id="deprecate-panel">
<span id="whatsnew-0200-api-breaking-deprecate-panel"></span><h3>Deprecate Panel<a class="headerlink" href="#deprecate-panel" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Panel</span></code> is deprecated and will be removed in a future version. The recommended way to represent 3-D data are
with a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> on a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> via the <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_frame()</span></code> or with the <a class="reference external" href="http://xarray.pydata.org/en/stable/">xarray package</a>. Pandas
provides a <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_xarray()</span></code> method to automate this conversion (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13563">GH13563</a>).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [133]: </span><span class="kn">import</span> <span class="nn">pandas._testing</span> <span class="kn">as</span> <span class="nn">tm</span>

<span class="gp">In [134]: </span><span class="n">p</span> <span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">makePanel</span><span class="p">()</span>

<span class="gp">In [135]: </span><span class="n">p</span>
<span class="gh">Out[135]:</span>
<span class="go">&lt;class &#39;pandas.core.panel.Panel&#39;&gt;</span>
<span class="go">Dimensions: 3 (items) x 3 (major_axis) x 4 (minor_axis)</span>
<span class="go">Items axis: ItemA to ItemC</span>
<span class="go">Major_axis axis: 2000-01-03 00:00:00 to 2000-01-05 00:00:00</span>
<span class="go">Minor_axis axis: A to D</span>
</pre></div>
</div>
<p>Convert to a MultiIndex DataFrame</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [136]: </span><span class="n">p</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span>
<span class="gh">Out[136]:</span>
<span class="go">                     ItemA     ItemB     ItemC</span>
<span class="go">major      minor</span>
<span class="go">2000-01-03 A      0.628776 -1.409432  0.209395</span>
<span class="go">           B      0.988138 -1.347533 -0.896581</span>
<span class="go">           C     -0.938153  1.272395 -0.161137</span>
<span class="go">           D     -0.223019 -0.591863 -1.051539</span>
<span class="go">2000-01-04 A      0.186494  1.422986 -0.592886</span>
<span class="go">           B     -0.072608  0.363565  1.104352</span>
<span class="go">           C     -1.239072 -1.449567  0.889157</span>
<span class="go">           D      2.123692 -0.414505 -0.319561</span>
<span class="go">2000-01-05 A      0.952478 -2.147855 -1.473116</span>
<span class="go">           B     -0.550603 -0.014752 -0.431550</span>
<span class="go">           C      0.139683 -1.195524  0.288377</span>
<span class="go">           D      0.122273 -1.425795 -0.619993</span>

<span class="go">[12 rows x 3 columns]</span>
</pre></div>
</div>
<p>Convert to an xarray DataArray</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [137]: </span><span class="n">p</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">()</span>
<span class="gh">Out[137]:</span>
<span class="go">&lt;xarray.DataArray (items: 3, major_axis: 3, minor_axis: 4)&gt;</span>
<span class="go">array([[[ 0.628776,  0.988138, -0.938153, -0.223019],</span>
<span class="go">        [ 0.186494, -0.072608, -1.239072,  2.123692],</span>
<span class="go">        [ 0.952478, -0.550603,  0.139683,  0.122273]],</span>

<span class="go">       [[-1.409432, -1.347533,  1.272395, -0.591863],</span>
<span class="go">        [ 1.422986,  0.363565, -1.449567, -0.414505],</span>
<span class="go">        [-2.147855, -0.014752, -1.195524, -1.425795]],</span>

<span class="go">       [[ 0.209395, -0.896581, -0.161137, -1.051539],</span>
<span class="go">        [-0.592886,  1.104352,  0.889157, -0.319561],</span>
<span class="go">        [-1.473116, -0.43155 ,  0.288377, -0.619993]]])</span>
<span class="go">Coordinates:</span>
<span class="go">  * items       (items) object &#39;ItemA&#39; &#39;ItemB&#39; &#39;ItemC&#39;</span>
<span class="go">  * major_axis  (major_axis) datetime64[ns] 2000-01-03 2000-01-04 2000-01-05</span>
<span class="go">  * minor_axis  (minor_axis) object &#39;A&#39; &#39;B&#39; &#39;C&#39; &#39;D&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="deprecate-groupby-agg-with-a-dictionary-when-renaming">
<span id="whatsnew-0200-api-breaking-deprecate-group-agg-dict"></span><h3>Deprecate groupby.agg() with a dictionary when renaming<a class="headerlink" href="#deprecate-groupby-agg-with-a-dictionary-when-renaming" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">.groupby(..).agg(..)</span></code>, <code class="docutils literal notranslate"><span class="pre">.rolling(..).agg(..)</span></code>, and <code class="docutils literal notranslate"><span class="pre">.resample(..).agg(..)</span></code>  syntax can accept a variable of inputs, including scalars,
list, and a dict of column names to scalars or lists. This provides a useful syntax for constructing multiple
(potentially different) aggregations.</p>
<p>However, <code class="docutils literal notranslate"><span class="pre">.agg(..)</span></code> can <em>also</em> accept a dict that allows ‘renaming’ of the result columns. This is a complicated and confusing syntax, as well as not consistent
between <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>. We are deprecating this ‘renaming’ functionality.</p>
<ul class="simple">
<li><p>We are deprecating passing a dict to a grouped/rolled/resampled <code class="docutils literal notranslate"><span class="pre">Series</span></code>. This allowed
one to <code class="docutils literal notranslate"><span class="pre">rename</span></code> the resulting aggregation, but this had a completely different
meaning than passing a dictionary to a grouped <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, which accepts column-to-aggregations.</p></li>
<li><p>We are deprecating passing a dict-of-dicts to a grouped/rolled/resampled <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> in a similar manner.</p></li>
</ul>
<p>This is an illustrative example:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [126]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">   .....: </span>                   <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)})</span>
<span class="gp">   .....: </span>

<span class="gp">In [127]: </span><span class="n">df</span>
<span class="gh">Out[127]: </span><span class="go"></span>
<span class="go">   A  B  C</span>
<span class="go">0  1  0  0</span>
<span class="go">1  1  1  1</span>
<span class="go">2  1  2  2</span>
<span class="go">3  2  3  3</span>
<span class="go">4  2  4  4</span>

<span class="go">[5 rows x 3 columns]</span>
</pre></div>
</div>
<p>Here is a typical useful syntax for computing different aggregations for different columns. This
is a natural, and useful syntax. We aggregate from the dict-to-list by taking the specified
columns and applying the list of functions. This returns a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> for the columns (this is <em>not</em> deprecated).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [128]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="s1">&#39;min&#39;</span><span class="p">})</span>
<span class="gh">Out[128]: </span><span class="go"></span>
<span class="go">   B  C</span>
<span class="go">A      </span>
<span class="go">1  3  0</span>
<span class="go">2  7  3</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
<p>Here’s an example of the first deprecation, passing a dict to a grouped <code class="docutils literal notranslate"><span class="pre">Series</span></code>. This
is a combination aggregation &amp; renaming:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;count&#39;</span><span class="p">})</span>
<span class="go">FutureWarning: using a dict on a Series for aggregation</span>
<span class="go">is deprecated and will be removed in a future version</span>

<span class="gh">Out[6]:</span>
<span class="go">   foo</span>
<span class="go">A</span>
<span class="go">1    3</span>
<span class="go">2    2</span>
</pre></div>
</div>
<p>You can accomplish the same operation, more idiomatically by:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [129]: </span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">B</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;count&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;count&#39;</span><span class="p">:</span> <span class="s1">&#39;foo&#39;</span><span class="p">})</span>
<span class="gh">Out[129]: </span><span class="go"></span>
<span class="go">   foo</span>
<span class="go">A     </span>
<span class="go">1    3</span>
<span class="go">2    2</span>

<span class="go">[2 rows x 1 columns]</span>
</pre></div>
</div>
<p>Here’s an example of the second deprecation, passing a dict-of-dict to a grouped <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">23</span><span class="p">]:</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
    <span class="o">...</span><span class="p">:</span>    <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">},</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;bar&#39;</span><span class="p">:</span> <span class="s1">&#39;min&#39;</span><span class="p">}})</span>
    <span class="o">...</span><span class="p">:</span>  <span class="p">)</span>
<span class="ne">FutureWarning</span><span class="p">:</span> <span class="n">using</span> <span class="n">a</span> <span class="nb">dict</span> <span class="k">with</span> <span class="n">renaming</span> <span class="ow">is</span> <span class="n">deprecated</span> <span class="ow">and</span>
<span class="n">will</span> <span class="n">be</span> <span class="n">removed</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">future</span> <span class="n">version</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">23</span><span class="p">]:</span>
     <span class="n">B</span>   <span class="n">C</span>
   <span class="n">foo</span> <span class="n">bar</span>
<span class="n">A</span>
<span class="mi">1</span>   <span class="mi">3</span>   <span class="mi">0</span>
<span class="mi">2</span>   <span class="mi">7</span>   <span class="mi">3</span>
</pre></div>
</div>
<p>You can accomplish nearly the same by:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [130]: </span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;A&#39;</span><span class="p">)</span>
<span class="gp">   .....: </span>   <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="s1">&#39;min&#39;</span><span class="p">})</span>
<span class="gp">   .....: </span>   <span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">})</span>
<span class="gp">   .....: </span> <span class="p">)</span>
<span class="gp">   .....: </span>
<span class="gh">Out[130]: </span><span class="go"></span>
<span class="go">   foo  bar</span>
<span class="go">A          </span>
<span class="go">1    3    0</span>
<span class="go">2    7    3</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="deprecate-plotting">
<span id="whatsnew-0200-privacy-deprecate-plotting"></span><h3>Deprecate .plotting<a class="headerlink" href="#deprecate-plotting" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pandas.tools.plotting</span></code> module has been deprecated,  in favor of the top level <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> module. All the public plotting functions are now available
from <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12548">GH12548</a>).</p>
<p>Furthermore, the top-level <code class="docutils literal notranslate"><span class="pre">pandas.scatter_matrix</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas.plot_params</span></code> are deprecated.
Users can import these from <code class="docutils literal notranslate"><span class="pre">pandas.plotting</span></code> as well.</p>
<p>Previous script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">scatter_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">scatter_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p>Should be changed to:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">plotting</span><span class="o">.</span><span class="n">scatter_matrix</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="other-deprecations">
<span id="whatsnew-0200-deprecations-other"></span><h3>Other deprecations<a class="headerlink" href="#other-deprecations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SparseArray.to_dense()</span></code> has deprecated the <code class="docutils literal notranslate"><span class="pre">fill</span></code> parameter, as that parameter was not being respected (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14647">GH14647</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseSeries.to_dense()</span></code> has deprecated the <code class="docutils literal notranslate"><span class="pre">sparse_only</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14647">GH14647</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.repeat()</span></code> has deprecated the <code class="docutils literal notranslate"><span class="pre">reps</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">repeats</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12662">GH12662</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Series</span></code> constructor and <code class="docutils literal notranslate"><span class="pre">.astype</span></code> method have deprecated accepting timestamp dtypes without a frequency (e.g. <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code>) for the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15524">GH15524</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.repeat()</span></code> and <code class="docutils literal notranslate"><span class="pre">MultiIndex.repeat()</span></code> have deprecated the <code class="docutils literal notranslate"><span class="pre">n</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">repeats</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12662">GH12662</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> and <code class="docutils literal notranslate"><span class="pre">Series.searchsorted()</span></code> have deprecated the <code class="docutils literal notranslate"><span class="pre">v</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">value</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12662">GH12662</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimedeltaIndex.searchsorted()</span></code>, <code class="docutils literal notranslate"><span class="pre">DatetimeIndex.searchsorted()</span></code>, and <code class="docutils literal notranslate"><span class="pre">PeriodIndex.searchsorted()</span></code> have deprecated the <code class="docutils literal notranslate"><span class="pre">key</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">value</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12662">GH12662</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.astype()</span></code> has deprecated the <code class="docutils literal notranslate"><span class="pre">raise_on_error</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">errors</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14878">GH14878</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.sortlevel</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.sortlevel</span></code> have been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">Series.sort_index</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.sort_index</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15099">GH15099</a>)</p></li>
<li><p>importing <code class="docutils literal notranslate"><span class="pre">concat</span></code> from <code class="docutils literal notranslate"><span class="pre">pandas.tools.merge</span></code> has been deprecated in favor of imports from the <code class="docutils literal notranslate"><span class="pre">pandas</span></code> namespace. This should only affect explicit imports (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15358">GH15358</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series/DataFrame/Panel.consolidate()</span></code> been deprecated as a public method. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15483">GH15483</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">as_indexer</span></code> keyword of <code class="docutils literal notranslate"><span class="pre">Series.str.match()</span></code> has been deprecated (ignored keyword) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15257">GH15257</a>).</p></li>
<li><p>The following top-level pandas functions have been deprecated and will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13790">GH13790</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15940">GH15940</a>)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.pnow()</span></code>, replaced by <code class="docutils literal notranslate"><span class="pre">Period.now()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.Term</span></code>, is removed, as it is not applicable to user code. Instead use in-line string expressions in the where clause when searching in HDFStore</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.Expr</span></code>, is removed, as it is not applicable to user code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.match()</span></code>, is removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.groupby()</span></code>, replaced by using the <code class="docutils literal notranslate"><span class="pre">.groupby()</span></code> method directly on a <code class="docutils literal notranslate"><span class="pre">Series/DataFrame</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.get_store()</span></code>, replaced by a direct call to <code class="docutils literal notranslate"><span class="pre">pd.HDFStore(...)</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_any_int_dtype</span></code>, <code class="docutils literal notranslate"><span class="pre">is_floating_dtype</span></code>, and <code class="docutils literal notranslate"><span class="pre">is_sequence</span></code> are deprecated from <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16042">GH16042</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="removal-of-prior-version-deprecations-changes">
<span id="whatsnew-0200-prior-deprecations"></span><h2>Removal of prior version deprecations/changes<a class="headerlink" href="#removal-of-prior-version-deprecations-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">pandas.rpy</span></code> module is removed. Similar functionality can be accessed
through the <a class="reference external" href="https://rpy2.readthedocs.io/">rpy2</a> project.
See the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/version/0.20/r_interface.html">R interfacing docs</a> for more details.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pandas.io.ga</span></code> module with a <code class="docutils literal notranslate"><span class="pre">google-analytics</span></code> interface is removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11308">GH11308</a>).
Similar functionality can be found in the <a class="reference external" href="https://github.com/panalysis/Google2Pandas">Google2Pandas</a> package.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.to_datetime</span></code> and <code class="docutils literal notranslate"><span class="pre">pd.to_timedelta</span></code> have dropped the <code class="docutils literal notranslate"><span class="pre">coerce</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">errors</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13602">GH13602</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.stats.fama_macbeth</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.stats.ols</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.stats.plm</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas.stats.var</span></code>, as well as the top-level <code class="docutils literal notranslate"><span class="pre">pandas.fama_macbeth</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas.ols</span></code> routines are removed. Similar functionality can be found in the <a class="reference external" href="https://www.statsmodels.org/dev/">statsmodels</a> package. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11898">GH11898</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">TimeSeries</span></code> and <code class="docutils literal notranslate"><span class="pre">SparseTimeSeries</span></code> classes, aliases of <code class="docutils literal notranslate"><span class="pre">Series</span></code>
and <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code>, are removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10890">GH10890</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15098">GH15098</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.is_time_series</span></code> is dropped in favor of <code class="docutils literal notranslate"><span class="pre">Series.index.is_all_dates</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15098">GH15098</a>)</p></li>
<li><p>The deprecated <code class="docutils literal notranslate"><span class="pre">irow</span></code>, <code class="docutils literal notranslate"><span class="pre">icol</span></code>, <code class="docutils literal notranslate"><span class="pre">iget</span></code> and <code class="docutils literal notranslate"><span class="pre">iget_value</span></code> methods are removed
in favor of <code class="docutils literal notranslate"><span class="pre">iloc</span></code> and <code class="docutils literal notranslate"><span class="pre">iat</span></code> as explained <a class="reference internal" href="v0.17.0.html#whatsnew-0170-deprecations"><span class="std std-ref">here</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10711">GH10711</a>).</p></li>
<li><p>The deprecated <code class="docutils literal notranslate"><span class="pre">DataFrame.iterkv()</span></code> has been removed in favor of <code class="docutils literal notranslate"><span class="pre">DataFrame.iteritems()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10711">GH10711</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> constructor has dropped the <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10632">GH10632</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical</span></code> has dropped support for <code class="docutils literal notranslate"><span class="pre">NaN</span></code> categories (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10748">GH10748</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">take_last</span></code> parameter has been dropped from <code class="docutils literal notranslate"><span class="pre">duplicated()</span></code>, <code class="docutils literal notranslate"><span class="pre">drop_duplicates()</span></code>, <code class="docutils literal notranslate"><span class="pre">nlargest()</span></code>, and <code class="docutils literal notranslate"><span class="pre">nsmallest()</span></code> methods (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10236">GH10236</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10792">GH10792</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10920">GH10920</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code>, <code class="docutils literal notranslate"><span class="pre">Index</span></code>, and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> have dropped the <code class="docutils literal notranslate"><span class="pre">sort</span></code> and <code class="docutils literal notranslate"><span class="pre">order</span></code> methods (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10726">GH10726</a>)</p></li>
<li><p>Where clauses in <code class="docutils literal notranslate"><span class="pre">pytables</span></code> are only accepted as strings and expressions types and not other data-types (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12027">GH12027</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">combineAdd</span></code> and <code class="docutils literal notranslate"><span class="pre">combineMult</span></code> methods in favor of <code class="docutils literal notranslate"><span class="pre">add</span></code> and <code class="docutils literal notranslate"><span class="pre">mul</span></code> respectively (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10735">GH10735</a>)</p></li>
</ul>
</div>
<div class="section" id="performance-improvements">
<span id="whatsnew-0200-performance"></span><h2>Performance improvements<a class="headerlink" href="#performance-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">pd.wide_to_long()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14779">GH14779</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">pd.factorize()</span></code> by releasing the GIL with <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype when inferred as strings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14859">GH14859</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16057">GH16057</a>)</p></li>
<li><p>Improved performance of timeseries plotting with an irregular DatetimeIndex
(or with <code class="docutils literal notranslate"><span class="pre">compat_x=True</span></code>) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15073">GH15073</a>).</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">groupby().cummin()</span></code> and <code class="docutils literal notranslate"><span class="pre">groupby().cummax()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15048">GH15048</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15109">GH15109</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15561">GH15561</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15635">GH15635</a>)</p></li>
<li><p>Improved performance and reduced memory when indexing with a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15245">GH15245</a>)</p></li>
<li><p>When reading buffer object in <code class="docutils literal notranslate"><span class="pre">read_sas()</span></code> method without specified format, filepath string is inferred rather than buffer object. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14947">GH14947</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">.rank()</span></code> for categorical data (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15498">GH15498</a>)</p></li>
<li><p>Improved performance when using <code class="docutils literal notranslate"><span class="pre">.unstack()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15503">GH15503</a>)</p></li>
<li><p>Improved performance of merge/join on <code class="docutils literal notranslate"><span class="pre">category</span></code> columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10409">GH10409</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">drop_duplicates()</span></code> on <code class="docutils literal notranslate"><span class="pre">bool</span></code> columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12963">GH12963</a>)</p></li>
<li><p>Improve performance of <code class="docutils literal notranslate"><span class="pre">pd.core.groupby.GroupBy.apply</span></code> when the applied
function used the <code class="docutils literal notranslate"><span class="pre">.name</span></code> attribute of the group DataFrame (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15062">GH15062</a>).</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">iloc</span></code> indexing with a list or array (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15504">GH15504</a>).</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">Series.sort_index()</span></code> with a monotonic index (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15694">GH15694</a>)</p></li>
<li><p>Improved performance in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> on some platforms with buffered reads (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16039">GH16039</a>)</p></li>
</ul>
</div>
<div class="section" id="bug-fixes">
<span id="whatsnew-0200-bug-fixes"></span><h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="conversion">
<h3>Conversion<a class="headerlink" href="#conversion" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Timestamp.replace</span></code> now raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when incorrect argument names are given; previously this raised <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15240">GH15240</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Timestamp.replace</span></code> with compat for passing long integers (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15030">GH15030</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> returning UTC based time/date attributes when a timezone was provided (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13303">GH13303</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6538">GH6538</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> incorrectly localizing timezones during construction (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11481">GH11481</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15777">GH15777</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> addition where overflow was being allowed without error (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14816">GH14816</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> raising a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when boolean indexing with <code class="docutils literal notranslate"><span class="pre">loc</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14946">GH14946</a>)</p></li>
<li><p>Bug in catching an overflow in <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> + <code class="docutils literal notranslate"><span class="pre">Timedelta/Offset</span></code> operations (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15126">GH15126</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DatetimeIndex.round()</span></code> and <code class="docutils literal notranslate"><span class="pre">Timestamp.round()</span></code> floating point accuracy when rounding by milliseconds or less (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14440">GH14440</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15578">GH15578</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">astype()</span></code> where <code class="docutils literal notranslate"><span class="pre">inf</span></code> values were incorrectly converted to integers. Now raises error now with <code class="docutils literal notranslate"><span class="pre">astype()</span></code> for Series and DataFrames (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14265">GH14265</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame(..).apply(to_numeric)</span></code> when values are of type decimal.Decimal. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14827">GH14827</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">describe()</span></code> when passing a numpy array which does not contain the median to the <code class="docutils literal notranslate"><span class="pre">percentiles</span></code> keyword argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14908">GH14908</a>)</p></li>
<li><p>Cleaned up <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> constructor, including raising on floats more consistently (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13277">GH13277</a>)</p></li>
<li><p>Bug in using <code class="docutils literal notranslate"><span class="pre">__deepcopy__</span></code> on empty NDFrame objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15370">GH15370</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.replace()</span></code> may result in incorrect dtypes. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12747">GH12747</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15765">GH15765</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.replace</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.replace</span></code> which failed on empty replacement dicts (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15289">GH15289</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.replace</span></code> which replaced a numeric by string (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15743">GH15743</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index</span></code> construction with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> elements and integer dtype specified (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15187">GH15187</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> construction with a datetimetz (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14928">GH14928</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.dt.round()</span></code> inconsistent behaviour on <code class="docutils literal notranslate"><span class="pre">NaT</span></code> ‘s with different arguments (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14940">GH14940</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> constructor when both <code class="docutils literal notranslate"><span class="pre">copy=True</span></code> and <code class="docutils literal notranslate"><span class="pre">dtype</span></code> arguments are provided (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15125">GH15125</a>)</p></li>
<li><p>Incorrect dtyped <code class="docutils literal notranslate"><span class="pre">Series</span></code> was returned by comparison methods (e.g., <code class="docutils literal notranslate"><span class="pre">lt</span></code>, <code class="docutils literal notranslate"><span class="pre">gt</span></code>, …) against a constant for an empty <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15077">GH15077</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.ffill()</span></code> with mixed dtypes containing tz-aware datetimes. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14956">GH14956</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code> where the argument <code class="docutils literal notranslate"><span class="pre">downcast</span></code> was ignored when fillna value was of type <code class="docutils literal notranslate"><span class="pre">dict</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15277">GH15277</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.asfreq()</span></code>, where frequency was not set for empty <code class="docutils literal notranslate"><span class="pre">Series</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14320">GH14320</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> construction with nulls and datetimes in a list-like (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15869">GH15869</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.fillna()</span></code> with tz-aware datetimes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15855">GH15855</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">is_string_dtype</span></code>, <code class="docutils literal notranslate"><span class="pre">is_timedelta64_ns_dtype</span></code>, and <code class="docutils literal notranslate"><span class="pre">is_string_like_dtype</span></code> in which an error was raised when <code class="docutils literal notranslate"><span class="pre">None</span></code> was passed in (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15941">GH15941</a>)</p></li>
<li><p>Bug in the return type of <code class="docutils literal notranslate"><span class="pre">pd.unique</span></code> on a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code>, which was returning an ndarray and not a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15903">GH15903</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index.to_series()</span></code> where the index was not copied (and so mutating later would change the original), (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15949">GH15949</a>)</p></li>
<li><p>Bug in indexing with partial string indexing with a len-1 DataFrame (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16071">GH16071</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> construction where passing invalid dtype didn’t raise an error. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15520">GH15520</a>)</p></li>
</ul>
</div>
<div class="section" id="indexing">
<h3>Indexing<a class="headerlink" href="#indexing" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index</span></code> power operations with reversed operands (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14973">GH14973</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.sort_values()</span></code> when sorting by multiple columns where one column is of type <code class="docutils literal notranslate"><span class="pre">int64</span></code> and contains <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14922">GH14922</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.reindex()</span></code> in which <code class="docutils literal notranslate"><span class="pre">method</span></code> was ignored when passing <code class="docutils literal notranslate"><span class="pre">columns</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14992">GH14992</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.loc</span></code> with indexing a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> with a <code class="docutils literal notranslate"><span class="pre">Series</span></code> indexer (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14730">GH14730</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15424">GH15424</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.loc</span></code> with indexing a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> with a numpy array (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15434">GH15434</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.asof</span></code> which raised if the series contained all <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15713">GH15713</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.at</span></code> when selecting from a tz-aware column (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15822">GH15822</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.where()</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.where()</span></code> where array-like conditionals were being rejected (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15414">GH15414</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.where()</span></code> where TZ-aware data was converted to float representation (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15701">GH15701</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.loc</span></code> that would not return the correct dtype for scalar access for a DataFrame (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11617">GH11617</a>)</p></li>
<li><p>Bug in output formatting of a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> when names are integers (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12223">GH12223</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15262">GH15262</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Categorical.searchsorted()</span></code> where alphabetical instead of the provided categorical order was used (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14522">GH14522</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.iloc</span></code> where a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> object for list-like indexes input was returned, where a <code class="docutils literal notranslate"><span class="pre">Series</span></code> was expected. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14580">GH14580</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.isin</span></code> comparing datetimelike to empty frame (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15473">GH15473</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.reset_index()</span></code> when an all <code class="docutils literal notranslate"><span class="pre">NaN</span></code> level of a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> would fail (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6322">GH6322</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.reset_index()</span></code> when raising error for index name already present in <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16120">GH16120</a>)</p></li>
<li><p>Bug in creating a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> with tuples and not passing a list of names; this will now raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15110">GH15110</a>)</p></li>
<li><p>Bug in the HTML display with with a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> and truncation (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14882">GH14882</a>)</p></li>
<li><p>Bug in the display of <code class="docutils literal notranslate"><span class="pre">.info()</span></code> where a qualifier (+) would always be displayed with a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> that contains only non-strings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15245">GH15245</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.concat()</span></code> where the names of <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> of resulting <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> are not handled correctly when <code class="docutils literal notranslate"><span class="pre">None</span></code> is presented in the names of <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> of input <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15787">GH15787</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.sort_index()</span></code> and <code class="docutils literal notranslate"><span class="pre">Series.sort_index()</span></code> where <code class="docutils literal notranslate"><span class="pre">na_position</span></code> doesn’t work with a <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14784">GH14784</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16604">GH16604</a>)</p></li>
<li><p>Bug in in <code class="docutils literal notranslate"><span class="pre">pd.concat()</span></code> when combining objects with a <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16111">GH16111</a>)</p></li>
<li><p>Bug in indexing with a scalar and a <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16123">GH16123</a>)</p></li>
</ul>
</div>
<div class="section" id="i-o">
<h3>I/O<a class="headerlink" href="#i-o" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_numeric()</span></code> in which float and unsigned integer elements were being improperly casted (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14941">GH14941</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15005">GH15005</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_fwf()</span></code> where the skiprows parameter was not being respected during column width inference (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11256">GH11256</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in which the <code class="docutils literal notranslate"><span class="pre">dialect</span></code> parameter was not being verified before processing (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14898">GH14898</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in which missing data was being improperly handled with <code class="docutils literal notranslate"><span class="pre">usecols</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6710">GH6710</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in which a file containing a row with many columns followed by rows with fewer columns would cause a crash (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14125">GH14125</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> for the C engine where <code class="docutils literal notranslate"><span class="pre">usecols</span></code> were being indexed incorrectly with <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14792">GH14792</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> when multi-line headers are specified (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15376">GH15376</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">float_precision='round_trip'</span></code> which caused a segfault when a text entry is parsed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15140">GH15140</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> when an index was specified and no values were specified as null values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15835">GH15835</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in which certain invalid file objects caused the Python interpreter to crash (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15337">GH15337</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in which invalid values for <code class="docutils literal notranslate"><span class="pre">nrows</span></code> and <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> were allowed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15767">GH15767</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> for the Python engine in which unhelpful error messages were being raised when parsing errors occurred (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15910">GH15910</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in which the <code class="docutils literal notranslate"><span class="pre">skipfooter</span></code> parameter was not being properly validated (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15925">GH15925</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_csv()</span></code> in which there was numeric overflow when a timestamp index was being written (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15982">GH15982</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.util.hashing.hash_pandas_object()</span></code> in which hashing of categoricals depended on the ordering of categories, instead of just their values. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15143">GH15143</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.to_json()</span></code> where <code class="docutils literal notranslate"><span class="pre">lines=True</span></code> and contents (keys or values) contain escaped characters (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15096">GH15096</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.to_json()</span></code> causing single byte ascii characters to be expanded to four byte unicode (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15344">GH15344</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.to_json()</span></code> for the C engine where rollover was not correctly handled for case where frac is odd and diff is exactly 0.5 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15716">GH15716</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15864">GH15864</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_json()</span></code> for Python 2 where <code class="docutils literal notranslate"><span class="pre">lines=True</span></code> and contents contain non-ascii unicode characters (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15132">GH15132</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_msgpack()</span></code> in which <code class="docutils literal notranslate"><span class="pre">Series</span></code> categoricals were being improperly processed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14901">GH14901</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_msgpack()</span></code> which did not allow loading of a dataframe with an index of type <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15487">GH15487</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_msgpack()</span></code> when deserializing a <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15487">GH15487</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.to_records()</span></code> with converting a <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> with a timezone (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13937">GH13937</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.to_records()</span></code> which failed with unicode characters in column names (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11879">GH11879</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.to_sql()</span></code> when writing a DataFrame with numeric index names (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15404">GH15404</a>).</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code> with <code class="docutils literal notranslate"><span class="pre">index=False</span></code> and <code class="docutils literal notranslate"><span class="pre">max_rows</span></code> raising in <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14998">GH14998</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_hdf()</span></code> passing a <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> to the <code class="docutils literal notranslate"><span class="pre">where</span></code> parameter with a non date column (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15492">GH15492</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.to_stata()</span></code> and <code class="docutils literal notranslate"><span class="pre">StataWriter</span></code> which produces incorrectly formatted files to be produced for some locales (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13856">GH13856</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">StataReader</span></code> and <code class="docutils literal notranslate"><span class="pre">StataWriter</span></code> which allows invalid encodings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15723">GH15723</a>)</p></li>
<li><p>Bug in the <code class="docutils literal notranslate"><span class="pre">Series</span></code> repr not showing the length when the output was truncated (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15962">GH15962</a>).</p></li>
</ul>
</div>
<div class="section" id="plotting">
<h3>Plotting<a class="headerlink" href="#plotting" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.hist</span></code> where <code class="docutils literal notranslate"><span class="pre">plt.tight_layout</span></code> caused an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>  (use <code class="docutils literal notranslate"><span class="pre">matplotlib</span> <span class="pre">&gt;=</span> <span class="pre">2.0.1</span></code>) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9351">GH9351</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.boxplot</span></code> where <code class="docutils literal notranslate"><span class="pre">fontsize</span></code> was not applied to the tick labels on both axes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15108">GH15108</a>)</p></li>
<li><p>Bug in the date and time converters pandas registers with matplotlib not handling multiple dimensions (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/16026">GH16026</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.scatter_matrix()</span></code> could accept either <code class="docutils literal notranslate"><span class="pre">color</span></code> or <code class="docutils literal notranslate"><span class="pre">c</span></code>, but not both (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14855">GH14855</a>)</p></li>
</ul>
</div>
<div class="section" id="groupby-resample-rolling">
<h3>Groupby/resample/rolling<a class="headerlink" href="#groupby-resample-rolling" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.groupby(..).resample()</span></code> when passed the <code class="docutils literal notranslate"><span class="pre">on=</span></code> kwarg. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15021">GH15021</a>)</p></li>
<li><p>Properly set <code class="docutils literal notranslate"><span class="pre">__name__</span></code> and <code class="docutils literal notranslate"><span class="pre">__qualname__</span></code> for <code class="docutils literal notranslate"><span class="pre">Groupby.*</span></code> functions (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14620">GH14620</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">GroupBy.get_group()</span></code> failing with a categorical grouper (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15155">GH15155</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.groupby(...).rolling(...)</span></code> when <code class="docutils literal notranslate"><span class="pre">on</span></code> is specified and using a <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15130">GH15130</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13966">GH13966</a>)</p></li>
<li><p>Bug in groupby operations with <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> when passing <code class="docutils literal notranslate"><span class="pre">numeric_only=False</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/5724">GH5724</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby.apply()</span></code> coercing <code class="docutils literal notranslate"><span class="pre">object</span></code> dtypes to numeric types, when not all values were numeric (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14423">GH14423</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15421">GH15421</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15670">GH15670</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">resample</span></code>, where a non-string <code class="docutils literal notranslate"><span class="pre">loffset</span></code> argument would not be applied when resampling a timeseries (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13218">GH13218</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.groupby().describe()</span></code> when grouping on <code class="docutils literal notranslate"><span class="pre">Index</span></code> containing tuples (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14848">GH14848</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby().nunique()</span></code> with a datetimelike-grouper where bins counts were incorrect (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13453">GH13453</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby.transform()</span></code> that would coerce the resultant dtypes back to the original (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10972">GH10972</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11444">GH11444</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby.agg()</span></code> incorrectly localizing timezone on <code class="docutils literal notranslate"><span class="pre">datetime</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15426">GH15426</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10668">GH10668</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13046">GH13046</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.rolling/expanding()</span></code> functions where <code class="docutils literal notranslate"><span class="pre">count()</span></code> was not counting <code class="docutils literal notranslate"><span class="pre">np.Inf</span></code>, nor handling <code class="docutils literal notranslate"><span class="pre">object</span></code> dtypes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12541">GH12541</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> where <code class="docutils literal notranslate"><span class="pre">pd.Timedelta</span></code> or <code class="docutils literal notranslate"><span class="pre">datetime.timedelta</span></code> was not accepted as a <code class="docutils literal notranslate"><span class="pre">window</span></code> argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15440">GH15440</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Rolling.quantile</span></code> function that caused a segmentation fault when called with a quantile value outside of the range [0, 1] (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15463">GH15463</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.resample().median()</span></code> if duplicate column names are present (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14233">GH14233</a>)</p></li>
</ul>
</div>
<div class="section" id="sparse">
<h3>Sparse<a class="headerlink" href="#sparse" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries.reindex</span></code> on single level with list of length 1 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15447">GH15447</a>)</p></li>
<li><p>Bug in repr-formatting a <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> after a value was set on (a copy of) one of its series (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15488">GH15488</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> construction with lists not coercing to dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15682">GH15682</a>)</p></li>
<li><p>Bug in sparse array indexing in which indices were not being validated (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15863">GH15863</a>)</p></li>
</ul>
</div>
<div class="section" id="reshaping">
<h3>Reshaping<a class="headerlink" href="#reshaping" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.merge_asof()</span></code> where <code class="docutils literal notranslate"><span class="pre">left_index</span></code> or <code class="docutils literal notranslate"><span class="pre">right_index</span></code> caused a failure when multiple <code class="docutils literal notranslate"><span class="pre">by</span></code> was specified (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15676">GH15676</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.merge_asof()</span></code> where <code class="docutils literal notranslate"><span class="pre">left_index</span></code>/<code class="docutils literal notranslate"><span class="pre">right_index</span></code> together caused a failure when <code class="docutils literal notranslate"><span class="pre">tolerance</span></code> was specified (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15135">GH15135</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.pivot_table()</span></code> where <code class="docutils literal notranslate"><span class="pre">dropna=True</span></code> would not drop all-NaN columns when the columns was a <code class="docutils literal notranslate"><span class="pre">category</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15193">GH15193</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.melt()</span></code> where passing a tuple value for <code class="docutils literal notranslate"><span class="pre">value_vars</span></code> caused a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15348">GH15348</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.pivot_table()</span></code> where no error was raised when values argument was not in the columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14938">GH14938</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.concat()</span></code> in which concatenating with an empty dataframe with <code class="docutils literal notranslate"><span class="pre">join='inner'</span></code> was being improperly handled (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15328">GH15328</a>)</p></li>
<li><p>Bug with <code class="docutils literal notranslate"><span class="pre">sort=True</span></code> in <code class="docutils literal notranslate"><span class="pre">DataFrame.join</span></code> and <code class="docutils literal notranslate"><span class="pre">pd.merge</span></code> when joining on indexes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15582">GH15582</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.nsmallest</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.nlargest</span></code> where identical values resulted in duplicated rows (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15297">GH15297</a>)</p></li>
<li><p>Bug in <code class="xref py py-func docutils literal notranslate"><span class="pre">pandas.pivot_table()</span></code> incorrectly raising <code class="docutils literal notranslate"><span class="pre">UnicodeError</span></code> when passing unicode input for <code class="docutils literal notranslate"><span class="pre">margins</span></code> keyword (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13292">GH13292</a>)</p></li>
</ul>
</div>
<div class="section" id="numeric">
<h3>Numeric<a class="headerlink" href="#numeric" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.rank()</span></code> which incorrectly ranks ordered categories (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15420">GH15420</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.corr()</span></code> and <code class="docutils literal notranslate"><span class="pre">.cov()</span></code> where the column and index were the same object (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14617">GH14617</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.mode()</span></code> where <code class="docutils literal notranslate"><span class="pre">mode</span></code> was not returned if was only a single value (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15714">GH15714</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.cut()</span></code> with a single bin on an all 0s array (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15428">GH15428</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.qcut()</span></code> with a single quantile and an array with identical values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15431">GH15431</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pandas.tools.utils.cartesian_product()</span></code> with large input can cause overflow on windows (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15265">GH15265</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.eval()</span></code> which caused multi-line evals to fail with local variables not on the first line (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15342">GH15342</a>)</p></li>
</ul>
</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Compat with SciPy 0.19.0 for testing on <code class="docutils literal notranslate"><span class="pre">.interpolate()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/15662">GH15662</a>)</p></li>
<li><p>Compat for 32-bit platforms for <code class="docutils literal notranslate"><span class="pre">.qcut/cut</span></code>; bins will now be <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14866">GH14866</a>)</p></li>
<li><p>Bug in interactions with <code class="docutils literal notranslate"><span class="pre">Qt</span></code> when a <code class="docutils literal notranslate"><span class="pre">QtApplication</span></code> already exists (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14372">GH14372</a>)</p></li>
<li><p>Avoid use of <code class="docutils literal notranslate"><span class="pre">np.finfo()</span></code> during <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">pandas</span></code> removed to mitigate deadlock on Python GIL misuse (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14641">GH14641</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="contributors">
<span id="whatsnew-0-20-0-contributors"></span><h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<p>A total of 204 people contributed patches to this release.  People with a
“+” by their names contributed a patch for the first time.
</p>
<ul class="simple">
<li><p>Adam J. Stewart +</p></li>
<li><p>Adrian +</p></li>
<li><p>Ajay Saxena</p></li>
<li><p>Akash Tandon +</p></li>
<li><p>Albert Villanova del Moral +</p></li>
<li><p>Aleksey Bilogur +</p></li>
<li><p>Alexis Mignon +</p></li>
<li><p>Amol Kahat +</p></li>
<li><p>Andreas Winkler +</p></li>
<li><p>Andrew Kittredge +</p></li>
<li><p>Anthonios Partheniou</p></li>
<li><p>Arco Bast +</p></li>
<li><p>Ashish Singal +</p></li>
<li><p>Baurzhan Muftakhidinov +</p></li>
<li><p>Ben Kandel</p></li>
<li><p>Ben Thayer +</p></li>
<li><p>Ben Welsh +</p></li>
<li><p>Bill Chambers +</p></li>
<li><p>Brandon M. Burroughs</p></li>
<li><p>Brian +</p></li>
<li><p>Brian McFee +</p></li>
<li><p>Carlos Souza +</p></li>
<li><p>Chris</p></li>
<li><p>Chris Ham</p></li>
<li><p>Chris Warth</p></li>
<li><p>Christoph Gohlke</p></li>
<li><p>Christoph Paulik +</p></li>
<li><p>Christopher C. Aycock</p></li>
<li><p>Clemens Brunner +</p></li>
<li><p>D.S. McNeil +</p></li>
<li><p>DaanVanHauwermeiren +</p></li>
<li><p>Daniel Himmelstein</p></li>
<li><p>Dave Willmer</p></li>
<li><p>David Cook +</p></li>
<li><p>David Gwynne +</p></li>
<li><p>David Hoffman +</p></li>
<li><p>David Krych</p></li>
<li><p>Diego Fernandez +</p></li>
<li><p>Dimitris Spathis +</p></li>
<li><p>Dmitry L +</p></li>
<li><p>Dody Suria Wijaya +</p></li>
<li><p>Dominik Stanczak +</p></li>
<li><p>Dr-Irv</p></li>
<li><p>Dr. Irv +</p></li>
<li><p>Elliott Sales de Andrade +</p></li>
<li><p>Ennemoser Christoph +</p></li>
<li><p>Francesc Alted +</p></li>
<li><p>Fumito Hamamura +</p></li>
<li><p>Giacomo Ferroni</p></li>
<li><p>Graham R. Jeffries +</p></li>
<li><p>Greg Williams +</p></li>
<li><p>Guilherme Beltramini +</p></li>
<li><p>Guilherme Samora +</p></li>
<li><p>Hao Wu +</p></li>
<li><p>Harshit Patni +</p></li>
<li><p>Ilya V. Schurov +</p></li>
<li><p>Iván Vallés Pérez</p></li>
<li><p>Jackie Leng +</p></li>
<li><p>Jaehoon Hwang +</p></li>
<li><p>James Draper +</p></li>
<li><p>James Goppert +</p></li>
<li><p>James McBride +</p></li>
<li><p>James Santucci +</p></li>
<li><p>Jan Schulz</p></li>
<li><p>Jeff Carey</p></li>
<li><p>Jeff Reback</p></li>
<li><p>JennaVergeynst +</p></li>
<li><p>Jim +</p></li>
<li><p>Jim Crist</p></li>
<li><p>Joe Jevnik</p></li>
<li><p>Joel Nothman +</p></li>
<li><p>John +</p></li>
<li><p>John Tucker +</p></li>
<li><p>John W. O’Brien</p></li>
<li><p>John Zwinck</p></li>
<li><p>Jon M. Mease</p></li>
<li><p>Jon Mease</p></li>
<li><p>Jonathan Whitmore +</p></li>
<li><p>Jonathan de Bruin +</p></li>
<li><p>Joost Kranendonk +</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>Joshua Bradt +</p></li>
<li><p>Julian Santander</p></li>
<li><p>Julien Marrec +</p></li>
<li><p>Jun Kim +</p></li>
<li><p>Justin Solinsky +</p></li>
<li><p>Kacawi +</p></li>
<li><p>Kamal Kamalaldin +</p></li>
<li><p>Kerby Shedden</p></li>
<li><p>Kernc</p></li>
<li><p>Keshav Ramaswamy</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Kyle Kelley</p></li>
<li><p>Larry Ren</p></li>
<li><p>Leon Yin +</p></li>
<li><p>Line Pedersen +</p></li>
<li><p>Lorenzo Cestaro +</p></li>
<li><p>Luca Scarabello</p></li>
<li><p>Lukasz +</p></li>
<li><p>Mahmoud Lababidi</p></li>
<li><p>Mark Mandel +</p></li>
<li><p>Matt Roeschke</p></li>
<li><p>Matthew Brett</p></li>
<li><p>Matthew Roeschke +</p></li>
<li><p>Matti Picus</p></li>
<li><p>Maximilian Roos</p></li>
<li><p>Michael Charlton +</p></li>
<li><p>Michael Felt</p></li>
<li><p>Michael Lamparski +</p></li>
<li><p>Michiel Stock +</p></li>
<li><p>Mikolaj Chwalisz +</p></li>
<li><p>Min RK</p></li>
<li><p>Miroslav Šedivý +</p></li>
<li><p>Mykola Golubyev</p></li>
<li><p>Nate Yoder</p></li>
<li><p>Nathalie Rud +</p></li>
<li><p>Nicholas Ver Halen</p></li>
<li><p>Nick Chmura +</p></li>
<li><p>Nolan Nichols +</p></li>
<li><p>Pankaj Pandey +</p></li>
<li><p>Pawel Kordek</p></li>
<li><p>Pete Huang +</p></li>
<li><p>Peter +</p></li>
<li><p>Peter Csizsek +</p></li>
<li><p>Petio Petrov +</p></li>
<li><p>Phil Ruffwind +</p></li>
<li><p>Pietro Battiston</p></li>
<li><p>Piotr Chromiec</p></li>
<li><p>Prasanjit Prakash +</p></li>
<li><p>Rob Forgione +</p></li>
<li><p>Robert Bradshaw</p></li>
<li><p>Robin +</p></li>
<li><p>Rodolfo Fernandez</p></li>
<li><p>Roger Thomas</p></li>
<li><p>Rouz Azari +</p></li>
<li><p>Sahil Dua</p></li>
<li><p>Sam Foo +</p></li>
<li><p>Sami Salonen +</p></li>
<li><p>Sarah Bird +</p></li>
<li><p>Sarma Tangirala +</p></li>
<li><p>Scott Sanderson</p></li>
<li><p>Sebastian Bank</p></li>
<li><p>Sebastian Gsänger +</p></li>
<li><p>Shawn Heide</p></li>
<li><p>Shyam Saladi +</p></li>
<li><p>Sinhrks</p></li>
<li><p>Stephen Rauch +</p></li>
<li><p>Sébastien de Menten +</p></li>
<li><p>Tara Adiseshan</p></li>
<li><p>Thiago Serafim</p></li>
<li><p>Thoralf Gutierrez +</p></li>
<li><p>Thrasibule +</p></li>
<li><p>Tobias Gustafsson +</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Tong SHEN +</p></li>
<li><p>Tong Shen +</p></li>
<li><p>TrigonaMinima +</p></li>
<li><p>Uwe +</p></li>
<li><p>Wes Turner</p></li>
<li><p>Wiktor Tomczak +</p></li>
<li><p>WillAyd</p></li>
<li><p>Yaroslav Halchenko</p></li>
<li><p>Yimeng Zhang +</p></li>
<li><p>abaldenko +</p></li>
<li><p>adrian-stepien +</p></li>
<li><p>alexandercbooth +</p></li>
<li><p>atbd +</p></li>
<li><p>bastewart +</p></li>
<li><p>bmagnusson +</p></li>
<li><p>carlosdanielcsantos +</p></li>
<li><p>chaimdemulder +</p></li>
<li><p>chris-b1</p></li>
<li><p>dickreuter +</p></li>
<li><p>discort +</p></li>
<li><p>dr-leo +</p></li>
<li><p>dubourg</p></li>
<li><p>dwkenefick +</p></li>
<li><p>funnycrab +</p></li>
<li><p>gfyoung</p></li>
<li><p>goldenbull +</p></li>
<li><p>hesham.shabana&#64;hotmail.com</p></li>
<li><p>jojomdt +</p></li>
<li><p>linebp +</p></li>
<li><p>manu +</p></li>
<li><p>manuels +</p></li>
<li><p>mattip +</p></li>
<li><p>maxalbert +</p></li>
<li><p>mcocdawc +</p></li>
<li><p>nuffe +</p></li>
<li><p>paul-mannino</p></li>
<li><p>pbreach +</p></li>
<li><p>sakkemo +</p></li>
<li><p>scls19fr</p></li>
<li><p>sinhrks</p></li>
<li><p>stijnvanhoey +</p></li>
<li><p>the-nose-knows +</p></li>
<li><p>themrmax +</p></li>
<li><p>tomrod +</p></li>
<li><p>tzinckgraf</p></li>
<li><p>wandersoncferreira</p></li>
<li><p>watercrossing +</p></li>
<li><p>wcwagner</p></li>
<li><p>xgdgsc +</p></li>
<li><p>yui-knk</p></li>
</ul>
</div>
</div>


              </div>
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="v0.20.2.html" title="previous page">v0.20.2 (June 4, 2017)</a>
    <a class='right-next' id="next-link" href="v0.19.2.html" title="next page">v0.19.2 (December 24, 2016)</a>

              </div>
              
          </main>

      </div>
    </div><script>
    // TOC sidebar - add "active" class to parent list
    //
    // Bootstrap's scrollspy adds the active class to the <a> link,
    // but for the automatic collapsing we need this on the parent list item.
    //
    // The event is triggered on "window" (and not the nav item as documented),
    // see https://github.com/twbs/bootstrap/issues/20086
    $(window).on("activate.bs.scrollspy", function(){
    var navLinks = document.querySelectorAll('#bd-toc-nav a');
    for (var i = 0; i < navLinks.length; i++) {
        var navLink = navLinks[i];
        navLink.parentElement.classList.remove('active');
    }
    var navLinks = document.querySelectorAll('#bd-toc-nav a.active');
    for (var i = 0; i < navLinks.length; i++) {
        var navLink = navLinks[i];
        navLink.parentElement.classList.add('active');
    }
    });

    /**
     * Use left and right arrow keys to navigate forward and backwards.
    */
    const LEFT_ARROW_KEYCODE = 37
    const RIGHT_ARROW_KEYCODE = 39

    const getPrevUrl = () => document.getElementById('prev-link').href
    const getNextUrl = () => document.getElementById('next-link').href
    const initPageNav = (event) => {
        const keycode = event.which

        if (keycode === LEFT_ARROW_KEYCODE) {
            window.location.href = getPrevUrl();
        } else if (keycode === RIGHT_ARROW_KEYCODE) {
            window.location.href = getNextUrl();
        }
    };

    var keyboardListener = false;
    $( document ).ready(() => {
        if (keyboardListener === false) {
            document.addEventListener('keydown', initPageNav)
            keyboardListener = true;
        }
    });
</script>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2020, the pandas development team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.0.
    </div>
  </body>
</html>