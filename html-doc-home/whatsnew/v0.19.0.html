

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>v0.19.0 (October 2, 2016) &#8212; pandas 1.0.0rc0+111.ge72cd7c52 documentation</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link rel="stylesheet" href="../_static/sphinx-bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/pandas.css" />
    <link href="../_static/css/custom.css" rel="stylesheet">
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="v0.18.1 (May 3, 2016)" href="v0.18.1.html" />
    <link rel="prev" title="v0.19.1 (November 3, 2016)" href="v0.19.1.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">

<a class="navbar-brand" href="../index.html">
  <img src="../_static/pandas.svg" class="logo" alt="logo">
</a>

<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
</button>

<div id="navbar-menu" class="collapse navbar-collapse">
  <ul id="navbar-main-elements" class="navbar-nav mr-auto">
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        1.0.0
      </a>
      <div class="dropdown-menu" aria-labelledby="navbarDropdown" id="version-menu"></div>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="../index.html">Home</a>
    </li>
    
    
    <li class="nav-item ">
        <a class="nav-link" href="v1.1.0.html">What's New in 1.1.0</a>
    </li>
    
    <li class="nav-item ">
        <a class="nav-link" href="../getting_started/index.html">Getting started</a>
    </li>
    
    <li class="nav-item ">
        <a class="nav-link" href="../user_guide/index.html">User Guide</a>
    </li>
    
    <li class="nav-item ">
        <a class="nav-link" href="../reference/index.html">API reference</a>
    </li>
    
    <li class="nav-item ">
        <a class="nav-link" href="../development/index.html">Development</a>
    </li>
    
    <li class="nav-item active">
        <a class="nav-link" href="index.html">Release Notes</a>
    </li>
    
    
  </ul>
  <ul class="navbar-nav ml-auto">
    
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/pandas-dev/pandas" target="_blank" rel="noopener">
          <span><i class="fab fa-github-square"></i></span>
        </a>
      </li>
    
    
      <li class="nav-item">
        <a class="nav-link" href="https://twitter.com/pandas_dev" target="_blank" rel="noopener">
          <span><i class="fab fa-twitter-square"></i></span>
        </a>
      </li>
    
  </ul>
</div>
    </nav>

    <div class="container-fluid">
      <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
      
      
      
      
      
      
        
      
      
    </ul>

</nav>
          </div>

          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage"><i class="fas fa-list"></i> On this page</div>
<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#new-features" class="nav-link">New features</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#merge-asof-for-asof-style-time-series-joining" class="nav-link">merge_asof for asof-style time-series joining</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#rolling-is-now-time-series-aware" class="nav-link">.rolling() is now time-series aware</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#read-csv-has-improved-support-for-duplicate-column-names" class="nav-link">read_csv has improved support for duplicate column names</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#read-csv-supports-parsing-categorical-directly" class="nav-link">read_csv supports parsing Categorical directly</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#categorical-concatenation" class="nav-link">Categorical concatenation</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#semi-month-offsets" class="nav-link">Semi-month offsets</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#new-index-methods" class="nav-link">New Index methods</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#google-bigquery-enhancements" class="nav-link">Google BigQuery Enhancements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#fine-grained-numpy-errstate" class="nav-link">Fine-grained numpy errstate</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#get-dummies-now-returns-integer-dtypes" class="nav-link">get_dummies now returns integer dtypes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#downcast-values-to-smallest-possible-dtype-in-to-numeric" class="nav-link">Downcast values to smallest possible dtype in to_numeric</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pandas-development-api" class="nav-link">pandas development API</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#other-enhancements" class="nav-link">Other enhancements</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#api-changes" class="nav-link">API changes</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#series-tolist-will-now-return-python-types" class="nav-link">Series.tolist() will now return Python types</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#series-operators-for-different-indexes" class="nav-link">Series operators for different indexes</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#arithmetic-operators" class="nav-link">Arithmetic operators</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#comparison-operators" class="nav-link">Comparison operators</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#logical-operators" class="nav-link">Logical operators</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#flexible-comparison-methods" class="nav-link">Flexible comparison methods</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#series-type-promotion-on-assignment" class="nav-link">Series type promotion on assignment</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#to-datetime-changes" class="nav-link">.to_datetime() changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#merging-changes" class="nav-link">Merging changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#describe-changes" class="nav-link">.describe() changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#period-changes" class="nav-link">Period changes</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#periodindex-now-has-period-dtype" class="nav-link">PeriodIndex now has period dtype</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#period-nat-now-returns-pd-nat" class="nav-link">Period('NaT') now returns pd.NaT</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#periodindex-values-now-returns-array-of-period-object" class="nav-link">PeriodIndex.values now returns array of Period object</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#index-no-longer-used-for-set-operations" class="nav-link">Index + / - no longer used for set operations</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#index-difference-and-symmetric-difference-changes" class="nav-link">Index.difference and .symmetric_difference changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#index-unique-consistently-returns-index" class="nav-link">Index.unique consistently returns Index</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#multiindex-constructors-groupby-and-set-index-preserve-categorical-dtypes" class="nav-link">MultiIndex constructors, groupby and set_index preserve categorical dtypes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#read-csv-will-progressively-enumerate-chunks" class="nav-link">read_csv will progressively enumerate chunks</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#sparse-changes" class="nav-link">Sparse Changes</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h4">
            <a href="#int64-and-bool-support-enhancements" class="nav-link">int64 and bool support enhancements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#operators-now-preserve-dtypes" class="nav-link">Operators now preserve dtypes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h4">
            <a href="#other-sparse-fixes" class="nav-link">Other sparse fixes</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#indexer-dtype-changes" class="nav-link">Indexer dtype changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#other-api-changes" class="nav-link">Other API changes</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#deprecations" class="nav-link">Deprecations</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#removal-of-prior-version-deprecations-changes" class="nav-link">Removal of prior version deprecations/changes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#performance-improvements" class="nav-link">Performance improvements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#bug-fixes" class="nav-link">Bug fixes</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#contributors" class="nav-link">Contributors</a>
        </li>
    
    </ul>
</nav>
              
            </div>

          <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
              <div>
                
  <div class="section" id="v0-19-0-october-2-2016">
<span id="whatsnew-0190"></span><h1>v0.19.0 (October 2, 2016)<a class="headerlink" href="#v0-19-0-october-2-2016" title="Permalink to this headline">¶</a></h1>
<p>This is a major release from 0.18.1 and includes number of API changes, several new features,
enhancements, and performance improvements along with a large number of bug fixes. We recommend that all
users upgrade to this version.</p>
<p>Highlights include:</p>
<ul class="simple">
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code> for asof-style time-series joining, see <a class="reference internal" href="#whatsnew-0190-enhancements-asof-merge"><span class="std std-ref">here</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> is now time-series aware, see <a class="reference internal" href="#whatsnew-0190-enhancements-rolling-ts"><span class="std std-ref">here</span></a></p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code> now supports parsing <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> data, see <a class="reference internal" href="#whatsnew-0190-enhancements-read-csv-categorical"><span class="std std-ref">here</span></a></p></li>
<li><p>A function <code class="xref py py-func docutils literal notranslate"><span class="pre">union_categorical()</span></code> has been added for combining categoricals, see <a class="reference internal" href="#whatsnew-0190-enhancements-union-categoricals"><span class="std std-ref">here</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> now has its own <code class="docutils literal notranslate"><span class="pre">period</span></code> dtype, and changed to be more consistent with other <code class="docutils literal notranslate"><span class="pre">Index</span></code> classes. See <a class="reference internal" href="#whatsnew-0190-api-period"><span class="std std-ref">here</span></a></p></li>
<li><p>Sparse data structures gained enhanced support of <code class="docutils literal notranslate"><span class="pre">int</span></code> and <code class="docutils literal notranslate"><span class="pre">bool</span></code> dtypes, see <a class="reference internal" href="#whatsnew-0190-sparse"><span class="std std-ref">here</span></a></p></li>
<li><p>Comparison operations with <code class="docutils literal notranslate"><span class="pre">Series</span></code> no longer ignores the index, see <a class="reference internal" href="#whatsnew-0190-api-series-ops"><span class="std std-ref">here</span></a> for an overview of the API changes.</p></li>
<li><p>Introduction of a pandas development API for utility functions, see <a class="reference internal" href="#whatsnew-0190-dev-api"><span class="std std-ref">here</span></a>.</p></li>
<li><p>Deprecation of <code class="docutils literal notranslate"><span class="pre">Panel4D</span></code> and <code class="docutils literal notranslate"><span class="pre">PanelND</span></code>. We recommend to represent these types of n-dimensional data with the <a class="reference external" href="http://xarray.pydata.org/en/stable/">xarray package</a>.</p></li>
<li><p>Removal of the previously deprecated modules <code class="docutils literal notranslate"><span class="pre">pandas.io.data</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.io.wb</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas.tools.rplot</span></code>.</p></li>
</ul>
<div class="alert alert-warning">
<p class="admonition-title">Warning</p>
<p>pandas &gt;= 0.19.0 will no longer silence numpy ufunc warnings upon import, see <a class="reference internal" href="#whatsnew-0190-errstate"><span class="std std-ref">here</span></a>.</p>
</div>
<div class="contents local topic" id="what-s-new-in-v0-19-0">
<p class="topic-title first">What’s new in v0.19.0</p>
<ul class="simple">
<li><p><a class="reference internal" href="#new-features" id="id1">New features</a></p>
<ul>
<li><p><a class="reference internal" href="#merge-asof-for-asof-style-time-series-joining" id="id2"><code class="docutils literal notranslate"><span class="pre">merge_asof</span></code> for asof-style time-series joining</a></p></li>
<li><p><a class="reference internal" href="#rolling-is-now-time-series-aware" id="id3"><code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> is now time-series aware</a></p></li>
<li><p><a class="reference internal" href="#read-csv-has-improved-support-for-duplicate-column-names" id="id4"><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> has improved support for duplicate column names</a></p></li>
<li><p><a class="reference internal" href="#read-csv-supports-parsing-categorical-directly" id="id5"><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> supports parsing <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> directly</a></p></li>
<li><p><a class="reference internal" href="#categorical-concatenation" id="id6">Categorical concatenation</a></p></li>
<li><p><a class="reference internal" href="#semi-month-offsets" id="id7">Semi-month offsets</a></p></li>
<li><p><a class="reference internal" href="#new-index-methods" id="id8">New Index methods</a></p></li>
<li><p><a class="reference internal" href="#google-bigquery-enhancements" id="id9">Google BigQuery Enhancements</a></p></li>
<li><p><a class="reference internal" href="#fine-grained-numpy-errstate" id="id10">Fine-grained numpy errstate</a></p></li>
<li><p><a class="reference internal" href="#get-dummies-now-returns-integer-dtypes" id="id11"><code class="docutils literal notranslate"><span class="pre">get_dummies</span></code> now returns integer dtypes</a></p></li>
<li><p><a class="reference internal" href="#downcast-values-to-smallest-possible-dtype-in-to-numeric" id="id12">Downcast values to smallest possible dtype in <code class="docutils literal notranslate"><span class="pre">to_numeric</span></code></a></p></li>
<li><p><a class="reference internal" href="#pandas-development-api" id="id13">pandas development API</a></p></li>
<li><p><a class="reference internal" href="#other-enhancements" id="id14">Other enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#api-changes" id="id15">API changes</a></p>
<ul>
<li><p><a class="reference internal" href="#series-tolist-will-now-return-python-types" id="id16"><code class="docutils literal notranslate"><span class="pre">Series.tolist()</span></code> will now return Python types</a></p></li>
<li><p><a class="reference internal" href="#series-operators-for-different-indexes" id="id17"><code class="docutils literal notranslate"><span class="pre">Series</span></code> operators for different indexes</a></p>
<ul>
<li><p><a class="reference internal" href="#arithmetic-operators" id="id18">Arithmetic operators</a></p></li>
<li><p><a class="reference internal" href="#comparison-operators" id="id19">Comparison operators</a></p></li>
<li><p><a class="reference internal" href="#logical-operators" id="id20">Logical operators</a></p></li>
<li><p><a class="reference internal" href="#flexible-comparison-methods" id="id21">Flexible comparison methods</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#series-type-promotion-on-assignment" id="id22"><code class="docutils literal notranslate"><span class="pre">Series</span></code> type promotion on assignment</a></p></li>
<li><p><a class="reference internal" href="#to-datetime-changes" id="id23"><code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code> changes</a></p></li>
<li><p><a class="reference internal" href="#merging-changes" id="id24">Merging changes</a></p></li>
<li><p><a class="reference internal" href="#describe-changes" id="id25"><code class="docutils literal notranslate"><span class="pre">.describe()</span></code> changes</a></p></li>
<li><p><a class="reference internal" href="#period-changes" id="id26"><code class="docutils literal notranslate"><span class="pre">Period</span></code> changes</a></p>
<ul>
<li><p><a class="reference internal" href="#periodindex-now-has-period-dtype" id="id27"><code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> now has <code class="docutils literal notranslate"><span class="pre">period</span></code> dtype</a></p></li>
<li><p><a class="reference internal" href="#period-nat-now-returns-pd-nat" id="id28"><code class="docutils literal notranslate"><span class="pre">Period('NaT')</span></code> now returns <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code></a></p></li>
<li><p><a class="reference internal" href="#periodindex-values-now-returns-array-of-period-object" id="id29"><code class="docutils literal notranslate"><span class="pre">PeriodIndex.values</span></code> now returns array of <code class="docutils literal notranslate"><span class="pre">Period</span></code> object</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#index-no-longer-used-for-set-operations" id="id30">Index <code class="docutils literal notranslate"><span class="pre">+</span></code> / <code class="docutils literal notranslate"><span class="pre">-</span></code> no longer used for set operations</a></p></li>
<li><p><a class="reference internal" href="#index-difference-and-symmetric-difference-changes" id="id31"><code class="docutils literal notranslate"><span class="pre">Index.difference</span></code> and <code class="docutils literal notranslate"><span class="pre">.symmetric_difference</span></code> changes</a></p></li>
<li><p><a class="reference internal" href="#index-unique-consistently-returns-index" id="id32"><code class="docutils literal notranslate"><span class="pre">Index.unique</span></code> consistently returns <code class="docutils literal notranslate"><span class="pre">Index</span></code></a></p></li>
<li><p><a class="reference internal" href="#multiindex-constructors-groupby-and-set-index-preserve-categorical-dtypes" id="id33"><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> constructors, <code class="docutils literal notranslate"><span class="pre">groupby</span></code> and <code class="docutils literal notranslate"><span class="pre">set_index</span></code> preserve categorical dtypes</a></p></li>
<li><p><a class="reference internal" href="#read-csv-will-progressively-enumerate-chunks" id="id34"><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> will progressively enumerate chunks</a></p></li>
<li><p><a class="reference internal" href="#sparse-changes" id="id35">Sparse Changes</a></p>
<ul>
<li><p><a class="reference internal" href="#int64-and-bool-support-enhancements" id="id36"><code class="docutils literal notranslate"><span class="pre">int64</span></code> and <code class="docutils literal notranslate"><span class="pre">bool</span></code> support enhancements</a></p></li>
<li><p><a class="reference internal" href="#operators-now-preserve-dtypes" id="id37">Operators now preserve dtypes</a></p></li>
<li><p><a class="reference internal" href="#other-sparse-fixes" id="id38">Other sparse fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#indexer-dtype-changes" id="id39">Indexer dtype changes</a></p></li>
<li><p><a class="reference internal" href="#other-api-changes" id="id40">Other API changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deprecations" id="id41">Deprecations</a></p></li>
<li><p><a class="reference internal" href="#removal-of-prior-version-deprecations-changes" id="id42">Removal of prior version deprecations/changes</a></p></li>
<li><p><a class="reference internal" href="#performance-improvements" id="id43">Performance improvements</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes" id="id44">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#contributors" id="id45">Contributors</a></p></li>
</ul>
</div>
<div class="section" id="new-features">
<span id="whatsnew-0190-new-features"></span><h2>New features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="merge-asof-for-asof-style-time-series-joining">
<span id="whatsnew-0190-enhancements-asof-merge"></span><h3><code class="docutils literal notranslate"><span class="pre">merge_asof</span></code> for asof-style time-series joining<a class="headerlink" href="#merge-asof-for-asof-style-time-series-joining" title="Permalink to this headline">¶</a></h3>
<p>A long-time requested feature has been added through the <code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code> function, to
support asof style joining of time-series (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1870">GH1870</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13695">GH13695</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13709">GH13709</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13902">GH13902</a>). Full documentation is
<a class="reference internal" href="../user_guide/merging.html#merging-merge-asof"><span class="std std-ref">here</span></a>.</p>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">merge_asof()</span></code> performs an asof merge, which is similar to a left-join
except that we match on nearest key rather than equal keys.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">left</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="gp">   ...: </span>                     <span class="s1">&#39;left_val&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]})</span>
<span class="gp">   ...: </span>

<span class="gp">In [2]: </span><span class="n">right</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span>
<span class="gp">   ...: </span>                     <span class="s1">&#39;right_val&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">]})</span>
<span class="gp">   ...: </span>

<span class="gp">In [3]: </span><span class="n">left</span>
<span class="gh">Out[3]: </span><span class="go"></span>
<span class="go">    a left_val</span>
<span class="go">0   1        a</span>
<span class="go">1   5        b</span>
<span class="go">2  10        c</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [4]: </span><span class="n">right</span>
<span class="gh">Out[4]: </span><span class="go"></span>
<span class="go">   a  right_val</span>
<span class="go">0  1          1</span>
<span class="go">1  2          2</span>
<span class="go">2  3          3</span>
<span class="go">3  6          6</span>
<span class="go">4  7          7</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
<p>We typically want to match exactly when possible, and use the most
recent value otherwise.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge_asof</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="go">    a left_val  right_val</span>
<span class="go">0   1        a          1</span>
<span class="go">1   5        b          3</span>
<span class="go">2  10        c          7</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<p>We can also match rows ONLY with prior data, and not an exact match.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge_asof</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="n">allow_exact_matches</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">    a left_val  right_val</span>
<span class="go">0   1        a        NaN</span>
<span class="go">1   5        b        3.0</span>
<span class="go">2  10        c        7.0</span>

<span class="go">[3 rows x 3 columns]</span>
</pre></div>
</div>
<p>In a typical time-series example, we have <code class="docutils literal notranslate"><span class="pre">trades</span></code> and <code class="docutils literal notranslate"><span class="pre">quotes</span></code> and we want to <code class="docutils literal notranslate"><span class="pre">asof-join</span></code> them.
This also illustrates using the <code class="docutils literal notranslate"><span class="pre">by</span></code> parameter to group data before merging.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">trades</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;20160525 13:30:00.023&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.038&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.048&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.048&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.048&#39;</span><span class="p">]),</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;ticker&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>               <span class="s1">&#39;GOOG&#39;</span><span class="p">,</span> <span class="s1">&#39;GOOG&#39;</span><span class="p">,</span> <span class="s1">&#39;AAPL&#39;</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">51.95</span><span class="p">,</span> <span class="mf">51.95</span><span class="p">,</span>
<span class="gp">   ...: </span>              <span class="mf">720.77</span><span class="p">,</span> <span class="mf">720.92</span><span class="p">,</span> <span class="mf">98.00</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;quantity&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">75</span><span class="p">,</span> <span class="mi">155</span><span class="p">,</span>
<span class="gp">   ...: </span>                 <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]},</span>
<span class="gp">   ...: </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;ticker&#39;</span><span class="p">,</span> <span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;quantity&#39;</span><span class="p">])</span>
<span class="gp">   ...: </span>

<span class="gp">In [8]: </span><span class="n">quotes</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="s1">&#39;20160525 13:30:00.023&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.023&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.030&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.041&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.048&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.049&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.072&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                            <span class="s1">&#39;20160525 13:30:00.075&#39;</span><span class="p">]),</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;ticker&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;GOOG&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>               <span class="s1">&#39;GOOG&#39;</span><span class="p">,</span> <span class="s1">&#39;AAPL&#39;</span><span class="p">,</span> <span class="s1">&#39;GOOG&#39;</span><span class="p">,</span> <span class="s1">&#39;MSFT&#39;</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;bid&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">720.50</span><span class="p">,</span> <span class="mf">51.95</span><span class="p">,</span> <span class="mf">51.97</span><span class="p">,</span> <span class="mf">51.99</span><span class="p">,</span>
<span class="gp">   ...: </span>            <span class="mf">720.50</span><span class="p">,</span> <span class="mf">97.99</span><span class="p">,</span> <span class="mf">720.50</span><span class="p">,</span> <span class="mf">52.01</span><span class="p">],</span>
<span class="gp">   ...: </span>    <span class="s1">&#39;ask&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">720.93</span><span class="p">,</span> <span class="mf">51.96</span><span class="p">,</span> <span class="mf">51.98</span><span class="p">,</span> <span class="mf">52.00</span><span class="p">,</span>
<span class="gp">   ...: </span>            <span class="mf">720.93</span><span class="p">,</span> <span class="mf">98.01</span><span class="p">,</span> <span class="mf">720.88</span><span class="p">,</span> <span class="mf">52.03</span><span class="p">]},</span>
<span class="gp">   ...: </span>    <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="s1">&#39;ticker&#39;</span><span class="p">,</span> <span class="s1">&#39;bid&#39;</span><span class="p">,</span> <span class="s1">&#39;ask&#39;</span><span class="p">])</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [9]: </span><span class="n">trades</span>
<span class="gh">Out[9]: </span><span class="go"></span>
<span class="go">                     time ticker   price  quantity</span>
<span class="go">0 2016-05-25 13:30:00.023   MSFT   51.95        75</span>
<span class="go">1 2016-05-25 13:30:00.038   MSFT   51.95       155</span>
<span class="go">2 2016-05-25 13:30:00.048   GOOG  720.77       100</span>
<span class="go">3 2016-05-25 13:30:00.048   GOOG  720.92       100</span>
<span class="go">4 2016-05-25 13:30:00.048   AAPL   98.00       100</span>

<span class="go">[5 rows x 4 columns]</span>

<span class="gp">In [10]: </span><span class="n">quotes</span>
<span class="gh">Out[10]: </span><span class="go"></span>
<span class="go">                     time ticker     bid     ask</span>
<span class="go">0 2016-05-25 13:30:00.023   GOOG  720.50  720.93</span>
<span class="go">1 2016-05-25 13:30:00.023   MSFT   51.95   51.96</span>
<span class="go">2 2016-05-25 13:30:00.030   MSFT   51.97   51.98</span>
<span class="go">3 2016-05-25 13:30:00.041   MSFT   51.99   52.00</span>
<span class="go">4 2016-05-25 13:30:00.048   GOOG  720.50  720.93</span>
<span class="go">5 2016-05-25 13:30:00.049   AAPL   97.99   98.01</span>
<span class="go">6 2016-05-25 13:30:00.072   GOOG  720.50  720.88</span>
<span class="go">7 2016-05-25 13:30:00.075   MSFT   52.01   52.03</span>

<span class="go">[8 rows x 4 columns]</span>
</pre></div>
</div>
<p>An asof merge joins on the <code class="docutils literal notranslate"><span class="pre">on</span></code>, typically a datetimelike field, which is ordered, and
in this case we are using a grouper in the <code class="docutils literal notranslate"><span class="pre">by</span></code> field. This is like a left-outer join, except
that forward filling happens automatically taking the most recent non-NaN value.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge_asof</span><span class="p">(</span><span class="n">trades</span><span class="p">,</span> <span class="n">quotes</span><span class="p">,</span>
<span class="gp">   ....: </span>              <span class="n">on</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>              <span class="n">by</span><span class="o">=</span><span class="s1">&#39;ticker&#39;</span><span class="p">)</span>
<span class="gp">   ....: </span>
<span class="gh">Out[11]: </span><span class="go"></span>
<span class="go">                     time ticker   price  quantity     bid     ask</span>
<span class="go">0 2016-05-25 13:30:00.023   MSFT   51.95        75   51.95   51.96</span>
<span class="go">1 2016-05-25 13:30:00.038   MSFT   51.95       155   51.97   51.98</span>
<span class="go">2 2016-05-25 13:30:00.048   GOOG  720.77       100  720.50  720.93</span>
<span class="go">3 2016-05-25 13:30:00.048   GOOG  720.92       100  720.50  720.93</span>
<span class="go">4 2016-05-25 13:30:00.048   AAPL   98.00       100     NaN     NaN</span>

<span class="go">[5 rows x 6 columns]</span>
</pre></div>
</div>
<p>This returns a merged DataFrame with the entries in the same order as the original left
passed DataFrame (<code class="docutils literal notranslate"><span class="pre">trades</span></code> in this case), with the fields of the <code class="docutils literal notranslate"><span class="pre">quotes</span></code> merged.</p>
</div>
<div class="section" id="rolling-is-now-time-series-aware">
<span id="whatsnew-0190-enhancements-rolling-ts"></span><h3><code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> is now time-series aware<a class="headerlink" href="#rolling-is-now-time-series-aware" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> objects are now time-series aware and can accept a time-series offset (or convertible) for the <code class="docutils literal notranslate"><span class="pre">window</span></code> argument (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13327">GH13327</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12995">GH12995</a>).
See the full documentation <a class="reference internal" href="../user_guide/computation.html#stats-moments-ts"><span class="std std-ref">here</span></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="n">dft</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">4</span><span class="p">]},</span>
<span class="gp">   ....: </span>                   <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;20130101 09:00:00&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                       <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;s&#39;</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [13]: </span><span class="n">dft</span>
<span class="gh">Out[13]: </span><span class="go"></span>
<span class="go">                       B</span>
<span class="go">2013-01-01 09:00:00  0.0</span>
<span class="go">2013-01-01 09:00:01  1.0</span>
<span class="go">2013-01-01 09:00:02  2.0</span>
<span class="go">2013-01-01 09:00:03  NaN</span>
<span class="go">2013-01-01 09:00:04  4.0</span>

<span class="go">[5 rows x 1 columns]</span>
</pre></div>
</div>
<p>This is a regular frequency index. Using an integer window parameter works to roll along the window frequency.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="n">dft</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[14]: </span><span class="go"></span>
<span class="go">                       B</span>
<span class="go">2013-01-01 09:00:00  NaN</span>
<span class="go">2013-01-01 09:00:01  1.0</span>
<span class="go">2013-01-01 09:00:02  3.0</span>
<span class="go">2013-01-01 09:00:03  NaN</span>
<span class="go">2013-01-01 09:00:04  NaN</span>

<span class="go">[5 rows x 1 columns]</span>

<span class="gp">In [15]: </span><span class="n">dft</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">min_periods</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[15]: </span><span class="go"></span>
<span class="go">                       B</span>
<span class="go">2013-01-01 09:00:00  0.0</span>
<span class="go">2013-01-01 09:00:01  1.0</span>
<span class="go">2013-01-01 09:00:02  3.0</span>
<span class="go">2013-01-01 09:00:03  2.0</span>
<span class="go">2013-01-01 09:00:04  4.0</span>

<span class="go">[5 rows x 1 columns]</span>
</pre></div>
</div>
<p>Specifying an offset allows a more intuitive specification of the rolling frequency.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">dft</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="s1">&#39;2s&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[16]: </span><span class="go"></span>
<span class="go">                       B</span>
<span class="go">2013-01-01 09:00:00  0.0</span>
<span class="go">2013-01-01 09:00:01  1.0</span>
<span class="go">2013-01-01 09:00:02  3.0</span>
<span class="go">2013-01-01 09:00:03  2.0</span>
<span class="go">2013-01-01 09:00:04  4.0</span>

<span class="go">[5 rows x 1 columns]</span>
</pre></div>
</div>
<p>Using a non-regular, but still monotonic index, rolling with an integer window does not impart any special calculation.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="n">dft</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">4</span><span class="p">]},</span>
<span class="gp">   ....: </span>                   <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101 09:00:00&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                                   <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101 09:00:02&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                                   <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101 09:00:03&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                                   <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101 09:00:05&#39;</span><span class="p">),</span>
<span class="gp">   ....: </span>                                   <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;20130101 09:00:06&#39;</span><span class="p">)],</span>
<span class="gp">   ....: </span>                                  <span class="n">name</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">))</span>
<span class="gp">   ....: </span>

<span class="gp">In [18]: </span><span class="n">dft</span>
<span class="gh">Out[18]: </span><span class="go"></span>
<span class="go">                       B</span>
<span class="go">foo                     </span>
<span class="go">2013-01-01 09:00:00  0.0</span>
<span class="go">2013-01-01 09:00:02  1.0</span>
<span class="go">2013-01-01 09:00:03  2.0</span>
<span class="go">2013-01-01 09:00:05  NaN</span>
<span class="go">2013-01-01 09:00:06  4.0</span>

<span class="go">[5 rows x 1 columns]</span>

<span class="gp">In [19]: </span><span class="n">dft</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[19]: </span><span class="go"></span>
<span class="go">                       B</span>
<span class="go">foo                     </span>
<span class="go">2013-01-01 09:00:00  NaN</span>
<span class="go">2013-01-01 09:00:02  1.0</span>
<span class="go">2013-01-01 09:00:03  3.0</span>
<span class="go">2013-01-01 09:00:05  NaN</span>
<span class="go">2013-01-01 09:00:06  NaN</span>

<span class="go">[5 rows x 1 columns]</span>
</pre></div>
</div>
<p>Using the time-specification generates variable windows for this sparse data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="n">dft</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="s1">&#39;2s&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[20]: </span><span class="go"></span>
<span class="go">                       B</span>
<span class="go">foo                     </span>
<span class="go">2013-01-01 09:00:00  0.0</span>
<span class="go">2013-01-01 09:00:02  1.0</span>
<span class="go">2013-01-01 09:00:03  3.0</span>
<span class="go">2013-01-01 09:00:05  NaN</span>
<span class="go">2013-01-01 09:00:06  4.0</span>

<span class="go">[5 rows x 1 columns]</span>
</pre></div>
</div>
<p>Furthermore, we now allow an optional <code class="docutils literal notranslate"><span class="pre">on</span></code> parameter to specify a column (rather than the
default of the index) in a DataFrame.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [21]: </span><span class="n">dft</span> <span class="o">=</span> <span class="n">dft</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="gp">In [22]: </span><span class="n">dft</span>
<span class="gh">Out[22]: </span><span class="go"></span>
<span class="go">                  foo    B</span>
<span class="go">0 2013-01-01 09:00:00  0.0</span>
<span class="go">1 2013-01-01 09:00:02  1.0</span>
<span class="go">2 2013-01-01 09:00:03  2.0</span>
<span class="go">3 2013-01-01 09:00:05  NaN</span>
<span class="go">4 2013-01-01 09:00:06  4.0</span>

<span class="go">[5 rows x 2 columns]</span>

<span class="gp">In [23]: </span><span class="n">dft</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="s1">&#39;2s&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[23]: </span><span class="go"></span>
<span class="go">                  foo    B</span>
<span class="go">0 2013-01-01 09:00:00  0.0</span>
<span class="go">1 2013-01-01 09:00:02  1.0</span>
<span class="go">2 2013-01-01 09:00:03  3.0</span>
<span class="go">3 2013-01-01 09:00:05  NaN</span>
<span class="go">4 2013-01-01 09:00:06  4.0</span>

<span class="go">[5 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="read-csv-has-improved-support-for-duplicate-column-names">
<span id="whatsnew-0190-enhancements-read-csv-dupe-col-names-support"></span><h3><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> has improved support for duplicate column names<a class="headerlink" href="#read-csv-has-improved-support-for-duplicate-column-names" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="../user_guide/io.html#io-dupe-names"><span class="std std-ref">Duplicate column names</span></a> are now supported in <code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code> whether
they are in the file or passed in as the <code class="docutils literal notranslate"><span class="pre">names</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7160">GH7160</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9424">GH9424</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [24]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;0,1,2</span><span class="se">\n</span><span class="s1">3,4,5&#39;</span>

<span class="gp">In [25]: </span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
<span class="gh">Out[2]:</span>
<span class="go">   a  b  a</span>
<span class="go">0  2  1  2</span>
<span class="go">1  5  4  5</span>
</pre></div>
</div>
<p>The first <code class="docutils literal notranslate"><span class="pre">a</span></code> column contained the same data as the second <code class="docutils literal notranslate"><span class="pre">a</span></code> column, when it should have
contained the values <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">3]</span></code>.</p>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>
<span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">26</span><span class="o">-</span><span class="n">a095135d9435</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">)</span>

<span class="nn">~/scipy/pandas/pandas/io/parsers.py</span> in <span class="ni">parser_f</span><span class="nt">(filepath_or_buffer, sep, delimiter, header, names, index_col, usecols, squeeze, prefix, mangle_dupe_cols, dtype, engine, converters, true_values, false_values, skipinitialspace, skiprows, skipfooter, nrows, na_values, keep_default_na, na_filter, verbose, skip_blank_lines, parse_dates, infer_datetime_format, keep_date_col, date_parser, dayfirst, cache_dates, iterator, chunksize, compression, thousands, decimal, lineterminator, quotechar, quoting, doublequote, escapechar, comment, encoding, dialect, error_bad_lines, warn_bad_lines, delim_whitespace, low_memory, memory_map, float_precision)</span>
<span class="g g-Whitespace">    </span><span class="mi">673</span>         <span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">674</span> 
<span class="ne">--&gt; </span><span class="mi">675</span>         <span class="k">return</span> <span class="n">_read</span><span class="p">(</span><span class="n">filepath_or_buffer</span><span class="p">,</span> <span class="n">kwds</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">676</span> 
<span class="g g-Whitespace">    </span><span class="mi">677</span>     <span class="n">parser_f</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">name</span>

<span class="nn">~/scipy/pandas/pandas/io/parsers.py</span> in <span class="ni">_read</span><span class="nt">(filepath_or_buffer, kwds)</span>
<span class="g g-Whitespace">    </span><span class="mi">443</span> 
<span class="g g-Whitespace">    </span><span class="mi">444</span>     <span class="c1"># Check for duplicates in names.</span>
<span class="ne">--&gt; </span><span class="mi">445</span>     <span class="n">_validate_names</span><span class="p">(</span><span class="n">kwds</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;names&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">))</span>
<span class="g g-Whitespace">    </span><span class="mi">446</span> 
<span class="g g-Whitespace">    </span><span class="mi">447</span>     <span class="c1"># Create the parser.</span>

<span class="nn">~/scipy/pandas/pandas/io/parsers.py</span> in <span class="ni">_validate_names</span><span class="nt">(names)</span>
<span class="g g-Whitespace">    </span><span class="mi">411</span>     <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">412</span>         <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">names</span><span class="p">)):</span>
<span class="ne">--&gt; </span><span class="mi">413</span>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Duplicate names are not allowed.&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">414</span> 
<span class="g g-Whitespace">    </span><span class="mi">415</span> 

<span class="ne">ValueError</span>: Duplicate names are not allowed.
</pre></div>
</div>
</div>
<div class="section" id="read-csv-supports-parsing-categorical-directly">
<span id="whatsnew-0190-enhancements-read-csv-categorical"></span><h3><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> supports parsing <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> directly<a class="headerlink" href="#read-csv-supports-parsing-categorical-directly" title="Permalink to this headline">¶</a></h3>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code> function now supports parsing a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> column when
specified as a dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10153">GH10153</a>).  Depending on the structure of the data,
this can result in a faster parse time and lower memory usage compared to
converting to <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> after parsing.  See the io <a class="reference internal" href="../user_guide/io.html#io-categorical"><span class="std std-ref">docs here</span></a>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [27]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;col1,col2,col3</span><span class="se">\n</span><span class="s1">a,b,1</span><span class="se">\n</span><span class="s1">a,b,2</span><span class="se">\n</span><span class="s1">c,d,3&#39;</span>

<span class="gp">In [28]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
<span class="gh">Out[28]: </span><span class="go"></span>
<span class="go">  col1 col2  col3</span>
<span class="go">0    a    b     1</span>
<span class="go">1    a    b     2</span>
<span class="go">2    c    d     3</span>

<span class="go">[3 rows x 3 columns]</span>

<span class="gp">In [29]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[29]: </span><span class="go"></span>
<span class="go">col1    object</span>
<span class="go">col2    object</span>
<span class="go">col3     int64</span>
<span class="go">Length: 3, dtype: object</span>

<span class="gp">In [30]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[30]: </span><span class="go"></span>
<span class="go">col1    category</span>
<span class="go">col2    category</span>
<span class="go">col3    category</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
<p>Individual columns can be parsed as a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> using a dict specification</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [31]: </span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;col1&#39;</span><span class="p">:</span> <span class="s1">&#39;category&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[31]: </span><span class="go"></span>
<span class="go">col1    category</span>
<span class="go">col2      object</span>
<span class="go">col3       int64</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p>The resulting categories will always be parsed as strings (object dtype).
If the categories are numeric they can be converted using the
<code class="xref py py-func docutils literal notranslate"><span class="pre">to_numeric()</span></code> function, or as appropriate, another converter
such as <code class="xref py py-func docutils literal notranslate"><span class="pre">to_datetime()</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [32]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>

<span class="gp">In [33]: </span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[33]: </span><span class="go"></span>
<span class="go">col1    category</span>
<span class="go">col2    category</span>
<span class="go">col3    category</span>
<span class="go">Length: 3, dtype: object</span>

<span class="gp">In [34]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">]</span>
<span class="gh">Out[34]: </span><span class="go"></span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Name: col3, Length: 3, dtype: category</span>
<span class="go">Categories (3, object): [1, 2, 3]</span>

<span class="gp">In [35]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cat</span><span class="o">.</span><span class="n">categories</span><span class="p">)</span>

<span class="gp">In [36]: </span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;col3&#39;</span><span class="p">]</span>
<span class="gh">Out[36]: </span><span class="go"></span>
<span class="go">0    1</span>
<span class="go">1    2</span>
<span class="go">2    3</span>
<span class="go">Name: col3, Length: 3, dtype: category</span>
<span class="go">Categories (3, int64): [1, 2, 3]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="categorical-concatenation">
<span id="whatsnew-0190-enhancements-union-categoricals"></span><h3>Categorical concatenation<a class="headerlink" href="#categorical-concatenation" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>A function <code class="xref py py-func docutils literal notranslate"><span class="pre">union_categoricals()</span></code> has been added for combining categoricals, see <a class="reference internal" href="../user_guide/categorical.html#categorical-union"><span class="std std-ref">Unioning Categoricals</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13361">GH13361</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13763">GH13763</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13846">GH13846</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14173">GH14173</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [37]: </span><span class="kn">from</span> <span class="nn">pandas.api.types</span> <span class="kn">import</span> <span class="n">union_categoricals</span>

<span class="gp">In [38]: </span><span class="n">a</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">])</span>

<span class="gp">In [39]: </span><span class="n">b</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">])</span>

<span class="gp">In [40]: </span><span class="n">union_categoricals</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">])</span>
<span class="gh">Out[40]: </span><span class="go"></span>
<span class="go">[b, c, a, b]</span>
<span class="go">Categories (3, object): [b, c, a]</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">concat</span></code> and <code class="docutils literal notranslate"><span class="pre">append</span></code> now can concat <code class="docutils literal notranslate"><span class="pre">category</span></code> dtypes with different <code class="docutils literal notranslate"><span class="pre">categories</span></code> as <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13524">GH13524</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [41]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>

<span class="gp">In [42]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;category&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">])</span>
<span class="go">ValueError: incompatible categories in categorical concat</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [43]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">s1</span><span class="p">,</span> <span class="n">s2</span><span class="p">])</span>
<span class="gh">Out[43]: </span><span class="go"></span>
<span class="go">0    a</span>
<span class="go">1    b</span>
<span class="go">0    b</span>
<span class="go">1    c</span>
<span class="go">Length: 4, dtype: object</span>
</pre></div>
</div>
</div>
<div class="section" id="semi-month-offsets">
<span id="whatsnew-0190-enhancements-semi-month-offsets"></span><h3>Semi-month offsets<a class="headerlink" href="#semi-month-offsets" title="Permalink to this headline">¶</a></h3>
<p>Pandas has gained new frequency offsets, <code class="docutils literal notranslate"><span class="pre">SemiMonthEnd</span></code> (‘SM’) and <code class="docutils literal notranslate"><span class="pre">SemiMonthBegin</span></code> (‘SMS’).
These provide date offsets anchored (by default) to the 15th and end of month, and 15th and 1st of month respectively.
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1543">GH1543</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [44]: </span><span class="kn">from</span> <span class="nn">pandas.tseries.offsets</span> <span class="kn">import</span> <span class="n">SemiMonthEnd</span><span class="p">,</span> <span class="n">SemiMonthBegin</span>
</pre></div>
</div>
<p><strong>SemiMonthEnd</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [45]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2016-01-01&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">SemiMonthEnd</span><span class="p">()</span>
<span class="gh">Out[45]: </span><span class="go">Timestamp(&#39;2016-01-15 00:00:00&#39;)</span>

<span class="gp">In [46]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;SM&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gh">Out[46]: </span><span class="go">DatetimeIndex([&#39;2015-01-15&#39;, &#39;2015-01-31&#39;, &#39;2015-02-15&#39;, &#39;2015-02-28&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;SM-15&#39;)</span>
</pre></div>
</div>
<p><strong>SemiMonthBegin</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [47]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2016-01-01&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">SemiMonthBegin</span><span class="p">()</span>
<span class="gh">Out[47]: </span><span class="go">Timestamp(&#39;2016-01-15 00:00:00&#39;)</span>

<span class="gp">In [48]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;SMS&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gh">Out[48]: </span><span class="go">DatetimeIndex([&#39;2015-01-01&#39;, &#39;2015-01-15&#39;, &#39;2015-02-01&#39;, &#39;2015-02-15&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;SMS-15&#39;)</span>
</pre></div>
</div>
<p>Using the anchoring suffix, you can also specify the day of month to use instead of the 15th.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [49]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;SMS-16&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gh">Out[49]: </span><span class="go">DatetimeIndex([&#39;2015-01-01&#39;, &#39;2015-01-16&#39;, &#39;2015-02-01&#39;, &#39;2015-02-16&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;SMS-16&#39;)</span>

<span class="gp">In [50]: </span><span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;SM-14&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gh">Out[50]: </span><span class="go">DatetimeIndex([&#39;2015-01-14&#39;, &#39;2015-01-31&#39;, &#39;2015-02-14&#39;, &#39;2015-02-28&#39;], dtype=&#39;datetime64[ns]&#39;, freq=&#39;SM-14&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="new-index-methods">
<span id="whatsnew-0190-enhancements-index"></span><h3>New Index methods<a class="headerlink" href="#new-index-methods" title="Permalink to this headline">¶</a></h3>
<p>The following methods and options are added to <code class="docutils literal notranslate"><span class="pre">Index</span></code>, to be more consistent with the <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> API.</p>
<p><code class="docutils literal notranslate"><span class="pre">Index</span></code> now supports the <code class="docutils literal notranslate"><span class="pre">.where()</span></code> function for same shape indexing (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13170">GH13170</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [51]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="gp">In [52]: </span><span class="n">idx</span><span class="o">.</span><span class="n">where</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">])</span>
<span class="gh">Out[52]: </span><span class="go">Index([&#39;a&#39;, nan, &#39;c&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Index</span></code> now supports <code class="docutils literal notranslate"><span class="pre">.dropna()</span></code> to exclude missing values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6194">GH6194</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [53]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="gp">In [54]: </span><span class="n">idx</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="gh">Out[54]: </span><span class="go">Float64Index([1.0, 2.0, 4.0], dtype=&#39;float64&#39;)</span>
</pre></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code>, values are dropped if any level is missing by default. Specifying
<code class="docutils literal notranslate"><span class="pre">how='all'</span></code> only drops values where all levels are missing.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [55]: </span><span class="n">midx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
<span class="gp">   ....: </span>                                  <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">]])</span>
<span class="gp">   ....: </span>

<span class="gp">In [56]: </span><span class="n">midx</span>
<span class="gh">Out[56]: </span><span class="go"></span>
<span class="go">MultiIndex([(1.0, 1.0),</span>
<span class="go">            (2.0, 2.0),</span>
<span class="go">            (nan, nan),</span>
<span class="go">            (4.0, nan)],</span>
<span class="go">           )</span>

<span class="gp">In [57]: </span><span class="n">midx</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
<span class="gh">Out[57]: </span><span class="go"></span>
<span class="go">MultiIndex([(1, 1),</span>
<span class="go">            (2, 2)],</span>
<span class="go">           )</span>

<span class="gp">In [58]: </span><span class="n">midx</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">)</span>
<span class="gh">Out[58]: </span><span class="go"></span>
<span class="go">MultiIndex([(1, 1.0),</span>
<span class="go">            (2, 2.0),</span>
<span class="go">            (4, nan)],</span>
<span class="go">           )</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Index</span></code> now supports <code class="docutils literal notranslate"><span class="pre">.str.extractall()</span></code> which returns a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, see the <a class="reference internal" href="../user_guide/text.html#text-extractall"><span class="std std-ref">docs here</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10008">GH10008</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13156">GH13156</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [59]: </span><span class="n">idx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s2">&quot;a1a2&quot;</span><span class="p">,</span> <span class="s2">&quot;b1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">])</span>

<span class="gp">In [60]: </span><span class="n">idx</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[ab](?P&lt;digit&gt;\d)&quot;</span><span class="p">)</span>
<span class="gh">Out[60]: </span><span class="go"></span>
<span class="go">        digit</span>
<span class="go">  match      </span>
<span class="go">0 0         1</span>
<span class="go">  1         2</span>
<span class="go">1 0         1</span>

<span class="go">[3 rows x 1 columns]</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Index.astype()</span></code> now accepts an optional boolean argument <code class="docutils literal notranslate"><span class="pre">copy</span></code>, which allows optional copying if the requirements on dtype are satisfied (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13209">GH13209</a>)</p>
</div>
<div class="section" id="google-bigquery-enhancements">
<span id="whatsnew-0190-gbq"></span><h3>Google BigQuery Enhancements<a class="headerlink" href="#google-bigquery-enhancements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">read_gbq()</span></code> method has gained the <code class="docutils literal notranslate"><span class="pre">dialect</span></code> argument to allow users to specify whether to use BigQuery’s legacy SQL or BigQuery’s standard SQL. See the <a class="reference external" href="https://pandas-gbq.readthedocs.io/en/latest/reading.html">docs</a> for more details (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13615">GH13615</a>).</p></li>
<li><p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">to_gbq()</span></code> method now allows the DataFrame column order to differ from the destination table schema (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11359">GH11359</a>).</p></li>
</ul>
</div>
<div class="section" id="fine-grained-numpy-errstate">
<span id="whatsnew-0190-errstate"></span><h3>Fine-grained numpy errstate<a class="headerlink" href="#fine-grained-numpy-errstate" title="Permalink to this headline">¶</a></h3>
<p>Previous versions of pandas would permanently silence numpy’s ufunc error handling when <code class="docutils literal notranslate"><span class="pre">pandas</span></code> was imported. Pandas did this in order to silence the warnings that would arise from using numpy ufuncs on missing data, which are usually represented as <code class="docutils literal notranslate"><span class="pre">NaN</span></code> s. Unfortunately, this silenced legitimate warnings arising in non-pandas code in the application. Starting with 0.19.0, pandas will use the <code class="docutils literal notranslate"><span class="pre">numpy.errstate</span></code> context manager to silence these warnings in a more fine-grained manner, only around where these operations are actually used in the pandas code base. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13109">GH13109</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13145">GH13145</a>)</p>
<p>After upgrading pandas, you may see <em>new</em> <code class="docutils literal notranslate"><span class="pre">RuntimeWarnings</span></code> being issued from your code. These are likely legitimate, and the underlying cause likely existed in the code when using previous versions of pandas that simply silenced the warning. Use <a class="reference external" href="http://docs.scipy.org/doc/numpy/reference/generated/numpy.errstate.html">numpy.errstate</a> around the source of the <code class="docutils literal notranslate"><span class="pre">RuntimeWarning</span></code> to control how these conditions are handled.</p>
</div>
<div class="section" id="get-dummies-now-returns-integer-dtypes">
<span id="whatsnew-0190-get-dummies-dtypes"></span><h3><code class="docutils literal notranslate"><span class="pre">get_dummies</span></code> now returns integer dtypes<a class="headerlink" href="#get-dummies-now-returns-integer-dtypes" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pd.get_dummies</span></code> function now returns dummy-encoded columns as small integers, rather than floats (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8725">GH8725</a>). This should provide an improved memory footprint.</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dtypes</span>

<span class="gh">Out[1]:</span>
<span class="go">a    float64</span>
<span class="go">b    float64</span>
<span class="go">c    float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [61]: </span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[61]: </span><span class="go"></span>
<span class="go">a    uint8</span>
<span class="go">b    uint8</span>
<span class="go">c    uint8</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
</div>
<div class="section" id="downcast-values-to-smallest-possible-dtype-in-to-numeric">
<span id="whatsnew-0190-enhancements-to-numeric-downcast"></span><h3>Downcast values to smallest possible dtype in <code class="docutils literal notranslate"><span class="pre">to_numeric</span></code><a class="headerlink" href="#downcast-values-to-smallest-possible-dtype-in-to-numeric" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pd.to_numeric()</span></code> now accepts a <code class="docutils literal notranslate"><span class="pre">downcast</span></code> parameter, which will downcast the data if possible to smallest specified numerical dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13352">GH13352</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [62]: </span><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="gp">In [63]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">downcast</span><span class="o">=</span><span class="s1">&#39;unsigned&#39;</span><span class="p">)</span>
<span class="gh">Out[63]: </span><span class="go">array([1, 2, 3], dtype=uint8)</span>

<span class="gp">In [64]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">downcast</span><span class="o">=</span><span class="s1">&#39;integer&#39;</span><span class="p">)</span>
<span class="gh">Out[64]: </span><span class="go">array([1, 2, 3], dtype=int8)</span>
</pre></div>
</div>
</div>
<div class="section" id="pandas-development-api">
<span id="whatsnew-0190-dev-api"></span><h3>pandas development API<a class="headerlink" href="#pandas-development-api" title="Permalink to this headline">¶</a></h3>
<p>As part of making pandas API more uniform and accessible in the future, we have created a standard
sub-package of pandas, <code class="docutils literal notranslate"><span class="pre">pandas.api</span></code> to hold public API’s. We are starting by exposing type
introspection functions in <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code>. More sub-packages and officially sanctioned API’s
will be published in future versions of pandas (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13147">GH13147</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13634">GH13634</a>)</p>
<p>The following are now part of this API:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [65]: </span><span class="kn">import</span> <span class="nn">pprint</span>

<span class="gp">In [66]: </span><span class="kn">from</span> <span class="nn">pandas.api</span> <span class="kn">import</span> <span class="n">types</span>

<span class="gp">In [67]: </span><span class="n">funcs</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">types</span><span class="p">)</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)]</span>

<span class="gp">In [68]: </span><span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="n">funcs</span><span class="p">)</span>
<span class="go">[&#39;CategoricalDtype&#39;,</span>
<span class="go"> &#39;DatetimeTZDtype&#39;,</span>
<span class="go"> &#39;IntervalDtype&#39;,</span>
<span class="go"> &#39;PeriodDtype&#39;,</span>
<span class="go"> &#39;infer_dtype&#39;,</span>
<span class="go"> &#39;is_array_like&#39;,</span>
<span class="go"> &#39;is_bool&#39;,</span>
<span class="go"> &#39;is_bool_dtype&#39;,</span>
<span class="go"> &#39;is_categorical&#39;,</span>
<span class="go"> &#39;is_categorical_dtype&#39;,</span>
<span class="go"> &#39;is_complex&#39;,</span>
<span class="go"> &#39;is_complex_dtype&#39;,</span>
<span class="go"> &#39;is_datetime64_any_dtype&#39;,</span>
<span class="go"> &#39;is_datetime64_dtype&#39;,</span>
<span class="go"> &#39;is_datetime64_ns_dtype&#39;,</span>
<span class="go"> &#39;is_datetime64tz_dtype&#39;,</span>
<span class="go"> &#39;is_dict_like&#39;,</span>
<span class="go"> &#39;is_dtype_equal&#39;,</span>
<span class="go"> &#39;is_extension_array_dtype&#39;,</span>
<span class="go"> &#39;is_extension_type&#39;,</span>
<span class="go"> &#39;is_file_like&#39;,</span>
<span class="go"> &#39;is_float&#39;,</span>
<span class="go"> &#39;is_float_dtype&#39;,</span>
<span class="go"> &#39;is_hashable&#39;,</span>
<span class="go"> &#39;is_int64_dtype&#39;,</span>
<span class="go"> &#39;is_integer&#39;,</span>
<span class="go"> &#39;is_integer_dtype&#39;,</span>
<span class="go"> &#39;is_interval&#39;,</span>
<span class="go"> &#39;is_interval_dtype&#39;,</span>
<span class="go"> &#39;is_iterator&#39;,</span>
<span class="go"> &#39;is_list_like&#39;,</span>
<span class="go"> &#39;is_named_tuple&#39;,</span>
<span class="go"> &#39;is_number&#39;,</span>
<span class="go"> &#39;is_numeric_dtype&#39;,</span>
<span class="go"> &#39;is_object_dtype&#39;,</span>
<span class="go"> &#39;is_period_dtype&#39;,</span>
<span class="go"> &#39;is_re&#39;,</span>
<span class="go"> &#39;is_re_compilable&#39;,</span>
<span class="go"> &#39;is_scalar&#39;,</span>
<span class="go"> &#39;is_signed_integer_dtype&#39;,</span>
<span class="go"> &#39;is_sparse&#39;,</span>
<span class="go"> &#39;is_string_dtype&#39;,</span>
<span class="go"> &#39;is_timedelta64_dtype&#39;,</span>
<span class="go"> &#39;is_timedelta64_ns_dtype&#39;,</span>
<span class="go"> &#39;is_unsigned_integer_dtype&#39;,</span>
<span class="go"> &#39;pandas_dtype&#39;,</span>
<span class="go"> &#39;union_categoricals&#39;]</span>
</pre></div>
</div>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p>Calling these functions from the internal module <code class="docutils literal notranslate"><span class="pre">pandas.core.common</span></code> will now show a <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13990">GH13990</a>)</p>
</div>
</div>
<div class="section" id="other-enhancements">
<span id="whatsnew-0190-enhancements-other"></span><h3>Other enhancements<a class="headerlink" href="#other-enhancements" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> can now accept positional and keyword parameters similar to <code class="xref py py-func docutils literal notranslate"><span class="pre">datetime.datetime()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10758">GH10758</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11630">GH11630</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [69]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="mi">2012</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[69]: </span><span class="go">Timestamp(&#39;2012-01-01 00:00:00&#39;)</span>

<span class="gp">In [70]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2012</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hour</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">minute</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="gh">Out[70]: </span><span class="go">Timestamp(&#39;2012-01-01 08:30:00&#39;)</span>
</pre></div>
</div>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.resample()</span></code> function now accepts a <code class="docutils literal notranslate"><span class="pre">on=</span></code> or <code class="docutils literal notranslate"><span class="pre">level=</span></code> parameter for resampling on a datetimelike column or <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> level (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13500">GH13500</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [71]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
<span class="gp">   ....: </span>                   <span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)},</span>
<span class="gp">   ....: </span>                  <span class="n">index</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
<span class="gp">   ....: </span>                                                   <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                                 <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;W&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>                                                                 <span class="n">periods</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">   ....: </span>                                                   <span class="p">],</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">]))</span>
<span class="gp">   ....: </span>

<span class="gp">In [72]: </span><span class="n">df</span>
<span class="gh">Out[72]: </span><span class="go"></span>
<span class="go">                   date  a</span>
<span class="go">v d                       </span>
<span class="go">1 2015-01-04 2015-01-04  0</span>
<span class="go">2 2015-01-11 2015-01-11  1</span>
<span class="go">3 2015-01-18 2015-01-18  2</span>
<span class="go">4 2015-01-25 2015-01-25  3</span>
<span class="go">5 2015-02-01 2015-02-01  4</span>

<span class="go">[5 rows x 2 columns]</span>

<span class="gp">In [73]: </span><span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;date&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[73]: </span><span class="go"></span>
<span class="go">            a</span>
<span class="go">date         </span>
<span class="go">2015-01-31  6</span>
<span class="go">2015-02-28  4</span>

<span class="go">[2 rows x 1 columns]</span>

<span class="gp">In [74]: </span><span class="n">df</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">,</span> <span class="n">level</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="gh">Out[74]: </span><span class="go"></span>
<span class="go">            a</span>
<span class="go">d            </span>
<span class="go">2015-01-31  6</span>
<span class="go">2015-02-28  4</span>

<span class="go">[2 rows x 1 columns]</span>
</pre></div>
</div>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.get_credentials()</span></code> method of <code class="docutils literal notranslate"><span class="pre">GbqConnector</span></code> can now first try to fetch <a class="reference external" href="https://developers.google.com/identity/protocols/application-default-credentials">the application default credentials</a>. See the docs for more details (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13577">GH13577</a>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.tz_localize()</span></code> method of <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> has gained the <code class="docutils literal notranslate"><span class="pre">errors</span></code> keyword, so you can potentially coerce nonexistent timestamps to <code class="docutils literal notranslate"><span class="pre">NaT</span></code>. The default behavior remains to raising a <code class="docutils literal notranslate"><span class="pre">NonExistentTimeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13057">GH13057</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_hdf/read_hdf()</span></code> now accept path objects (e.g. <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code>, <code class="docutils literal notranslate"><span class="pre">py.path.local</span></code>) for the file path (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11773">GH11773</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">engine='python'</span></code> has gained support for the
<code class="docutils literal notranslate"><span class="pre">decimal</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12933">GH12933</a>), <code class="docutils literal notranslate"><span class="pre">na_filter</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13321">GH13321</a>) and the <code class="docutils literal notranslate"><span class="pre">memory_map</span></code> option (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13381">GH13381</a>).</p></li>
<li><p>Consistent with the Python API, <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> will now interpret <code class="docutils literal notranslate"><span class="pre">+inf</span></code> as positive infinity (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13274">GH13274</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pd.read_html()</span></code> has gained support for the <code class="docutils literal notranslate"><span class="pre">na_values</span></code>, <code class="docutils literal notranslate"><span class="pre">converters</span></code>, <code class="docutils literal notranslate"><span class="pre">keep_default_na</span></code>  options (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13461">GH13461</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.astype()</span></code> now accepts an optional boolean argument <code class="docutils literal notranslate"><span class="pre">copy</span></code>, effective when dtype is categorical (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13209">GH13209</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> has gained the <code class="docutils literal notranslate"><span class="pre">.asof()</span></code> method to return the last non-NaN values according to the selected subset (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13358">GH13358</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> constructor will now respect key ordering if a list of <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code> objects are passed in (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13304">GH13304</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_html()</span></code> has gained support for the <code class="docutils literal notranslate"><span class="pre">decimal</span></code> option (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12907">GH12907</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> has gained the properties <code class="docutils literal notranslate"><span class="pre">.is_monotonic</span></code>, <code class="docutils literal notranslate"><span class="pre">.is_monotonic_increasing</span></code>, <code class="docutils literal notranslate"><span class="pre">.is_monotonic_decreasing</span></code>, similar to <code class="docutils literal notranslate"><span class="pre">Index</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13336">GH13336</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code> now allows a single value as the SQL type for all columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11886">GH11886</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.append</span></code> now supports the <code class="docutils literal notranslate"><span class="pre">ignore_index</span></code> option (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13677">GH13677</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_stata()</span></code> and <code class="docutils literal notranslate"><span class="pre">StataWriter</span></code> can now write variable labels to Stata dta files using a dictionary to make column names to labels (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13535">GH13535</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13536">GH13536</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_stata()</span></code> and <code class="docutils literal notranslate"><span class="pre">StataWriter</span></code> will automatically convert <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> columns to Stata format <code class="docutils literal notranslate"><span class="pre">%tc</span></code>, rather than raising a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12259">GH12259</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_stata()</span></code> and <code class="docutils literal notranslate"><span class="pre">StataReader</span></code> raise with a more explicit error message when reading Stata files with repeated value labels when <code class="docutils literal notranslate"><span class="pre">convert_categoricals=True</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13923">GH13923</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.style</span></code> will now render sparsified MultiIndexes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11655">GH11655</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.style</span></code> will now show column level names (e.g. <code class="docutils literal notranslate"><span class="pre">DataFrame.columns.names</span></code>) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13775">GH13775</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> has gained support to re-order the columns based on the values
in a row using <code class="docutils literal notranslate"><span class="pre">df.sort_values(by='...',</span> <span class="pre">axis=1)</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10806">GH10806</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [75]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]},</span>
<span class="gp">   ....: </span>                  <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;row1&#39;</span><span class="p">,</span> <span class="s1">&#39;row2&#39;</span><span class="p">])</span>
<span class="gp">   ....: </span>

<span class="gp">In [76]: </span><span class="n">df</span>
<span class="gh">Out[76]: </span><span class="go"></span>
<span class="go">      A  B  C</span>
<span class="go">row1  2  3  4</span>
<span class="go">row2  7  5  8</span>

<span class="go">[2 rows x 3 columns]</span>

<span class="gp">In [77]: </span><span class="n">df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;row2&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gh">Out[77]: </span><span class="go"></span>
<span class="go">      B  A  C</span>
<span class="go">row1  3  2  4</span>
<span class="go">row2  5  7  8</span>

<span class="go">[2 rows x 3 columns]</span>
</pre></div>
</div>
</li>
<li><p>Added documentation to <a class="reference internal" href="../user_guide/io.html#io-dtypes"><span class="std std-ref">I/O</span></a> regarding the perils of reading in columns with mixed dtypes and how to handle it (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13746">GH13746</a>)</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">to_html()</span></code> now has a <code class="docutils literal notranslate"><span class="pre">border</span></code> argument to control the value in the opening <code class="docutils literal notranslate"><span class="pre">&lt;table&gt;</span></code> tag. The default is the value of the <code class="docutils literal notranslate"><span class="pre">html.border</span></code> option, which defaults to 1. This also affects the notebook HTML repr, but since Jupyter’s CSS includes a border-width attribute, the visual effect is the same. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11563">GH11563</a>).</p></li>
<li><p>Raise <code class="docutils literal notranslate"><span class="pre">ImportError</span></code> in the sql functions when <code class="docutils literal notranslate"><span class="pre">sqlalchemy</span></code> is not installed and a connection string is used (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11920">GH11920</a>).</p></li>
<li><p>Compatibility with matplotlib 2.0. Older versions of pandas should also work with matplotlib 2.0 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13333">GH13333</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp</span></code>, <code class="docutils literal notranslate"><span class="pre">Period</span></code>, <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>, <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">.dt</span></code> accessor have gained a <code class="docutils literal notranslate"><span class="pre">.is_leap_year</span></code> property to check whether the date belongs to a leap year. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13727">GH13727</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astype()</span></code> will now accept a dict of column name to data types mapping as the <code class="docutils literal notranslate"><span class="pre">dtype</span></code> argument. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12086">GH12086</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pd.read_json</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.to_json</span></code> has gained support for reading and writing json lines with <code class="docutils literal notranslate"><span class="pre">lines</span></code> option see <a class="reference internal" href="../user_guide/io.html#io-jsonl"><span class="std std-ref">Line delimited json</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9180">GH9180</a>)</p></li>
<li><p><code class="xref py py-func docutils literal notranslate"><span class="pre">read_excel()</span></code> now supports the true_values and false_values keyword arguments (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13347">GH13347</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groupby()</span></code> will now accept a scalar and a single-element list for specifying <code class="docutils literal notranslate"><span class="pre">level</span></code> on a non-<code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> grouper. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13907">GH13907</a>)</p></li>
<li><p>Non-convertible dates in an excel date column will be returned without conversion and the column will be <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype, rather than raising an exception (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10001">GH10001</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.Timedelta(None)</span></code> is now accepted and will return <code class="docutils literal notranslate"><span class="pre">NaT</span></code>, mirroring <code class="docutils literal notranslate"><span class="pre">pd.Timestamp</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13687">GH13687</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_stata()</span></code> can now handle some format 111 files, which are produced by SAS when generating Stata dta files (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11526">GH11526</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">Index</span></code> now support <code class="docutils literal notranslate"><span class="pre">divmod</span></code> which will return a tuple of
series or indices. This behaves like a standard binary operator with regards
to broadcasting rules (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14208">GH14208</a>).</p></li>
</ul>
</div>
</div>
<div class="section" id="api-changes">
<span id="whatsnew-0190-api"></span><h2>API changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="series-tolist-will-now-return-python-types">
<h3><code class="docutils literal notranslate"><span class="pre">Series.tolist()</span></code> will now return Python types<a class="headerlink" href="#series-tolist-will-now-return-python-types" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Series.tolist()</span></code> will now return Python types in the output, mimicking NumPy <code class="docutils literal notranslate"><span class="pre">.tolist()</span></code> behavior (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10904">GH10904</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [78]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[7]:</span>
<span class="go"> &lt;class &#39;numpy.int64&#39;&gt;</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [79]: </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[79]: </span><span class="go">int</span>
</pre></div>
</div>
</div>
<div class="section" id="series-operators-for-different-indexes">
<span id="whatsnew-0190-api-series-ops"></span><h3><code class="docutils literal notranslate"><span class="pre">Series</span></code> operators for different indexes<a class="headerlink" href="#series-operators-for-different-indexes" title="Permalink to this headline">¶</a></h3>
<p>Following <code class="docutils literal notranslate"><span class="pre">Series</span></code> operators have been changed to make all operators consistent,
including <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/1134">GH1134</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4581">GH4581</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13538">GH13538</a>)</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> comparison operators now raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when <code class="docutils literal notranslate"><span class="pre">index</span></code> are different.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series</span></code> logical operators align both <code class="docutils literal notranslate"><span class="pre">index</span></code> of left and right hand side.</p></li>
</ul>
<div class="alert alert-warning">
<p class="admonition-title">Warning</p>
<p>Until 0.18.1, comparing <code class="docutils literal notranslate"><span class="pre">Series</span></code> with the same length, would succeed even if
the <code class="docutils literal notranslate"><span class="pre">.index</span></code> are different (the result ignores <code class="docutils literal notranslate"><span class="pre">.index</span></code>). As of 0.19.0, this will raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> to be more strict. This section also describes how to keep previous behavior or align different indexes, using the flexible comparison methods like <code class="docutils literal notranslate"><span class="pre">.eq</span></code>.</p>
</div>
<p>As a result, <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> operators behave as below:</p>
<div class="section" id="arithmetic-operators">
<h4>Arithmetic operators<a class="headerlink" href="#arithmetic-operators" title="Permalink to this headline">¶</a></h4>
<p>Arithmetic operators align both <code class="docutils literal notranslate"><span class="pre">index</span></code> (no changes).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [80]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">))</span>

<span class="gp">In [81]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABD&#39;</span><span class="p">))</span>

<span class="gp">In [82]: </span><span class="n">s1</span> <span class="o">+</span> <span class="n">s2</span>
<span class="gh">Out[82]: </span><span class="go"></span>
<span class="go">A    3.0</span>
<span class="go">B    4.0</span>
<span class="go">C    NaN</span>
<span class="go">D    NaN</span>
<span class="go">Length: 4, dtype: float64</span>

<span class="gp">In [83]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">))</span>

<span class="gp">In [84]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABD&#39;</span><span class="p">))</span>

<span class="gp">In [85]: </span><span class="n">df1</span> <span class="o">+</span> <span class="n">df2</span>
<span class="gh">Out[85]: </span><span class="go"></span>
<span class="go">     0</span>
<span class="go">A  3.0</span>
<span class="go">B  4.0</span>
<span class="go">C  NaN</span>
<span class="go">D  NaN</span>

<span class="go">[4 rows x 1 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="comparison-operators">
<h4>Comparison operators<a class="headerlink" href="#comparison-operators" title="Permalink to this headline">¶</a></h4>
<p>Comparison operators raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when <code class="docutils literal notranslate"><span class="pre">.index</span></code> are different.</p>
<p><strong>Previous behavior</strong> (<code class="docutils literal notranslate"><span class="pre">Series</span></code>):</p>
<p><code class="docutils literal notranslate"><span class="pre">Series</span></code> compared values ignoring the <code class="docutils literal notranslate"><span class="pre">.index</span></code> as long as both had the same length:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span>
<span class="gh">Out[1]:</span>
<span class="go">A    False</span>
<span class="go">B     True</span>
<span class="go">C    False</span>
<span class="go">dtype: bool</span>
</pre></div>
</div>
<p><strong>New behavior</strong> (<code class="docutils literal notranslate"><span class="pre">Series</span></code>):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">s1</span> <span class="o">==</span> <span class="n">s2</span>
<span class="gh">Out[2]:</span>
<span class="go">ValueError: Can only compare identically-labeled Series objects</span>
</pre></div>
</div>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p>To achieve the same result as previous versions (compare values based on locations ignoring <code class="docutils literal notranslate"><span class="pre">.index</span></code>), compare both <code class="docutils literal notranslate"><span class="pre">.values</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [86]: </span><span class="n">s1</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="n">s2</span><span class="o">.</span><span class="n">values</span>
<span class="gh">Out[86]: </span><span class="go">array([False,  True, False])</span>
</pre></div>
</div>
<p>If you want to compare <code class="docutils literal notranslate"><span class="pre">Series</span></code> aligning its <code class="docutils literal notranslate"><span class="pre">.index</span></code>, see flexible comparison methods section below:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [87]: </span><span class="n">s1</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
<span class="gh">Out[87]: </span><span class="go"></span>
<span class="go">A    False</span>
<span class="go">B     True</span>
<span class="go">C    False</span>
<span class="go">D    False</span>
<span class="go">Length: 4, dtype: bool</span>
</pre></div>
</div>
</div>
<p><strong>Current behavior</strong> (<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, no change):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">df1</span> <span class="o">==</span> <span class="n">df2</span>
<span class="gh">Out[3]:</span>
<span class="go">ValueError: Can only compare identically-labeled DataFrame objects</span>
</pre></div>
</div>
</div>
<div class="section" id="logical-operators">
<h4>Logical operators<a class="headerlink" href="#logical-operators" title="Permalink to this headline">¶</a></h4>
<p>Logical operators align both <code class="docutils literal notranslate"><span class="pre">.index</span></code> of left and right hand side.</p>
<p><strong>Previous behavior</strong> (<code class="docutils literal notranslate"><span class="pre">Series</span></code>), only left hand side <code class="docutils literal notranslate"><span class="pre">index</span></code> was kept:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">))</span>
<span class="gp">In [5]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABD&#39;</span><span class="p">))</span>
<span class="gp">In [6]: </span><span class="n">s1</span> <span class="o">&amp;</span> <span class="n">s2</span>
<span class="gh">Out[6]:</span>
<span class="go">A     True</span>
<span class="go">B    False</span>
<span class="go">C    False</span>
<span class="go">dtype: bool</span>
</pre></div>
</div>
<p><strong>New behavior</strong> (<code class="docutils literal notranslate"><span class="pre">Series</span></code>):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [88]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">))</span>

<span class="gp">In [89]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABD&#39;</span><span class="p">))</span>

<span class="gp">In [90]: </span><span class="n">s1</span> <span class="o">&amp;</span> <span class="n">s2</span>
<span class="gh">Out[90]: </span><span class="go"></span>
<span class="go">A     True</span>
<span class="go">B    False</span>
<span class="go">C    False</span>
<span class="go">D    False</span>
<span class="go">Length: 4, dtype: bool</span>
</pre></div>
</div>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Series</span></code> logical operators fill a <code class="docutils literal notranslate"><span class="pre">NaN</span></code> result with <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p>To achieve the same result as previous versions (compare values based on only left hand side index), you can use <code class="docutils literal notranslate"><span class="pre">reindex_like</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [91]: </span><span class="n">s1</span> <span class="o">&amp;</span> <span class="n">s2</span><span class="o">.</span><span class="n">reindex_like</span><span class="p">(</span><span class="n">s1</span><span class="p">)</span>
<span class="gh">Out[91]: </span><span class="go"></span>
<span class="go">A     True</span>
<span class="go">B    False</span>
<span class="go">C    False</span>
<span class="go">Length: 3, dtype: bool</span>
</pre></div>
</div>
</div>
<p><strong>Current behavior</strong> (<code class="docutils literal notranslate"><span class="pre">DataFrame</span></code>, no change):</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [92]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABC&#39;</span><span class="p">))</span>

<span class="gp">In [93]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="bp">True</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABD&#39;</span><span class="p">))</span>

<span class="gp">In [94]: </span><span class="n">df1</span> <span class="o">&amp;</span> <span class="n">df2</span>
<span class="gh">Out[94]: </span><span class="go"></span>
<span class="go">       0</span>
<span class="go">A   True</span>
<span class="go">B  False</span>
<span class="go">C  False</span>
<span class="go">D  False</span>

<span class="go">[4 rows x 1 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="flexible-comparison-methods">
<h4>Flexible comparison methods<a class="headerlink" href="#flexible-comparison-methods" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Series</span></code> flexible comparison methods like <code class="docutils literal notranslate"><span class="pre">eq</span></code>, <code class="docutils literal notranslate"><span class="pre">ne</span></code>, <code class="docutils literal notranslate"><span class="pre">le</span></code>, <code class="docutils literal notranslate"><span class="pre">lt</span></code>, <code class="docutils literal notranslate"><span class="pre">ge</span></code> and <code class="docutils literal notranslate"><span class="pre">gt</span></code> now align both <code class="docutils literal notranslate"><span class="pre">index</span></code>. Use these operators if you want to compare two <code class="docutils literal notranslate"><span class="pre">Series</span></code>
which has the different <code class="docutils literal notranslate"><span class="pre">index</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [95]: </span><span class="n">s1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="gp">In [96]: </span><span class="n">s2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>

<span class="gp">In [97]: </span><span class="n">s1</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
<span class="gh">Out[97]: </span><span class="go"></span>
<span class="go">a    False</span>
<span class="go">b     True</span>
<span class="go">c    False</span>
<span class="go">d    False</span>
<span class="go">Length: 4, dtype: bool</span>

<span class="gp">In [98]: </span><span class="n">s1</span><span class="o">.</span><span class="n">ge</span><span class="p">(</span><span class="n">s2</span><span class="p">)</span>
<span class="gh">Out[98]: </span><span class="go"></span>
<span class="go">a    False</span>
<span class="go">b     True</span>
<span class="go">c     True</span>
<span class="go">d    False</span>
<span class="go">Length: 4, dtype: bool</span>
</pre></div>
</div>
<p>Previously, this worked the same as comparison operators (see above).</p>
</div>
</div>
<div class="section" id="series-type-promotion-on-assignment">
<span id="whatsnew-0190-api-promote"></span><h3><code class="docutils literal notranslate"><span class="pre">Series</span></code> type promotion on assignment<a class="headerlink" href="#series-type-promotion-on-assignment" title="Permalink to this headline">¶</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">Series</span></code> will now correctly promote its dtype for assignment with incompat values to the current dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13234">GH13234</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [99]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2016-01-01&quot;</span><span class="p">)</span>

<span class="gp">In [3]: </span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="go">TypeError: invalid type promotion</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [100]: </span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s2">&quot;2016-01-01&quot;</span><span class="p">)</span>

<span class="gp">In [101]: </span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">3.0</span>

<span class="gp">In [102]: </span><span class="n">s</span>
<span class="gh">Out[102]: </span><span class="go"></span>
<span class="go">a    2016-01-01 00:00:00</span>
<span class="go">b                      3</span>
<span class="go">Length: 2, dtype: object</span>

<span class="gp">In [103]: </span><span class="n">s</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[103]: </span><span class="go">dtype(&#39;O&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="to-datetime-changes">
<span id="whatsnew-0190-api-to-datetime-coerce"></span><h3><code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code> changes<a class="headerlink" href="#to-datetime-changes" title="Permalink to this headline">¶</a></h3>
<p>Previously if <code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code> encountered mixed integers/floats and strings, but no datetimes with <code class="docutils literal notranslate"><span class="pre">errors='coerce'</span></code> it would convert all to <code class="docutils literal notranslate"><span class="pre">NaT</span></code>.</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
<span class="gh">Out[2]: </span><span class="go">DatetimeIndex([&#39;NaT&#39;, &#39;NaT&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p><strong>Current behavior</strong>:</p>
<p>This will now convert integers/floats with the default unit of <code class="docutils literal notranslate"><span class="pre">ns</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [104]: </span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
<span class="gh">Out[104]: </span><span class="go">DatetimeIndex([&#39;1970-01-01 00:00:00.000000001&#39;, &#39;NaT&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p>Bug fixes related to <code class="docutils literal notranslate"><span class="pre">.to_datetime()</span></code>:</p>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_datetime()</span></code> when passing integers or floats, and no <code class="docutils literal notranslate"><span class="pre">unit</span></code> and <code class="docutils literal notranslate"><span class="pre">errors='coerce'</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13180">GH13180</a>).</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_datetime()</span></code> when passing invalid data types (e.g. bool); will now respect the <code class="docutils literal notranslate"><span class="pre">errors</span></code> keyword (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13176">GH13176</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_datetime()</span></code> which overflowed on <code class="docutils literal notranslate"><span class="pre">int8</span></code>, and <code class="docutils literal notranslate"><span class="pre">int16</span></code> dtypes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13451">GH13451</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_datetime()</span></code> raise <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> and the other string is not valid when <code class="docutils literal notranslate"><span class="pre">errors='ignore'</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12424">GH12424</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_datetime()</span></code> did not cast floats correctly when <code class="docutils literal notranslate"><span class="pre">unit</span></code> was specified, resulting in truncated datetime (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13834">GH13834</a>)</p></li>
</ul>
</div>
<div class="section" id="merging-changes">
<span id="whatsnew-0190-api-merging"></span><h3>Merging changes<a class="headerlink" href="#merging-changes" title="Permalink to this headline">¶</a></h3>
<p>Merging will now preserve the dtype of the join keys (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8596">GH8596</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [105]: </span><span class="n">df1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;v1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">]})</span>

<span class="gp">In [106]: </span><span class="n">df1</span>
<span class="gh">Out[106]: </span><span class="go"></span>
<span class="go">   key  v1</span>
<span class="go">0    1  10</span>

<span class="go">[1 rows x 2 columns]</span>

<span class="gp">In [107]: </span><span class="n">df2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;v1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">]})</span>

<span class="gp">In [108]: </span><span class="n">df2</span>
<span class="gh">Out[108]: </span><span class="go"></span>
<span class="go">   key  v1</span>
<span class="go">0    1  20</span>
<span class="go">1    2  30</span>

<span class="go">[2 rows x 2 columns]</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>
<span class="gh">Out[5]:</span>
<span class="go">   key    v1</span>
<span class="go">0  1.0  10.0</span>
<span class="go">1  1.0  20.0</span>
<span class="go">2  2.0  30.0</span>

<span class="gp">In [6]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[6]:</span>
<span class="go">key    float64</span>
<span class="go">v1     float64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<p>We are able to preserve the join keys</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [109]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span>
<span class="gh">Out[109]: </span><span class="go"></span>
<span class="go">   key  v1</span>
<span class="go">0    1  10</span>
<span class="go">1    1  20</span>
<span class="go">2    2  30</span>

<span class="go">[3 rows x 2 columns]</span>

<span class="gp">In [110]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[110]: </span><span class="go"></span>
<span class="go">key    int64</span>
<span class="go">v1     int64</span>
<span class="go">Length: 2, dtype: object</span>
</pre></div>
</div>
<p>Of course if you have missing values that are introduced, then the
resulting dtype will be upcast, which is unchanged from previous.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [111]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">)</span>
<span class="gh">Out[111]: </span><span class="go"></span>
<span class="go">   key  v1_x  v1_y</span>
<span class="go">0    1  10.0    20</span>
<span class="go">1    2   NaN    30</span>

<span class="go">[2 rows x 3 columns]</span>

<span class="gp">In [112]: </span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span> <span class="n">df2</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[112]: </span><span class="go"></span>
<span class="go">key       int64</span>
<span class="go">v1_x    float64</span>
<span class="go">v1_y      int64</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
</div>
<div class="section" id="describe-changes">
<span id="whatsnew-0190-api-describe"></span><h3><code class="docutils literal notranslate"><span class="pre">.describe()</span></code> changes<a class="headerlink" href="#describe-changes" title="Permalink to this headline">¶</a></h3>
<p>Percentile identifiers in the index of a <code class="docutils literal notranslate"><span class="pre">.describe()</span></code> output will now be rounded to the least precision that keeps them distinct (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13104">GH13104</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [113]: </span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="gp">In [114]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<p>The percentiles were rounded to at most one decimal place, which could raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> for a data frame if the percentiles were duplicated.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">s</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.999</span><span class="p">,</span> <span class="mf">0.9995</span><span class="p">,</span> <span class="mf">0.9999</span><span class="p">])</span>
<span class="gh">Out[3]:</span>
<span class="go">count     5.000000</span>
<span class="go">mean      2.000000</span>
<span class="go">std       1.581139</span>
<span class="go">min       0.000000</span>
<span class="go">0.0%      0.000400</span>
<span class="go">0.1%      0.002000</span>
<span class="go">0.1%      0.004000</span>
<span class="go">50%       2.000000</span>
<span class="go">99.9%     3.996000</span>
<span class="go">100.0%    3.998000</span>
<span class="go">100.0%    3.999600</span>
<span class="go">max       4.000000</span>
<span class="go">dtype: float64</span>

<span class="gp">In [4]: </span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.999</span><span class="p">,</span> <span class="mf">0.9995</span><span class="p">,</span> <span class="mf">0.9999</span><span class="p">])</span>
<span class="gh">Out[4]:</span>
<span class="go">...</span>
<span class="go">ValueError: cannot reindex from a duplicate axis</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [115]: </span><span class="n">s</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.999</span><span class="p">,</span> <span class="mf">0.9995</span><span class="p">,</span> <span class="mf">0.9999</span><span class="p">])</span>
<span class="gh">Out[115]: </span><span class="go"></span>
<span class="go">count     5.000000</span>
<span class="go">mean      2.000000</span>
<span class="go">std       1.581139</span>
<span class="go">min       0.000000</span>
<span class="go">0.01%     0.000400</span>
<span class="go">0.05%     0.002000</span>
<span class="go">0.1%      0.004000</span>
<span class="go">50%       2.000000</span>
<span class="go">99.9%     3.996000</span>
<span class="go">99.95%    3.998000</span>
<span class="go">99.99%    3.999600</span>
<span class="go">max       4.000000</span>
<span class="go">Length: 12, dtype: float64</span>

<span class="gp">In [116]: </span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">percentiles</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.0005</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.999</span><span class="p">,</span> <span class="mf">0.9995</span><span class="p">,</span> <span class="mf">0.9999</span><span class="p">])</span>
<span class="gh">Out[116]: </span><span class="go"></span>
<span class="go">               0</span>
<span class="go">count   5.000000</span>
<span class="go">mean    2.000000</span>
<span class="go">std     1.581139</span>
<span class="go">min     0.000000</span>
<span class="go">0.01%   0.000400</span>
<span class="go">0.05%   0.002000</span>
<span class="go">0.1%    0.004000</span>
<span class="go">50%     2.000000</span>
<span class="go">99.9%   3.996000</span>
<span class="go">99.95%  3.998000</span>
<span class="go">99.99%  3.999600</span>
<span class="go">max     4.000000</span>

<span class="go">[12 rows x 1 columns]</span>
</pre></div>
</div>
<p>Furthermore:</p>
<ul class="simple">
<li><p>Passing duplicated <code class="docutils literal notranslate"><span class="pre">percentiles</span></code> will now raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.describe()</span></code> on a DataFrame with a mixed-dtype column index, which would previously raise a <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13288">GH13288</a>)</p></li>
</ul>
</div>
<div class="section" id="period-changes">
<span id="whatsnew-0190-api-period"></span><h3><code class="docutils literal notranslate"><span class="pre">Period</span></code> changes<a class="headerlink" href="#period-changes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="periodindex-now-has-period-dtype">
<h4><code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> now has <code class="docutils literal notranslate"><span class="pre">period</span></code> dtype<a class="headerlink" href="#periodindex-now-has-period-dtype" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> now has its own <code class="docutils literal notranslate"><span class="pre">period</span></code> dtype. The <code class="docutils literal notranslate"><span class="pre">period</span></code> dtype is a
pandas extension dtype like <code class="docutils literal notranslate"><span class="pre">category</span></code> or the <a class="reference internal" href="../user_guide/timeseries.html#timeseries-timezone-series"><span class="std std-ref">timezone aware dtype</span></a> (<code class="docutils literal notranslate"><span class="pre">datetime64[ns,</span> <span class="pre">tz]</span></code>) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13941">GH13941</a>).
As a consequence of this change, <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> no longer has an integer dtype:</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="s1">&#39;2016-08-01&#39;</span><span class="p">],</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [2]: </span><span class="n">pi</span>
<span class="gh">Out[2]: </span><span class="go">PeriodIndex([&#39;2016-08-01&#39;], dtype=&#39;int64&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_integer_dtype</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
<span class="gh">Out[3]: </span><span class="go">True</span>

<span class="gp">In [4]: </span><span class="n">pi</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[4]: </span><span class="go">dtype(&#39;int64&#39;)</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [117]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="s1">&#39;2016-08-01&#39;</span><span class="p">],</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>

<span class="gp">In [118]: </span><span class="n">pi</span>
<span class="gh">Out[118]: </span><span class="go">PeriodIndex([&#39;2016-08-01&#39;], dtype=&#39;period[D]&#39;, freq=&#39;D&#39;)</span>

<span class="gp">In [119]: </span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_integer_dtype</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
<span class="gh">Out[119]: </span><span class="go">False</span>

<span class="gp">In [120]: </span><span class="n">pd</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">is_period_dtype</span><span class="p">(</span><span class="n">pi</span><span class="p">)</span>
<span class="gh">Out[120]: </span><span class="go">True</span>

<span class="gp">In [121]: </span><span class="n">pi</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[121]: </span><span class="go">period[D]</span>

<span class="gp">In [122]: </span><span class="nb">type</span><span class="p">(</span><span class="n">pi</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="gh">Out[122]: </span><span class="go">pandas.core.dtypes.dtypes.PeriodDtype</span>
</pre></div>
</div>
</div>
<div class="section" id="period-nat-now-returns-pd-nat">
<span id="whatsnew-0190-api-periodnat"></span><h4><code class="docutils literal notranslate"><span class="pre">Period('NaT')</span></code> now returns <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code><a class="headerlink" href="#period-nat-now-returns-pd-nat" title="Permalink to this headline">¶</a></h4>
<p>Previously, <code class="docutils literal notranslate"><span class="pre">Period</span></code> has its own <code class="docutils literal notranslate"><span class="pre">Period('NaT')</span></code> representation different from <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code>. Now <code class="docutils literal notranslate"><span class="pre">Period('NaT')</span></code> has been changed to return <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12759">GH12759</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13582">GH13582</a>)</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">)</span>
<span class="gh">Out[5]: </span><span class="go">Period(&#39;NaT&#39;, &#39;D&#39;)</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<p>These result in <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code> without providing <code class="docutils literal notranslate"><span class="pre">freq</span></code> option.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [123]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;NaT&#39;</span><span class="p">)</span>
<span class="gh">Out[123]: </span><span class="go">NaT</span>

<span class="gp">In [124]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="gh">Out[124]: </span><span class="go">NaT</span>
</pre></div>
</div>
<p>To be compatible with <code class="docutils literal notranslate"><span class="pre">Period</span></code> addition and subtraction, <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code> now supports addition and subtraction with <code class="docutils literal notranslate"><span class="pre">int</span></code>. Previously it raised <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>.</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">pd</span><span class="o">.</span><span class="n">NaT</span> <span class="o">+</span> <span class="mi">1</span>
<span class="go">...</span>
<span class="go">ValueError: Cannot add integral value to Timestamp without freq.</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [125]: </span><span class="n">pd</span><span class="o">.</span><span class="n">NaT</span> <span class="o">+</span> <span class="mi">1</span>
<span class="gh">Out[125]: </span><span class="go">NaT</span>

<span class="gp">In [126]: </span><span class="n">pd</span><span class="o">.</span><span class="n">NaT</span> <span class="o">-</span> <span class="mi">1</span>
<span class="gh">Out[126]: </span><span class="go">NaT</span>
</pre></div>
</div>
</div>
<div class="section" id="periodindex-values-now-returns-array-of-period-object">
<h4><code class="docutils literal notranslate"><span class="pre">PeriodIndex.values</span></code> now returns array of <code class="docutils literal notranslate"><span class="pre">Period</span></code> object<a class="headerlink" href="#periodindex-values-now-returns-array-of-period-object" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">.values</span></code> is changed to return an array of <code class="docutils literal notranslate"><span class="pre">Period</span></code> objects, rather than an array
of integers (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13988">GH13988</a>).</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="s1">&#39;2011-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-02&#39;</span><span class="p">],</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>
<span class="gp">In [7]: </span><span class="n">pi</span><span class="o">.</span><span class="n">values</span>
<span class="gh">Out[7]: </span><span class="go">array([492, 493])</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [127]: </span><span class="n">pi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">PeriodIndex</span><span class="p">([</span><span class="s1">&#39;2011-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-02&#39;</span><span class="p">],</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;M&#39;</span><span class="p">)</span>

<span class="gp">In [128]: </span><span class="n">pi</span><span class="o">.</span><span class="n">values</span>
<span class="gh">Out[128]: </span><span class="go">array([Period(&#39;2011-01&#39;, &#39;M&#39;), Period(&#39;2011-02&#39;, &#39;M&#39;)], dtype=object)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="index-no-longer-used-for-set-operations">
<span id="whatsnew-0190-api-setops"></span><h3>Index <code class="docutils literal notranslate"><span class="pre">+</span></code> / <code class="docutils literal notranslate"><span class="pre">-</span></code> no longer used for set operations<a class="headerlink" href="#index-no-longer-used-for-set-operations" title="Permalink to this headline">¶</a></h3>
<p>Addition and subtraction of the base Index type and of DatetimeIndex
(not the numeric index types)
previously performed set operations (set union and difference). This
behavior was already deprecated since 0.15.0 (in favor using the specific
<code class="docutils literal notranslate"><span class="pre">.union()</span></code> and <code class="docutils literal notranslate"><span class="pre">.difference()</span></code> methods), and is now disabled. When
possible, <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> are now used for element-wise operations, for
example for concatenating strings or subtracting datetimes
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8227">GH8227</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14127">GH14127</a>).</p>
<p>Previous behavior:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="go">FutureWarning: using &#39;+&#39; to provide set union with Indexes is deprecated, use &#39;|&#39; or .union()</span>
<span class="gh">Out[1]: </span><span class="go">Index([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<p><strong>New behavior</strong>: the same operation will now perform element-wise addition:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [129]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>
<span class="gh">Out[129]: </span><span class="go">Index([&#39;aa&#39;, &#39;bc&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<p>Note that numeric Index objects already performed element-wise operations.
For example, the behavior of adding two integer Indexes is unchanged.
The base <code class="docutils literal notranslate"><span class="pre">Index</span></code> is now made consistent with this behavior.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [130]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>
<span class="gh">Out[130]: </span><span class="go">Int64Index([3, 5, 7], dtype=&#39;int64&#39;)</span>
</pre></div>
</div>
<p>Further, because of this change, it is now possible to subtract two
DatetimeIndex objects resulting in a TimedeltaIndex:</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2016-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-01-02&#39;</span><span class="p">])</span>
<span class="gp">   ...: </span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2016-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-01-03&#39;</span><span class="p">]))</span>
<span class="go">FutureWarning: using &#39;-&#39; to provide set differences with datetimelike Indexes is deprecated, use .difference()</span>
<span class="gh">Out[1]: </span><span class="go">DatetimeIndex([&#39;2016-01-01&#39;], dtype=&#39;datetime64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [131]: </span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2016-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-01-02&#39;</span><span class="p">])</span>
<span class="gp">   .....: </span> <span class="o">-</span> <span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2016-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-01-03&#39;</span><span class="p">]))</span>
<span class="gp">   .....: </span>
<span class="gh">Out[131]: </span><span class="go">TimedeltaIndex([&#39;-1 days&#39;, &#39;-1 days&#39;], dtype=&#39;timedelta64[ns]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
<div class="section" id="index-difference-and-symmetric-difference-changes">
<span id="whatsnew-0190-api-difference"></span><h3><code class="docutils literal notranslate"><span class="pre">Index.difference</span></code> and <code class="docutils literal notranslate"><span class="pre">.symmetric_difference</span></code> changes<a class="headerlink" href="#index-difference-and-symmetric-difference-changes" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Index.difference</span></code> and <code class="docutils literal notranslate"><span class="pre">Index.symmetric_difference</span></code> will now, more consistently, treat <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values as any other values. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13514">GH13514</a>)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [132]: </span><span class="n">idx1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>

<span class="gp">In [133]: </span><span class="n">idx2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">idx1</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">idx2</span><span class="p">)</span>
<span class="gh">Out[3]: </span><span class="go">Float64Index([nan, 2.0, 3.0], dtype=&#39;float64&#39;)</span>

<span class="gp">In [4]: </span><span class="n">idx1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">idx2</span><span class="p">)</span>
<span class="gh">Out[4]: </span><span class="go">Float64Index([0.0, nan, 2.0, 3.0], dtype=&#39;float64&#39;)</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [134]: </span><span class="n">idx1</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">idx2</span><span class="p">)</span>
<span class="gh">Out[134]: </span><span class="go">Float64Index([2.0, 3.0], dtype=&#39;float64&#39;)</span>

<span class="gp">In [135]: </span><span class="n">idx1</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">idx2</span><span class="p">)</span>
<span class="gh">Out[135]: </span><span class="go">Float64Index([0.0, 2.0, 3.0], dtype=&#39;float64&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="index-unique-consistently-returns-index">
<span id="whatsnew-0190-api-unique-index"></span><h3><code class="docutils literal notranslate"><span class="pre">Index.unique</span></code> consistently returns <code class="docutils literal notranslate"><span class="pre">Index</span></code><a class="headerlink" href="#index-unique-consistently-returns-index" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Index.unique()</span></code> now returns unique values as an
<code class="docutils literal notranslate"><span class="pre">Index</span></code> of the appropriate <code class="docutils literal notranslate"><span class="pre">dtype</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13395">GH13395</a>).
Previously, most <code class="docutils literal notranslate"><span class="pre">Index</span></code> classes returned <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code>, and <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>,
<code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> returned <code class="docutils literal notranslate"><span class="pre">Index</span></code> to keep metadata like timezone.</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[1]: </span><span class="go">array([1, 2, 3])</span>

<span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2011-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-01-02&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>                  <span class="s1">&#39;2011-01-03&#39;</span><span class="p">],</span> <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Asia/Tokyo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[2]:</span>
<span class="go">DatetimeIndex([&#39;2011-01-01 00:00:00+09:00&#39;, &#39;2011-01-02 00:00:00+09:00&#39;,</span>
<span class="go">               &#39;2011-01-03 00:00:00+09:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns, Asia/Tokyo]&#39;, freq=None)</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [136]: </span><span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gh">Out[136]: </span><span class="go">Int64Index([1, 2, 3], dtype=&#39;int64&#39;)</span>

<span class="gp">In [137]: </span><span class="n">pd</span><span class="o">.</span><span class="n">DatetimeIndex</span><span class="p">([</span><span class="s1">&#39;2011-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-01-02&#39;</span><span class="p">,</span> <span class="s1">&#39;2011-01-03&#39;</span><span class="p">],</span>
<span class="gp">   .....: </span>                 <span class="n">tz</span><span class="o">=</span><span class="s1">&#39;Asia/Tokyo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="gp">   .....: </span>
<span class="gh">Out[137]: </span><span class="go"></span>
<span class="go">DatetimeIndex([&#39;2011-01-01 00:00:00+09:00&#39;, &#39;2011-01-02 00:00:00+09:00&#39;,</span>
<span class="go">               &#39;2011-01-03 00:00:00+09:00&#39;],</span>
<span class="go">              dtype=&#39;datetime64[ns, Asia/Tokyo]&#39;, freq=None)</span>
</pre></div>
</div>
</div>
<div class="section" id="multiindex-constructors-groupby-and-set-index-preserve-categorical-dtypes">
<span id="whatsnew-0190-api-multiindex"></span><h3><code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> constructors, <code class="docutils literal notranslate"><span class="pre">groupby</span></code> and <code class="docutils literal notranslate"><span class="pre">set_index</span></code> preserve categorical dtypes<a class="headerlink" href="#multiindex-constructors-groupby-and-set-index-preserve-categorical-dtypes" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">MultiIndex.from_arrays</span></code> and <code class="docutils literal notranslate"><span class="pre">MultiIndex.from_product</span></code> will now preserve categorical dtype
in <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> levels (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13743">GH13743</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13854">GH13854</a>).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [138]: </span><span class="n">cat</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Categorical</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="s2">&quot;bac&quot;</span><span class="p">))</span>

<span class="gp">In [139]: </span><span class="n">lvl1</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">]</span>

<span class="gp">In [140]: </span><span class="n">midx</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">([</span><span class="n">cat</span><span class="p">,</span> <span class="n">lvl1</span><span class="p">])</span>

<span class="gp">In [141]: </span><span class="n">midx</span>
<span class="gh">Out[141]: </span><span class="go"></span>
<span class="go">MultiIndex([(&#39;a&#39;, &#39;foo&#39;),</span>
<span class="go">            (&#39;b&#39;, &#39;bar&#39;)],</span>
<span class="go">           )</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="n">midx</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[4]: </span><span class="go">Index([&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], dtype=&#39;object&#39;)</span>

<span class="gp">In [5]: </span><span class="n">midx</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[5]: </span><span class="go">Index([&#39;a&#39;, &#39;b&#39;], dtype=&#39;object&#39;)</span>
</pre></div>
</div>
<p><strong>New behavior</strong>: the single level is now a <code class="docutils literal notranslate"><span class="pre">CategoricalIndex</span></code>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [142]: </span><span class="n">midx</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gh">Out[142]: </span><span class="go">CategoricalIndex([&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], categories=[&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], ordered=False, dtype=&#39;category&#39;)</span>

<span class="gp">In [143]: </span><span class="n">midx</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[143]: </span><span class="go">CategoricalIndex([&#39;a&#39;, &#39;b&#39;], categories=[&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], ordered=False, dtype=&#39;category&#39;)</span>
</pre></div>
</div>
<p>An analogous change has been made to <code class="docutils literal notranslate"><span class="pre">MultiIndex.from_product</span></code>.
As a consequence, <code class="docutils literal notranslate"><span class="pre">groupby</span></code> and <code class="docutils literal notranslate"><span class="pre">set_index</span></code> also preserve categorical dtypes in indexes</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [144]: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="n">cat</span><span class="p">})</span>

<span class="gp">In [145]: </span><span class="n">df_grouped</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>

<span class="gp">In [146]: </span><span class="n">df_set_idx</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [11]: </span><span class="n">df_grouped</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[11]: </span><span class="go">Index([&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], dtype=&#39;object&#39;, name=&#39;C&#39;)</span>
<span class="gp">In [12]: </span><span class="n">df_grouped</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[12]:</span>
<span class="go">A      int64</span>
<span class="go">C     object</span>
<span class="go">B    float64</span>
<span class="go">dtype: object</span>

<span class="gp">In [13]: </span><span class="n">df_set_idx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[13]: </span><span class="go">Index([&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], dtype=&#39;object&#39;, name=&#39;C&#39;)</span>
<span class="gp">In [14]: </span><span class="n">df_set_idx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[14]:</span>
<span class="go">A      int64</span>
<span class="go">C     object</span>
<span class="go">B      int64</span>
<span class="go">dtype: object</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [147]: </span><span class="n">df_grouped</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[147]: </span><span class="go">CategoricalIndex([&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], categories=[&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], ordered=False, name=&#39;C&#39;, dtype=&#39;category&#39;)</span>

<span class="gp">In [148]: </span><span class="n">df_grouped</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[148]: </span><span class="go"></span>
<span class="go">A       int64</span>
<span class="go">C    category</span>
<span class="go">B     float64</span>
<span class="go">Length: 3, dtype: object</span>

<span class="gp">In [149]: </span><span class="n">df_set_idx</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gh">Out[149]: </span><span class="go">CategoricalIndex([&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], categories=[&#39;b&#39;, &#39;a&#39;, &#39;c&#39;], ordered=False, name=&#39;C&#39;, dtype=&#39;category&#39;)</span>

<span class="gp">In [150]: </span><span class="n">df_set_idx</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span><span class="o">.</span><span class="n">dtypes</span>
<span class="gh">Out[150]: </span><span class="go"></span>
<span class="go">A       int64</span>
<span class="go">C    category</span>
<span class="go">B       int64</span>
<span class="go">Length: 3, dtype: object</span>
</pre></div>
</div>
</div>
<div class="section" id="read-csv-will-progressively-enumerate-chunks">
<span id="whatsnew-0190-api-autogenerated-chunksize-index"></span><h3><code class="docutils literal notranslate"><span class="pre">read_csv</span></code> will progressively enumerate chunks<a class="headerlink" href="#read-csv-will-progressively-enumerate-chunks" title="Permalink to this headline">¶</a></h3>
<p>When <code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code> is called with <code class="docutils literal notranslate"><span class="pre">chunksize=n</span></code> and without specifying an index,
each chunk used to have an independently generated index from <code class="docutils literal notranslate"><span class="pre">0</span></code> to <code class="docutils literal notranslate"><span class="pre">n-1</span></code>.
They are now given instead a progressive index, starting from <code class="docutils literal notranslate"><span class="pre">0</span></code> for the first chunk,
from <code class="docutils literal notranslate"><span class="pre">n</span></code> for the second, and so on, so that, when concatenated, they are identical to
the result of calling <code class="xref py py-func docutils literal notranslate"><span class="pre">read_csv()</span></code> without the <code class="docutils literal notranslate"><span class="pre">chunksize=</span></code> argument
(<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12185">GH12185</a>).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [151]: </span><span class="n">data</span> <span class="o">=</span> <span class="s1">&#39;A,B</span><span class="se">\n</span><span class="s1">0,1</span><span class="se">\n</span><span class="s1">2,3</span><span class="se">\n</span><span class="s1">4,5</span><span class="se">\n</span><span class="s1">6,7&#39;</span>
</pre></div>
</div>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="gh">Out[2]:</span>
<span class="go">   A  B</span>
<span class="go">0  0  1</span>
<span class="go">1  2  3</span>
<span class="go">0  4  5</span>
<span class="go">1  6  7</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [152]: </span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">StringIO</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">chunksize</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="gh">Out[152]: </span><span class="go"></span>
<span class="go">   A  B</span>
<span class="go">0  0  1</span>
<span class="go">1  2  3</span>
<span class="go">2  4  5</span>
<span class="go">3  6  7</span>

<span class="go">[4 rows x 2 columns]</span>
</pre></div>
</div>
</div>
<div class="section" id="sparse-changes">
<span id="whatsnew-0190-sparse"></span><h3>Sparse Changes<a class="headerlink" href="#sparse-changes" title="Permalink to this headline">¶</a></h3>
<p>These changes allow pandas to handle sparse data with more dtypes, and for work to make a smoother experience with data handling.</p>
<div class="section" id="int64-and-bool-support-enhancements">
<h4><code class="docutils literal notranslate"><span class="pre">int64</span></code> and <code class="docutils literal notranslate"><span class="pre">bool</span></code> support enhancements<a class="headerlink" href="#int64-and-bool-support-enhancements" title="Permalink to this headline">¶</a></h4>
<p>Sparse data structures now gained enhanced support of <code class="docutils literal notranslate"><span class="pre">int64</span></code> and <code class="docutils literal notranslate"><span class="pre">bool</span></code> <code class="docutils literal notranslate"><span class="pre">dtype</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/667">GH667</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13849">GH13849</a>).</p>
<p>Previously, sparse data were <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype by default, even if all inputs were of <code class="docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">bool</span></code> dtype. You had to specify <code class="docutils literal notranslate"><span class="pre">dtype</span></code> explicitly to create sparse data with <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtype. Also, <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> had to be specified explicitly because the default was <code class="docutils literal notranslate"><span class="pre">np.nan</span></code> which doesn’t appear in <code class="docutils literal notranslate"><span class="pre">int64</span></code> or <code class="docutils literal notranslate"><span class="pre">bool</span></code> data.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">pd</span><span class="o">.</span><span class="n">SparseArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="gh">Out[1]:</span>
<span class="go">[1.0, 2.0, 0.0, 0.0]</span>
<span class="go">Fill: nan</span>
<span class="go">IntIndex</span>
<span class="go">Indices: array([0, 1, 2, 3], dtype=int32)</span>

<span class="go"># specifying int64 dtype, but all values are stored in sp_values because</span>
<span class="go"># fill_value default is np.nan</span>
<span class="gp">In [2]: </span><span class="n">pd</span><span class="o">.</span><span class="n">SparseArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
<span class="gh">Out[2]:</span>
<span class="go">[1, 2, 0, 0]</span>
<span class="go">Fill: nan</span>
<span class="go">IntIndex</span>
<span class="go">Indices: array([0, 1, 2, 3], dtype=int32)</span>

<span class="gp">In [3]: </span><span class="n">pd</span><span class="o">.</span><span class="n">SparseArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gh">Out[3]:</span>
<span class="go">[1, 2, 0, 0]</span>
<span class="go">Fill: 0</span>
<span class="go">IntIndex</span>
<span class="go">Indices: array([0, 1], dtype=int32)</span>
</pre></div>
</div>
<p>As of v0.19.0, sparse data keeps the input dtype, and uses more appropriate <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> defaults (<code class="docutils literal notranslate"><span class="pre">0</span></code> for <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtype, <code class="docutils literal notranslate"><span class="pre">False</span></code> for <code class="docutils literal notranslate"><span class="pre">bool</span></code> dtype).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [153]: </span><span class="n">pd</span><span class="o">.</span><span class="n">SparseArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
<span class="gh">Out[153]: </span><span class="go"></span>
<span class="go">[1, 2, 0, 0]</span>
<span class="go">Fill: 0</span>
<span class="go">IntIndex</span>
<span class="go">Indices: array([0, 1], dtype=int32)</span>

<span class="gp">In [154]: </span><span class="n">pd</span><span class="o">.</span><span class="n">SparseArray</span><span class="p">([</span><span class="bp">True</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">,</span> <span class="bp">False</span><span class="p">])</span>
<span class="gh">Out[154]: </span><span class="go"></span>
<span class="go">[True, False, False, False]</span>
<span class="go">Fill: False</span>
<span class="go">IntIndex</span>
<span class="go">Indices: array([0], dtype=int32)</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="../user_guide/sparse.html#sparse-dtype"><span class="std std-ref">docs</span></a> for more details.</p>
</div>
<div class="section" id="operators-now-preserve-dtypes">
<h4>Operators now preserve dtypes<a class="headerlink" href="#operators-now-preserve-dtypes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Sparse data structure now can preserve <code class="docutils literal notranslate"><span class="pre">dtype</span></code> after arithmetic ops (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13848">GH13848</a>)</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">SparseSeries</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">dtype</span>

<span class="n">s</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Sparse data structure now support <code class="docutils literal notranslate"><span class="pre">astype</span></code> to convert internal <code class="docutils literal notranslate"><span class="pre">dtype</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13900">GH13900</a>)</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">SparseSeries</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">s</span>
<span class="n">s</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">astype</span></code> fails if data contains values which cannot be converted to specified <code class="docutils literal notranslate"><span class="pre">dtype</span></code>.
Note that the limitation is applied to <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> which default is <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="n">pd</span><span class="o">.</span><span class="n">SparseSeries</span><span class="p">([</span><span class="mf">1.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">],</span> <span class="n">fill_value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int64</span><span class="p">)</span>
<span class="gh">Out[7]:</span>
<span class="go">ValueError: unable to coerce current fill_value nan to int64 dtype</span>
</pre></div>
</div>
</div>
<div class="section" id="other-sparse-fixes">
<h4>Other sparse fixes<a class="headerlink" href="#other-sparse-fixes" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Subclassed <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> and <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> now preserve class types when slicing or transposing. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13787">GH13787</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> with <code class="docutils literal notranslate"><span class="pre">bool</span></code> dtype now supports logical (bool) operators (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14000">GH14000</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> with <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> <code class="docutils literal notranslate"><span class="pre">[]</span></code> indexing may raise <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13144">GH13144</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> with <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> <code class="docutils literal notranslate"><span class="pre">[]</span></code> indexing result may have normal <code class="docutils literal notranslate"><span class="pre">Index</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13144">GH13144</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> in which <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> did not default to <code class="docutils literal notranslate"><span class="pre">axis=0</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13048">GH13048</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> and <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> creation with <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype may raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11633">GH11633</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> doesn’t respect passed <code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> or <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> ‘s dtype and <code class="docutils literal notranslate"><span class="pre">fill_value</span></code>  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13866">GH13866</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> and <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> don’t apply ufunc to <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13853">GH13853</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries.abs</span></code> incorrectly keeps negative <code class="docutils literal notranslate"><span class="pre">fill_value</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13853">GH13853</a>)</p></li>
<li><p>Bug in single row slicing on multi-type <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> s, types were previously forced to float (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13917">GH13917</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> slicing changes integer dtype to float (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8292">GH8292</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseDataFarme</span></code> comparison ops may raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13001">GH13001</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseDataFarme.isnull</span></code> raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8276">GH8276</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> representation with <code class="docutils literal notranslate"><span class="pre">bool</span></code> dtype may raise <code class="docutils literal notranslate"><span class="pre">IndexError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13110">GH13110</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> and <code class="docutils literal notranslate"><span class="pre">SparseDataFrame</span></code> of <code class="docutils literal notranslate"><span class="pre">bool</span></code> or <code class="docutils literal notranslate"><span class="pre">int64</span></code> dtype may display its values like <code class="docutils literal notranslate"><span class="pre">float64</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13110">GH13110</a>)</p></li>
<li><p>Bug in sparse indexing using <code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> with <code class="docutils literal notranslate"><span class="pre">bool</span></code> dtype may return incorrect result  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13985">GH13985</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseArray</span></code> created from <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> may lose <code class="docutils literal notranslate"><span class="pre">dtype</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13999">GH13999</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> comparison with dense returns normal <code class="docutils literal notranslate"><span class="pre">Series</span></code> rather than <code class="docutils literal notranslate"><span class="pre">SparseSeries</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13999">GH13999</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="indexer-dtype-changes">
<span id="whatsnew-0190-indexer-dtype"></span><h3>Indexer dtype changes<a class="headerlink" href="#indexer-dtype-changes" title="Permalink to this headline">¶</a></h3>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p>This change only affects 64 bit python running on Windows, and only affects relatively advanced
indexing operations</p>
</div>
<p>Methods such as <code class="docutils literal notranslate"><span class="pre">Index.get_indexer</span></code> that return an indexer array, coerce that array to a “platform int”, so that it can be
directly used in 3rd party library operations like <code class="docutils literal notranslate"><span class="pre">numpy.take</span></code>.  Previously, a platform int was defined as <code class="docutils literal notranslate"><span class="pre">np.int_</span></code>
which corresponds to a C integer, but the correct type, and what is being used now, is <code class="docutils literal notranslate"><span class="pre">np.intp</span></code>, which corresponds
to the C integer size that can hold a pointer (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3033">GH3033</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13972">GH13972</a>).</p>
<p>These types are the same on many platform, but for 64 bit python on Windows,
<code class="docutils literal notranslate"><span class="pre">np.int_</span></code> is 32 bits, and <code class="docutils literal notranslate"><span class="pre">np.intp</span></code> is 64 bits.  Changing this behavior improves performance for many
operations on that platform.</p>
<p><strong>Previous behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">i</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">i</span><span class="o">.</span><span class="n">get_indexer</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[2]: </span><span class="go">dtype(&#39;int32&#39;)</span>
</pre></div>
</div>
<p><strong>New behavior</strong>:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="n">i</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span>

<span class="gp">In [2]: </span><span class="n">i</span><span class="o">.</span><span class="n">get_indexer</span><span class="p">([</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">dtype</span>
<span class="gh">Out[2]: </span><span class="go">dtype(&#39;int64&#39;)</span>
</pre></div>
</div>
</div>
<div class="section" id="other-api-changes">
<span id="whatsnew-0190-api-other"></span><h3>Other API changes<a class="headerlink" href="#other-api-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp.to_pydatetime</span></code> will issue a <code class="docutils literal notranslate"><span class="pre">UserWarning</span></code> when <code class="docutils literal notranslate"><span class="pre">warn=True</span></code>, and the instance has a non-zero number of nanoseconds, previously this would print a message to stdout (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14101">GH14101</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.unique()</span></code> with datetime and timezone now returns return array of <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> with timezone (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13565">GH13565</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Panel.to_sparse()</span></code> will raise a <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> exception when called (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13778">GH13778</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.reshape()</span></code> will raise a <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> exception when called (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12882">GH12882</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.filter()</span></code> enforces mutual exclusion of the keyword arguments (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12399">GH12399</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval</span></code>’s upcasting rules for <code class="docutils literal notranslate"><span class="pre">float32</span></code> types have been updated to be more consistent with NumPy’s rules.  New behavior will not upcast to <code class="docutils literal notranslate"><span class="pre">float64</span></code> if you multiply a pandas <code class="docutils literal notranslate"><span class="pre">float32</span></code> object by a scalar float64 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12388">GH12388</a>).</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">UnsupportedFunctionCall</span></code> error is now raised if NumPy ufuncs like <code class="docutils literal notranslate"><span class="pre">np.mean</span></code> are called on groupby or resample objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12811">GH12811</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__setitem__</span></code> will no longer apply a callable rhs as a function instead of storing it. Call <code class="docutils literal notranslate"><span class="pre">where</span></code> directly to get the previous behavior (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13299">GH13299</a>).</p></li>
<li><p>Calls to <code class="docutils literal notranslate"><span class="pre">.sample()</span></code> will respect the random seed set via <code class="docutils literal notranslate"><span class="pre">numpy.random.seed(n)</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13161">GH13161</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Styler.apply</span></code> is now more strict about the outputs your function must return. For <code class="docutils literal notranslate"><span class="pre">axis=0</span></code> or <code class="docutils literal notranslate"><span class="pre">axis=1</span></code>, the output shape must be identical. For <code class="docutils literal notranslate"><span class="pre">axis=None</span></code>, the output must be a DataFrame with identical columns and index labels (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13222">GH13222</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Float64Index.astype(int)</span></code> will now raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if <code class="docutils literal notranslate"><span class="pre">Float64Index</span></code> contains <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13149">GH13149</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimedeltaIndex.astype(int)</span></code> and <code class="docutils literal notranslate"><span class="pre">DatetimeIndex.astype(int)</span></code> will now return <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code> instead of <code class="docutils literal notranslate"><span class="pre">np.array</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13209">GH13209</a>)</p></li>
<li><p>Passing <code class="docutils literal notranslate"><span class="pre">Period</span></code> with multiple frequencies to normal <code class="docutils literal notranslate"><span class="pre">Index</span></code> now returns <code class="docutils literal notranslate"><span class="pre">Index</span></code> with <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13664">GH13664</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PeriodIndex.fillna</span></code> with <code class="docutils literal notranslate"><span class="pre">Period</span></code> has different freq now coerces to <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13664">GH13664</a>)</p></li>
<li><p>Faceted boxplots from <code class="docutils literal notranslate"><span class="pre">DataFrame.boxplot(by=col)</span></code> now return a <code class="docutils literal notranslate"><span class="pre">Series</span></code> when <code class="docutils literal notranslate"><span class="pre">return_type</span></code> is not None. Previously these returned an <code class="docutils literal notranslate"><span class="pre">OrderedDict</span></code>. Note that when <code class="docutils literal notranslate"><span class="pre">return_type=None</span></code>, the default, these still return a 2-D NumPy array (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12216">GH12216</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7096">GH7096</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_hdf</span></code> will now raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> instead of <code class="docutils literal notranslate"><span class="pre">KeyError</span></code>, if a mode other than <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">r+</span></code> and <code class="docutils literal notranslate"><span class="pre">a</span></code> is supplied. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13623">GH13623</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code>, <code class="docutils literal notranslate"><span class="pre">pd.read_table()</span></code>, and <code class="docutils literal notranslate"><span class="pre">pd.read_hdf()</span></code> raise the builtin <code class="docutils literal notranslate"><span class="pre">FileNotFoundError</span></code> exception for Python 3.x when called on a nonexistent file; this is back-ported as <code class="docutils literal notranslate"><span class="pre">IOError</span></code> in Python 2.x (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14086">GH14086</a>)</p></li>
<li><p>More informative exceptions are passed through the csv parser. The exception type would now be the original exception type instead of <code class="docutils literal notranslate"><span class="pre">CParserError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13652">GH13652</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in the C engine will now issue a <code class="docutils literal notranslate"><span class="pre">ParserWarning</span></code> or raise a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when <code class="docutils literal notranslate"><span class="pre">sep</span></code> encoded is more than one character long (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14065">GH14065</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.values</span></code> will now return <code class="docutils literal notranslate"><span class="pre">float64</span></code> with a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> of mixed <code class="docutils literal notranslate"><span class="pre">int64</span></code> and <code class="docutils literal notranslate"><span class="pre">uint64</span></code> dtypes, conforming to <code class="docutils literal notranslate"><span class="pre">np.find_common_type</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10364">GH10364</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13917">GH13917</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.groupby.groups</span></code> will now return a dictionary of <code class="docutils literal notranslate"><span class="pre">Index</span></code> objects, rather than a dictionary of <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> or <code class="docutils literal notranslate"><span class="pre">lists</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14293">GH14293</a>)</p></li>
</ul>
</div>
</div>
<div class="section" id="deprecations">
<span id="whatsnew-0190-deprecations"></span><h2>Deprecations<a class="headerlink" href="#deprecations" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Series.reshape</span></code> and <code class="docutils literal notranslate"><span class="pre">Categorical.reshape</span></code> have been deprecated and will be removed in a subsequent release (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12882">GH12882</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12882">GH12882</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PeriodIndex.to_datetime</span></code> has been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">PeriodIndex.to_timestamp</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8254">GH8254</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp.to_datetime</span></code> has been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">Timestamp.to_pydatetime</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8254">GH8254</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Index.to_datetime</span></code> and <code class="docutils literal notranslate"><span class="pre">DatetimeIndex.to_datetime</span></code> have been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">pd.to_datetime</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8254">GH8254</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.core.datetools</span></code> module has been deprecated and will be removed in a subsequent release (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14094">GH14094</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SparseList</span></code> has been deprecated and will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13784">GH13784</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_html()</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.to_latex()</span></code> have dropped the <code class="docutils literal notranslate"><span class="pre">colSpace</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">col_space</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13857">GH13857</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code> has deprecated the <code class="docutils literal notranslate"><span class="pre">flavor</span></code> parameter, as it is superfluous when SQLAlchemy is not installed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13611">GH13611</a>)</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> keywords:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">compact_ints</span></code> and <code class="docutils literal notranslate"><span class="pre">use_unsigned</span></code> have been deprecated and will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13320">GH13320</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer_lines</span></code> has been deprecated and will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13360">GH13360</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_recarray</span></code> has been deprecated and will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13373">GH13373</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">skip_footer</span></code> has been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">skipfooter</span></code> and will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13349">GH13349</a>)</p></li>
</ul>
</li>
<li><p>top-level <code class="docutils literal notranslate"><span class="pre">pd.ordered_merge()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">pd.merge_ordered()</span></code> and the original name will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13358">GH13358</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Timestamp.offset</span></code> property (and named arg in the constructor), has been deprecated in favor of <code class="docutils literal notranslate"><span class="pre">freq</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12160">GH12160</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.tseries.util.pivot_annual</span></code> is deprecated. Use <code class="docutils literal notranslate"><span class="pre">pivot_table</span></code> as alternative, an example is <a class="reference internal" href="../user_guide/cookbook.html#cookbook-pivot"><span class="std std-ref">here</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/736">GH736</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.tseries.util.isleapyear</span></code> has been deprecated and will be removed in a subsequent release. Datetime-likes now have a <code class="docutils literal notranslate"><span class="pre">.is_leap_year</span></code> property (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13727">GH13727</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Panel4D</span></code> and <code class="docutils literal notranslate"><span class="pre">PanelND</span></code> constructors are deprecated and will be removed in a future version. The recommended way to represent these types of n-dimensional data are with the <a class="reference external" href="http://xarray.pydata.org/en/stable/">xarray package</a>. Pandas provides a <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_xarray()</span></code> method to automate this conversion (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13564">GH13564</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.get_standard_freq</span></code> is deprecated. Use  <code class="docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.to_offset(freq).rule_code</span></code> instead (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13874">GH13874</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pandas.tseries.frequencies.to_offset</span></code>’s <code class="docutils literal notranslate"><span class="pre">freqstr</span></code> keyword is deprecated in favor of <code class="docutils literal notranslate"><span class="pre">freq</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13874">GH13874</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Categorical.from_array</span></code> has been deprecated and will be removed in a future version (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13854">GH13854</a>)</p></li>
</ul>
</div>
<div class="section" id="removal-of-prior-version-deprecations-changes">
<span id="whatsnew-0190-prior-deprecations"></span><h2>Removal of prior version deprecations/changes<a class="headerlink" href="#removal-of-prior-version-deprecations-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">SparsePanel</span></code> class has been removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13778">GH13778</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pd.sandbox</span></code> module has been removed in favor of the external library <code class="docutils literal notranslate"><span class="pre">pandas-qt</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13670">GH13670</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pandas.io.data</span></code> and <code class="docutils literal notranslate"><span class="pre">pandas.io.wb</span></code> modules are removed in favor of
the <a class="reference external" href="https://github.com/pydata/pandas-datareader">pandas-datareader package</a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13724">GH13724</a>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pandas.tools.rplot</span></code> module has been removed in favor of
the <a class="reference external" href="https://github.com/mwaskom/seaborn">seaborn package</a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13855">GH13855</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">engine</span></code> parameter, as was deprecated in 0.17.1 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11274">GH11274</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13419">GH13419</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_dict()</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">outtype</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">orient</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13627">GH13627</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8486">GH8486</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.Categorical</span></code> has dropped setting of the <code class="docutils literal notranslate"><span class="pre">ordered</span></code> attribute directly in favor of the <code class="docutils literal notranslate"><span class="pre">set_ordered</span></code> method (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13671">GH13671</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.Categorical</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">levels</span></code> attribute in favor of <code class="docutils literal notranslate"><span class="pre">categories</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8376">GH8376</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DataFrame.to_sql()</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">mysql</span></code> option for the <code class="docutils literal notranslate"><span class="pre">flavor</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13611">GH13611</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Panel.shift()</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">lags</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">periods</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14041">GH14041</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.Index</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">diff</span></code> method in favor of <code class="docutils literal notranslate"><span class="pre">difference</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13669">GH13669</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">to_wide</span></code> method in favor of <code class="docutils literal notranslate"><span class="pre">to_panel</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14039">GH14039</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.to_csv</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">nanRep</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">na_rep</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13804">GH13804</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Series.xs</span></code>, <code class="docutils literal notranslate"><span class="pre">DataFrame.xs</span></code>, <code class="docutils literal notranslate"><span class="pre">Panel.xs</span></code>, <code class="docutils literal notranslate"><span class="pre">Panel.major_xs</span></code>, and <code class="docutils literal notranslate"><span class="pre">Panel.minor_xs</span></code> have dropped the <code class="docutils literal notranslate"><span class="pre">copy</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13781">GH13781</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">str.split</span></code> has dropped the <code class="docutils literal notranslate"><span class="pre">return_type</span></code> parameter in favor of <code class="docutils literal notranslate"><span class="pre">expand</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13701">GH13701</a>)</p></li>
<li><p>Removal of the legacy time rules (offset aliases), deprecated since 0.17.0 (this has been alias since 0.8.0) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13590">GH13590</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13868">GH13868</a>). Now legacy time rules raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>. For the list of currently supported offsets, see <a class="reference internal" href="../user_guide/timeseries.html#timeseries-offset-aliases"><span class="std std-ref">here</span></a>.</p></li>
<li><p>The default value for the <code class="docutils literal notranslate"><span class="pre">return_type</span></code> parameter for <code class="docutils literal notranslate"><span class="pre">DataFrame.plot.box</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.boxplot</span></code> changed from <code class="docutils literal notranslate"><span class="pre">None</span></code> to <code class="docutils literal notranslate"><span class="pre">&quot;axes&quot;</span></code>. These methods will now return a matplotlib axes by default instead of a dictionary of artists. See <a class="reference internal" href="../user_guide/visualization.html#visualization-box-return"><span class="std std-ref">here</span></a> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6581">GH6581</a>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">tquery</span></code> and <code class="docutils literal notranslate"><span class="pre">uquery</span></code> functions in the <code class="docutils literal notranslate"><span class="pre">pandas.io.sql</span></code> module are removed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/5950">GH5950</a>).</p></li>
</ul>
</div>
<div class="section" id="performance-improvements">
<span id="whatsnew-0190-performance"></span><h2>Performance improvements<a class="headerlink" href="#performance-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Improved performance of sparse <code class="docutils literal notranslate"><span class="pre">IntIndex.intersect</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13082">GH13082</a>)</p></li>
<li><p>Improved performance of sparse arithmetic with <code class="docutils literal notranslate"><span class="pre">BlockIndex</span></code> when the number of blocks are large, though recommended to use <code class="docutils literal notranslate"><span class="pre">IntIndex</span></code> in such cases (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13082">GH13082</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">DataFrame.quantile()</span></code> as it now operates per-block (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11623">GH11623</a>)</p></li>
<li><p>Improved performance of float64 hash table operations, fixing some very slow indexing and groupby operations in python 3 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13166">GH13166</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13334">GH13334</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">DataFrameGroupBy.transform</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12737">GH12737</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">Index</span></code> and <code class="docutils literal notranslate"><span class="pre">Series</span></code> <code class="docutils literal notranslate"><span class="pre">.duplicated</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10235">GH10235</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">Index.difference</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12044">GH12044</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">RangeIndex.is_monotonic_increasing</span></code> and <code class="docutils literal notranslate"><span class="pre">is_monotonic_decreasing</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13749">GH13749</a>)</p></li>
<li><p>Improved performance of datetime string parsing in <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13692">GH13692</a>)</p></li>
<li><p>Improved performance of hashing <code class="docutils literal notranslate"><span class="pre">Period</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12817">GH12817</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">factorize</span></code> of datetime with timezone (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13750">GH13750</a>)</p></li>
<li><p>Improved performance of by lazily creating indexing hashtables on larger Indexes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14266">GH14266</a>)</p></li>
<li><p>Improved performance of <code class="docutils literal notranslate"><span class="pre">groupby.groups</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14293">GH14293</a>)</p></li>
<li><p>Unnecessary materializing of a MultiIndex when introspecting for memory usage (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14308">GH14308</a>)</p></li>
</ul>
</div>
<div class="section" id="bug-fixes">
<span id="whatsnew-0190-bug-fixes"></span><h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby().shift()</span></code>, which could cause a segfault or corruption in rare circumstances when grouping by columns with missing values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13813">GH13813</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby().cumsum()</span></code> calculating <code class="docutils literal notranslate"><span class="pre">cumprod</span></code> when <code class="docutils literal notranslate"><span class="pre">axis=1</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13994">GH13994</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_timedelta()</span></code> in which the <code class="docutils literal notranslate"><span class="pre">errors</span></code> parameter was not being respected (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13613">GH13613</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">io.json.json_normalize()</span></code>, where non-ascii keys raised an exception (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13213">GH13213</a>)</p></li>
<li><p>Bug when passing a not-default-indexed <code class="docutils literal notranslate"><span class="pre">Series</span></code> as <code class="docutils literal notranslate"><span class="pre">xerr</span></code> or <code class="docutils literal notranslate"><span class="pre">yerr</span></code> in <code class="docutils literal notranslate"><span class="pre">.plot()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11858">GH11858</a>)</p></li>
<li><p>Bug in area plot draws legend incorrectly if subplot is enabled or legend is moved after plot (matplotlib 1.5.0 is required to draw area plot legend properly) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9161">GH9161</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13544">GH13544</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> assignment with an object-dtyped <code class="docutils literal notranslate"><span class="pre">Index</span></code> where the resultant column is mutable to the original object. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13522">GH13522</a>)</p></li>
<li><p>Bug in matplotlib <code class="docutils literal notranslate"><span class="pre">AutoDataFormatter</span></code>; this restores the second scaled formatting and re-adds micro-second scaled formatting (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13131">GH13131</a>)</p></li>
<li><p>Bug in selection from a <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> with a fixed format and <code class="docutils literal notranslate"><span class="pre">start</span></code> and/or <code class="docutils literal notranslate"><span class="pre">stop</span></code> specified will now return the selected range (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/8287">GH8287</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Categorical.from_codes()</span></code> where an unhelpful error was raised when an invalid <code class="docutils literal notranslate"><span class="pre">ordered</span></code> parameter was passed in (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14058">GH14058</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> construction from a tuple of integers on windows not returning default dtype (int64) (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13646">GH13646</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> addition with a Datetime-like object where addition overflow was not being caught (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14068">GH14068</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.groupby(..).resample(..)</span></code> when the same object is called multiple times (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13174">GH13174</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.to_records()</span></code> when index name is a unicode string (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13172">GH13172</a>)</p></li>
<li><p>Bug in calling <code class="docutils literal notranslate"><span class="pre">.memory_usage()</span></code> on object which doesn’t implement (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12924">GH12924</a>)</p></li>
<li><p>Regression in <code class="docutils literal notranslate"><span class="pre">Series.quantile</span></code> with nans (also shows up in <code class="docutils literal notranslate"><span class="pre">.median()</span></code> and <code class="docutils literal notranslate"><span class="pre">.describe()</span></code> ); furthermore now names the <code class="docutils literal notranslate"><span class="pre">Series</span></code> with the quantile (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13098">GH13098</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13146">GH13146</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">SeriesGroupBy.transform</span></code> with datetime values and missing groups (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13191">GH13191</a>)</p></li>
<li><p>Bug where empty <code class="docutils literal notranslate"><span class="pre">Series</span></code> were incorrectly coerced in datetime-like numeric operations (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13844">GH13844</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> constructor when passed a <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> containing datetimes with timezones (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14190">GH14190</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.str.extractall()</span></code> with <code class="docutils literal notranslate"><span class="pre">str</span></code> index raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13156">GH13156</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.str.extractall()</span></code> with single group and quantifier  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13382">GH13382</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">Period</span></code> subtraction raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> or <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> rather than <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13078">GH13078</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index</span></code> and <code class="docutils literal notranslate"><span class="pre">Series</span></code> created with <code class="docutils literal notranslate"><span class="pre">NaN</span></code> and <code class="docutils literal notranslate"><span class="pre">NaT</span></code> mixed data may not have <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> dtype  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13324">GH13324</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index</span></code> and <code class="docutils literal notranslate"><span class="pre">Series</span></code> may ignore <code class="docutils literal notranslate"><span class="pre">np.datetime64('nat')</span></code> and <code class="docutils literal notranslate"><span class="pre">np.timdelta64('nat')</span></code> to infer dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13324">GH13324</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">Period</span></code> subtraction raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13071">GH13071</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> construction returning a <code class="docutils literal notranslate"><span class="pre">float64</span></code> index in some circumstances (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13067">GH13067</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.resample(..)</span></code> with a <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> not changing its <code class="docutils literal notranslate"><span class="pre">freq</span></code> appropriately when empty (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13067">GH13067</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.resample(..)</span></code> with a <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> not retaining its type or name with an empty <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> appropriately when empty (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13212">GH13212</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby(..).apply(..)</span></code> when the passed function returns scalar values per group (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13468">GH13468</a>).</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby(..).resample(..)</span></code> where passing some keywords would raise an exception (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13235">GH13235</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.tz_convert</span></code> on a tz-aware <code class="docutils literal notranslate"><span class="pre">DateTimeIndex</span></code> that relied on index being sorted for correct results (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13306">GH13306</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.tz_localize</span></code> with <code class="docutils literal notranslate"><span class="pre">dateutil.tz.tzlocal</span></code> may return incorrect result (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13583">GH13583</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DatetimeTZDtype</span></code> dtype with <code class="docutils literal notranslate"><span class="pre">dateutil.tz.tzlocal</span></code> cannot be regarded as valid dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13583">GH13583</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_hdf()</span></code> where attempting to load an HDF file with a single dataset, that had one or more categorical columns, failed unless the key argument was set to the name of the dataset. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13231">GH13231</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.rolling()</span></code> that allowed a negative integer window in construction of the <code class="docutils literal notranslate"><span class="pre">Rolling()</span></code> object, but would later fail on aggregation (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13383">GH13383</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> indexing with tuple-valued data and a numeric index (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13509">GH13509</a>)</p></li>
<li><p>Bug in printing <code class="docutils literal notranslate"><span class="pre">pd.DataFrame</span></code> where unusual elements with the <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype were causing segfaults (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13717">GH13717</a>)</p></li>
<li><p>Bug in ranking <code class="docutils literal notranslate"><span class="pre">Series</span></code> which could result in segfaults (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13445">GH13445</a>)</p></li>
<li><p>Bug in various index types, which did not propagate the name of passed index (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12309">GH12309</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>, which did not honour the <code class="docutils literal notranslate"><span class="pre">copy=True</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13205">GH13205</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DatetimeIndex.is_normalized</span></code> returns incorrectly for normalized date_range in case of local timezones (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13459">GH13459</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.concat</span></code> and <code class="docutils literal notranslate"><span class="pre">.append</span></code> may coerces <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> and <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> to <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype containing python built-in <code class="docutils literal notranslate"><span class="pre">datetime</span></code> or <code class="docutils literal notranslate"><span class="pre">timedelta</span></code> rather than <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> or <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13626">GH13626</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">PeriodIndex.append</span></code> may raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> when the result is <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13221">GH13221</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">CategoricalIndex.append</span></code> may accept normal <code class="docutils literal notranslate"><span class="pre">list</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13626">GH13626</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.concat</span></code> and <code class="docutils literal notranslate"><span class="pre">.append</span></code> with the same timezone get reset to UTC (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7795">GH7795</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> <code class="docutils literal notranslate"><span class="pre">.append</span></code> raises <code class="docutils literal notranslate"><span class="pre">AmbiguousTimeError</span></code> if data contains datetime near DST boundary (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13626">GH13626</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code> in which float values were being quoted even though quotations were specified for non-numeric values only (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12922">GH12922</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13259">GH13259</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.describe()</span></code> raising <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> with only boolean columns (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13898">GH13898</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> slicing where extra elements were returned when level is non-unique (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12896">GH12896</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.str.replace</span></code> does not raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> for invalid replacement (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13438">GH13438</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">MultiIndex.from_arrays</span></code> which didn’t check for input array lengths matching (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13599">GH13599</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">cartesian_product</span></code> and <code class="docutils literal notranslate"><span class="pre">MultiIndex.from_product</span></code> which may raise with empty input arrays (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12258">GH12258</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> which may cause a segfault or corruption when iterating in large chunks over a stream/file under rare circumstances (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13703">GH13703</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> which caused errors to be raised when a dictionary containing scalars is passed in for <code class="docutils literal notranslate"><span class="pre">na_values</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12224">GH12224</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> which caused BOM files to be incorrectly parsed by not ignoring the BOM (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/4793">GH4793</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">engine='python'</span></code> which raised errors when a numpy array was passed in for <code class="docutils literal notranslate"><span class="pre">usecols</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12546">GH12546</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> where the index columns were being incorrectly parsed when parsed as dates with a <code class="docutils literal notranslate"><span class="pre">thousands</span></code> parameter (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14066">GH14066</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">engine='python'</span></code> in which <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values weren’t being detected after data was converted to numeric values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13314">GH13314</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in which the <code class="docutils literal notranslate"><span class="pre">nrows</span></code> argument was not properly validated for both engines (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10476">GH10476</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">engine='python'</span></code> in which infinities of mixed-case forms were not being interpreted properly (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13274">GH13274</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">engine='python'</span></code> in which trailing <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values were not being parsed (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13320">GH13320</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">engine='python'</span></code> when reading from a <code class="docutils literal notranslate"><span class="pre">tempfile.TemporaryFile</span></code> on Windows with Python 3 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13398">GH13398</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> that prevents <code class="docutils literal notranslate"><span class="pre">usecols</span></code> kwarg from accepting single-byte unicode strings (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13219">GH13219</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> that prevents <code class="docutils literal notranslate"><span class="pre">usecols</span></code> from being an empty set (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13402">GH13402</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in the C engine where the NULL character was not being parsed as NULL (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14012">GH14012</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">engine='c'</span></code> in which NULL <code class="docutils literal notranslate"><span class="pre">quotechar</span></code> was not accepted even though <code class="docutils literal notranslate"><span class="pre">quoting</span></code> was specified as <code class="docutils literal notranslate"><span class="pre">None</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13411">GH13411</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">engine='c'</span></code> in which fields were not properly cast to float when quoting was specified as non-numeric (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13411">GH13411</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code> in Python 2.x with non-UTF8 encoded, multi-character separated data (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/3404">GH3404</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv()</span></code>, where aliases for utf-xx (e.g. UTF-xx, UTF_xx, utf_xx) raised UnicodeDecodeError (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13549">GH13549</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code>, <code class="docutils literal notranslate"><span class="pre">pd.read_table</span></code>, <code class="docutils literal notranslate"><span class="pre">pd.read_fwf</span></code>, <code class="docutils literal notranslate"><span class="pre">pd.read_stata</span></code> and <code class="docutils literal notranslate"><span class="pre">pd.read_sas</span></code> where files were opened by parsers but not closed if both <code class="docutils literal notranslate"><span class="pre">chunksize</span></code> and <code class="docutils literal notranslate"><span class="pre">iterator</span></code> were <code class="docutils literal notranslate"><span class="pre">None</span></code>. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13940">GH13940</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">StataReader</span></code>, <code class="docutils literal notranslate"><span class="pre">StataWriter</span></code>, <code class="docutils literal notranslate"><span class="pre">XportReader</span></code> and <code class="docutils literal notranslate"><span class="pre">SAS7BDATReader</span></code> where a file was not properly closed when an error was raised. (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13940">GH13940</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.pivot_table()</span></code> where <code class="docutils literal notranslate"><span class="pre">margins_name</span></code> is ignored when <code class="docutils literal notranslate"><span class="pre">aggfunc</span></code> is a list (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13354">GH13354</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.Series.str.zfill</span></code>, <code class="docutils literal notranslate"><span class="pre">center</span></code>, <code class="docutils literal notranslate"><span class="pre">ljust</span></code>, <code class="docutils literal notranslate"><span class="pre">rjust</span></code>, and <code class="docutils literal notranslate"><span class="pre">pad</span></code> when passing non-integers, did not raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13598">GH13598</a>)</p></li>
<li><p>Bug in checking for any null objects in a <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code>, which always returned <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13603">GH13603</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> arithmetic raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> if it contains datetime-like as <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13043">GH13043</a>)</p></li>
<li><p>Bug <code class="docutils literal notranslate"><span class="pre">Series.isnull()</span></code> and <code class="docutils literal notranslate"><span class="pre">Series.notnull()</span></code> ignore <code class="docutils literal notranslate"><span class="pre">Period('NaT')</span></code>  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13737">GH13737</a>)</p></li>
<li><p>Bug <code class="docutils literal notranslate"><span class="pre">Series.fillna()</span></code> and <code class="docutils literal notranslate"><span class="pre">Series.dropna()</span></code> don’t affect to <code class="docutils literal notranslate"><span class="pre">Period('NaT')</span></code>  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13737">GH13737</a></p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.fillna(value=np.nan)</span></code> incorrectly raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> on a <code class="docutils literal notranslate"><span class="pre">category</span></code> dtyped <code class="docutils literal notranslate"><span class="pre">Series</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14021">GH14021</a>)</p></li>
<li><p>Bug in extension dtype creation where the created types were not is/identical (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13285">GH13285</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.resample(..)</span></code> where incorrect warnings were triggered by IPython introspection (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13618">GH13618</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">NaT</span></code> - <code class="docutils literal notranslate"><span class="pre">Period</span></code> raises <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13071">GH13071</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> comparison may output incorrect result if rhs contains <code class="docutils literal notranslate"><span class="pre">NaT</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9005">GH9005</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> and <code class="docutils literal notranslate"><span class="pre">Index</span></code> comparison may output incorrect result if it contains <code class="docutils literal notranslate"><span class="pre">NaT</span></code> with <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13592">GH13592</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Period</span></code> addition raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> if <code class="docutils literal notranslate"><span class="pre">Period</span></code> is on right hand side (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13069">GH13069</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Period</span></code> and <code class="docutils literal notranslate"><span class="pre">Series</span></code> or <code class="docutils literal notranslate"><span class="pre">Index</span></code> comparison raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13200">GH13200</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.set_eng_float_format()</span></code> that would prevent NaN and Inf from formatting (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11981">GH11981</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.unstack</span></code> with <code class="docutils literal notranslate"><span class="pre">Categorical</span></code> dtype resets <code class="docutils literal notranslate"><span class="pre">.ordered</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13249">GH13249</a>)</p></li>
<li><p>Clean some compile time warnings in datetime parsing (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13607">GH13607</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">factorize</span></code> raises <code class="docutils literal notranslate"><span class="pre">AmbiguousTimeError</span></code> if data contains datetime near DST boundary (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13750">GH13750</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.set_index</span></code> raises <code class="docutils literal notranslate"><span class="pre">AmbiguousTimeError</span></code> if new index contains DST boundary and multi levels (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12920">GH12920</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.shift</span></code> raises <code class="docutils literal notranslate"><span class="pre">AmbiguousTimeError</span></code> if data contains datetime near DST boundary (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13926">GH13926</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.read_hdf()</span></code> returns incorrect result when a <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> with a <code class="docutils literal notranslate"><span class="pre">categorical</span></code> column and a query which doesn’t match any values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13792">GH13792</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.iloc</span></code> when indexing with a non lexsorted MultiIndex (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13797">GH13797</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.loc</span></code> when indexing with date strings in a reverse sorted <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14316">GH14316</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> comparison operators when dealing with zero dim NumPy arrays (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13006">GH13006</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.combine_first</span></code> may return incorrect <code class="docutils literal notranslate"><span class="pre">dtype</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/7630">GH7630</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10567">GH10567</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby</span></code> where <code class="docutils literal notranslate"><span class="pre">apply</span></code> returns different result depending on whether first result is <code class="docutils literal notranslate"><span class="pre">None</span></code> or not (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12824">GH12824</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby(..).nth()</span></code> where the group key is included inconsistently if called after <code class="docutils literal notranslate"><span class="pre">.head()/.tail()</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12839">GH12839</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.to_html</span></code>, <code class="docutils literal notranslate"><span class="pre">.to_latex</span></code> and <code class="docutils literal notranslate"><span class="pre">.to_string</span></code> silently ignore custom datetime formatter passed through the <code class="docutils literal notranslate"><span class="pre">formatters</span></code> key word (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/10690">GH10690</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.iterrows()</span></code>, not yielding a <code class="docutils literal notranslate"><span class="pre">Series</span></code> subclasse if defined (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13977">GH13977</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.to_numeric</span></code> when <code class="docutils literal notranslate"><span class="pre">errors='coerce'</span></code> and input contains non-hashable objects (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13324">GH13324</a>)</p></li>
<li><p>Bug in invalid <code class="docutils literal notranslate"><span class="pre">Timedelta</span></code> arithmetic and comparison may raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> rather than <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13624">GH13624</a>)</p></li>
<li><p>Bug in invalid datetime parsing in <code class="docutils literal notranslate"><span class="pre">to_datetime</span></code> and <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> may raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> rather than <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11169">GH11169</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/11287">GH11287</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index</span></code> created with tz-aware <code class="docutils literal notranslate"><span class="pre">Timestamp</span></code> and mismatched <code class="docutils literal notranslate"><span class="pre">tz</span></code> option incorrectly coerces timezone (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13692">GH13692</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> with nanosecond frequency does not include timestamp specified with <code class="docutils literal notranslate"><span class="pre">end</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13672">GH13672</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">`Series</span></code> when setting a slice with a <code class="docutils literal notranslate"><span class="pre">np.timedelta64</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14155">GH14155</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index</span></code> raises <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> if <code class="docutils literal notranslate"><span class="pre">datetime</span></code> exceeds <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> bounds, rather than coercing to <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13663">GH13663</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index</span></code> may ignore specified <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> or <code class="docutils literal notranslate"><span class="pre">timedelta64</span></code> passed as <code class="docutils literal notranslate"><span class="pre">dtype</span></code>  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13981">GH13981</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> can be created without no arguments rather than raises <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13793">GH13793</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.value_counts()</span></code> raises <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> if data exceeds <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> bounds (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13663">GH13663</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code> may raise <code class="docutils literal notranslate"><span class="pre">OutOfBoundsDatetime</span></code> if input <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> has other unit than <code class="docutils literal notranslate"><span class="pre">ns</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/9114">GH9114</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> creation with <code class="docutils literal notranslate"><span class="pre">np.datetime64</span></code> which has other unit than <code class="docutils literal notranslate"><span class="pre">ns</span></code> as <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype results in incorrect values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13876">GH13876</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">resample</span></code> with timedelta data where data was casted to float (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13119">GH13119</a>).</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.isnull()</span></code> <code class="docutils literal notranslate"><span class="pre">pd.notnull()</span></code> raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> if input datetime-like has other unit than <code class="docutils literal notranslate"><span class="pre">ns</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13389">GH13389</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.merge()</span></code> may raise <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> if input datetime-like has other unit than <code class="docutils literal notranslate"><span class="pre">ns</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13389">GH13389</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code>/<code class="docutils literal notranslate"><span class="pre">read_hdf()</span></code> discarded <code class="docutils literal notranslate"><span class="pre">DatetimeIndex.name</span></code> if <code class="docutils literal notranslate"><span class="pre">tz</span></code> was set (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13884">GH13884</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Categorical.remove_unused_categories()</span></code> changes <code class="docutils literal notranslate"><span class="pre">.codes</span></code> dtype to platform int (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13261">GH13261</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">groupby</span></code> with <code class="docutils literal notranslate"><span class="pre">as_index=False</span></code> returns all NaN’s when grouping on multiple columns including a categorical one (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13204">GH13204</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">df.groupby(...)[...]</span></code> where getitem with <code class="docutils literal notranslate"><span class="pre">Int64Index</span></code> raised an error (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13731">GH13731</a>)</p></li>
<li><p>Bug in the CSS classes assigned to <code class="docutils literal notranslate"><span class="pre">DataFrame.style</span></code> for index names. Previously they were assigned <code class="docutils literal notranslate"><span class="pre">&quot;col_heading</span> <span class="pre">level&lt;n&gt;</span> <span class="pre">col&lt;c&gt;&quot;</span></code> where <code class="docutils literal notranslate"><span class="pre">n</span></code> was the number of levels + 1. Now they are assigned <code class="docutils literal notranslate"><span class="pre">&quot;index_name</span> <span class="pre">level&lt;n&gt;&quot;</span></code>, where <code class="docutils literal notranslate"><span class="pre">n</span></code> is the correct level for that MultiIndex.</p></li>
<li><p>Bug where <code class="docutils literal notranslate"><span class="pre">pd.read_gbq()</span></code> could throw <code class="docutils literal notranslate"><span class="pre">ImportError:</span> <span class="pre">No</span> <span class="pre">module</span> <span class="pre">named</span> <span class="pre">discovery</span></code> as a result of a naming conflict with another python package called apiclient  (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13454">GH13454</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index.union</span></code> returns an incorrect result with a named empty index (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13432">GH13432</a>)</p></li>
<li><p>Bugs in <code class="docutils literal notranslate"><span class="pre">Index.difference</span></code> and <code class="docutils literal notranslate"><span class="pre">DataFrame.join</span></code> raise in Python3 when using mixed-integer indexes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13432">GH13432</a>, <a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12814">GH12814</a>)</p></li>
<li><p>Bug in subtract tz-aware <code class="docutils literal notranslate"><span class="pre">datetime.datetime</span></code> from tz-aware <code class="docutils literal notranslate"><span class="pre">datetime64</span></code> series (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14088">GH14088</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.to_excel()</span></code> when DataFrame contains a MultiIndex which contains a label with a NaN value (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13511">GH13511</a>)</p></li>
<li><p>Bug in invalid frequency offset string like “D1”, “-2-3H” may not raise <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13930">GH13930</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">concat</span></code> and <code class="docutils literal notranslate"><span class="pre">groupby</span></code> for hierarchical frames with <code class="docutils literal notranslate"><span class="pre">RangeIndex</span></code> levels (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13542">GH13542</a>).</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series.str.contains()</span></code> for Series containing only <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values of <code class="docutils literal notranslate"><span class="pre">object</span></code> dtype (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14171">GH14171</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">agg()</span></code> function on groupby dataframe changes dtype of <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> column to <code class="docutils literal notranslate"><span class="pre">float64</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12821">GH12821</a>)</p></li>
<li><p>Bug in using NumPy ufunc with <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> to add or subtract integer raise <code class="docutils literal notranslate"><span class="pre">IncompatibleFrequency</span></code>. Note that using standard operator like <code class="docutils literal notranslate"><span class="pre">+</span></code> or <code class="docutils literal notranslate"><span class="pre">-</span></code> is recommended, because standard operators use more efficient path (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13980">GH13980</a>)</p></li>
<li><p>Bug in operations on <code class="docutils literal notranslate"><span class="pre">NaT</span></code> returning <code class="docutils literal notranslate"><span class="pre">float</span></code> instead of <code class="docutils literal notranslate"><span class="pre">datetime64[ns]</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/12941">GH12941</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Series</span></code> flexible arithmetic methods (like <code class="docutils literal notranslate"><span class="pre">.add()</span></code>) raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> when <code class="docutils literal notranslate"><span class="pre">axis=None</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13894">GH13894</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DataFrame.to_csv()</span></code> with <code class="docutils literal notranslate"><span class="pre">MultiIndex</span></code> columns in which a stray empty line was added (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/6618">GH6618</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">DatetimeIndex</span></code>, <code class="docutils literal notranslate"><span class="pre">TimedeltaIndex</span></code> and <code class="docutils literal notranslate"><span class="pre">PeriodIndex.equals()</span></code> may return <code class="docutils literal notranslate"><span class="pre">True</span></code> when input isn’t <code class="docutils literal notranslate"><span class="pre">Index</span></code> but contains the same values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13107">GH13107</a>)</p></li>
<li><p>Bug in assignment against datetime with timezone may not work if it contains datetime near DST boundary (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14146">GH14146</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">pd.eval()</span></code> and <code class="docutils literal notranslate"><span class="pre">HDFStore</span></code> query truncating long float literals with python 2 (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14241">GH14241</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index</span></code> raises <code class="docutils literal notranslate"><span class="pre">KeyError</span></code> displaying incorrect column when column is not in the df and columns contains duplicate values (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13822">GH13822</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Period</span></code> and <code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> creating wrong dates when frequency has combined offset aliases (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13874">GH13874</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">.to_string()</span></code> when called with an integer <code class="docutils literal notranslate"><span class="pre">line_width</span></code> and <code class="docutils literal notranslate"><span class="pre">index=False</span></code> raises an UnboundLocalError exception because <code class="docutils literal notranslate"><span class="pre">idx</span></code> referenced before assignment.</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">eval()</span></code> where the <code class="docutils literal notranslate"><span class="pre">resolvers</span></code> argument would not accept a list (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14095">GH14095</a>)</p></li>
<li><p>Bugs in <code class="docutils literal notranslate"><span class="pre">stack</span></code>, <code class="docutils literal notranslate"><span class="pre">get_dummies</span></code>, <code class="docutils literal notranslate"><span class="pre">make_axis_dummies</span></code> which don’t preserve categorical dtypes in (multi)indexes (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13854">GH13854</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PeriodIndex</span></code> can now accept <code class="docutils literal notranslate"><span class="pre">list</span></code> and <code class="docutils literal notranslate"><span class="pre">array</span></code> which contains <code class="docutils literal notranslate"><span class="pre">pd.NaT</span></code> (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13430">GH13430</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">df.groupby</span></code> where <code class="docutils literal notranslate"><span class="pre">.median()</span></code> returns arbitrary values if grouped dataframe contains empty bins (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/13629">GH13629</a>)</p></li>
<li><p>Bug in <code class="docutils literal notranslate"><span class="pre">Index.copy()</span></code> where <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter was ignored (<a class="reference external" href="https://github.com/pandas-dev/pandas/issues/14302">GH14302</a>)</p></li>
</ul>
</div>
<div class="section" id="contributors">
<span id="whatsnew-0-19-0-contributors"></span><h2>Contributors<a class="headerlink" href="#contributors" title="Permalink to this headline">¶</a></h2>
<p>A total of 117 people contributed patches to this release.  People with a
“+” by their names contributed a patch for the first time.
</p>
<ul class="simple">
<li><p>Adrien Emery +</p></li>
<li><p>Alex Alekseyev</p></li>
<li><p>Alex Vig +</p></li>
<li><p>Allen Riddell +</p></li>
<li><p>Amol +</p></li>
<li><p>Amol Agrawal +</p></li>
<li><p>Andy R. Terrel +</p></li>
<li><p>Anthonios Partheniou</p></li>
<li><p>Ben Kandel +</p></li>
<li><p>Bob Baxley +</p></li>
<li><p>Brett Rosen +</p></li>
<li><p>Camilo Cota +</p></li>
<li><p>Chris</p></li>
<li><p>Chris Grinolds</p></li>
<li><p>Chris Warth</p></li>
<li><p>Christian Hudon</p></li>
<li><p>Christopher C. Aycock</p></li>
<li><p>Daniel Siladji +</p></li>
<li><p>Douglas McNeil</p></li>
<li><p>Drewrey Lupton +</p></li>
<li><p>Eduardo Blancas Reyes +</p></li>
<li><p>Elliot Marsden +</p></li>
<li><p>Evan Wright</p></li>
<li><p>Felix Marczinowski +</p></li>
<li><p>Francis T. O’Donovan</p></li>
<li><p>Geraint Duck +</p></li>
<li><p>Giacomo Ferroni +</p></li>
<li><p>Grant Roch +</p></li>
<li><p>Gábor Lipták</p></li>
<li><p>Haleemur Ali +</p></li>
<li><p>Hassan Shamim +</p></li>
<li><p>Iulius Curt +</p></li>
<li><p>Ivan Nazarov +</p></li>
<li><p>Jeff Reback</p></li>
<li><p>Jeffrey Gerard +</p></li>
<li><p>Jenn Olsen +</p></li>
<li><p>Jim Crist</p></li>
<li><p>Joe Jevnik</p></li>
<li><p>John Evans +</p></li>
<li><p>John Freeman</p></li>
<li><p>John Liekezer +</p></li>
<li><p>John W. O’Brien</p></li>
<li><p>John Zwinck +</p></li>
<li><p>Johnny Gill +</p></li>
<li><p>Jordan Erenrich +</p></li>
<li><p>Joris Van den Bossche</p></li>
<li><p>Josh Howes +</p></li>
<li><p>Jozef Brandys +</p></li>
<li><p>Ka Wo Chen</p></li>
<li><p>Kamil Sindi +</p></li>
<li><p>Kerby Shedden</p></li>
<li><p>Kernc +</p></li>
<li><p>Kevin Sheppard</p></li>
<li><p>Matthieu Brucher +</p></li>
<li><p>Maximilian Roos</p></li>
<li><p>Michael Scherer +</p></li>
<li><p>Mike Graham +</p></li>
<li><p>Mortada Mehyar</p></li>
<li><p>Muhammad Haseeb Tariq +</p></li>
<li><p>Nate George +</p></li>
<li><p>Neil Parley +</p></li>
<li><p>Nicolas Bonnotte</p></li>
<li><p>OXPHOS</p></li>
<li><p>Pan Deng / Zora +</p></li>
<li><p>Paul +</p></li>
<li><p>Paul Mestemaker +</p></li>
<li><p>Pauli Virtanen</p></li>
<li><p>Pawel Kordek +</p></li>
<li><p>Pietro Battiston</p></li>
<li><p>Piotr Jucha +</p></li>
<li><p>Ravi Kumar Nimmi +</p></li>
<li><p>Robert Gieseke</p></li>
<li><p>Robert Kern +</p></li>
<li><p>Roger Thomas</p></li>
<li><p>Roy Keyes +</p></li>
<li><p>Russell Smith +</p></li>
<li><p>Sahil Dua +</p></li>
<li><p>Sanjiv Lobo +</p></li>
<li><p>Sašo Stanovnik +</p></li>
<li><p>Shawn Heide +</p></li>
<li><p>Sinhrks</p></li>
<li><p>Stephen Kappel +</p></li>
<li><p>Steve Choi +</p></li>
<li><p>Stewart Henderson +</p></li>
<li><p>Sudarshan Konge +</p></li>
<li><p>Thomas A Caswell</p></li>
<li><p>Tom Augspurger</p></li>
<li><p>Tom Bird +</p></li>
<li><p>Uwe Hoffmann +</p></li>
<li><p>WillAyd +</p></li>
<li><p>Xiang Zhang +</p></li>
<li><p>YG-Riku +</p></li>
<li><p>Yadunandan +</p></li>
<li><p>Yaroslav Halchenko</p></li>
<li><p>Yuichiro Kaneko +</p></li>
<li><p>adneu</p></li>
<li><p>agraboso +</p></li>
<li><p>babakkeyvani +</p></li>
<li><p>c123w +</p></li>
<li><p>chris-b1</p></li>
<li><p>cmazzullo +</p></li>
<li><p>conquistador1492 +</p></li>
<li><p>cr3 +</p></li>
<li><p>dsm054</p></li>
<li><p>gfyoung</p></li>
<li><p>harshul1610 +</p></li>
<li><p>iamsimha +</p></li>
<li><p>jackieleng +</p></li>
<li><p>mpuels +</p></li>
<li><p>pijucha +</p></li>
<li><p>priyankjain +</p></li>
<li><p>sinhrks</p></li>
<li><p>wcwagner +</p></li>
<li><p>yui-knk +</p></li>
<li><p>zhangjinjie +</p></li>
<li><p>znmean +</p></li>
<li><p>颜发才（Yan Facai） +</p></li>
</ul>
</div>
</div>


              </div>
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="v0.19.1.html" title="previous page">v0.19.1 (November 3, 2016)</a>
    <a class='right-next' id="next-link" href="v0.18.1.html" title="next page">v0.18.1 (May 3, 2016)</a>

              </div>
              
          </main>

      </div>
    </div><script>
    // TOC sidebar - add "active" class to parent list
    //
    // Bootstrap's scrollspy adds the active class to the <a> link,
    // but for the automatic collapsing we need this on the parent list item.
    //
    // The event is triggered on "window" (and not the nav item as documented),
    // see https://github.com/twbs/bootstrap/issues/20086
    $(window).on("activate.bs.scrollspy", function(){
    var navLinks = document.querySelectorAll('#bd-toc-nav a');
    for (var i = 0; i < navLinks.length; i++) {
        var navLink = navLinks[i];
        navLink.parentElement.classList.remove('active');
    }
    var navLinks = document.querySelectorAll('#bd-toc-nav a.active');
    for (var i = 0; i < navLinks.length; i++) {
        var navLink = navLinks[i];
        navLink.parentElement.classList.add('active');
    }
    });

    /**
     * Use left and right arrow keys to navigate forward and backwards.
    */
    const LEFT_ARROW_KEYCODE = 37
    const RIGHT_ARROW_KEYCODE = 39

    const getPrevUrl = () => document.getElementById('prev-link').href
    const getNextUrl = () => document.getElementById('next-link').href
    const initPageNav = (event) => {
        const keycode = event.which

        if (keycode === LEFT_ARROW_KEYCODE) {
            window.location.href = getPrevUrl();
        } else if (keycode === RIGHT_ARROW_KEYCODE) {
            window.location.href = getNextUrl();
        }
    };

    var keyboardListener = false;
    $( document ).ready(() => {
        if (keyboardListener === false) {
            document.addEventListener('keydown', initPageNav)
            keyboardListener = true;
        }
    });
</script>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2008-2020, the pandas development team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.0.
    </div>
  </body>
</html>